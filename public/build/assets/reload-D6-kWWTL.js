import{K as V,m as B,r as S,j as e}from"./app-k-c3-IUX.js";import{I as t}from"./input-error--OUc2wW7.js";import{B as L}from"./button-DS4OftCH.js";import{D as R,b as w,c as U,d as G,e as M}from"./dialog-BuUT_YpG.js";import{I as q}from"./input-BmLBwXHo.js";import{L as l}from"./label-CH4sFQ5V.js";import{S as u,a as m,b as p,c as h,d as x,e as j,f}from"./select-Bx-P63rG.js";import{m as z}from"./utils-CISCwvQU.js";import{t as g}from"./index-BnhXOjFJ.js";import{L as H}from"./loader-circle-BUzb_yh4.js";import"./index-Ch_9LA9U.js";import"./createLucideIcon-SZDYLwmW.js";import"./index-D342dBXe.js";import"./index-B3PbW1eo.js";import"./index-DrGBlFrz.js";import"./index-qSiOHZki.js";import"./index-BL9xfY7b.js";import"./check-CrF9bga2.js";function te({rules:K,selectedItem:s,isDialogOpen:b,setIsDialogOpen:_}){const{contractorCompanyTypes:C,ueas:D}=V().props,{data:a,setData:o,post:N,processing:y,errors:i,reset:A}=B({contractor_company_type_id:s.contractor_company_type_id,uea_id:s.uea_id,year:s.year,month:s.month,file:null}),n=S.useRef(null);S.useEffect(()=>{o({contractor_company_type_id:s.contractor_company_type_id,uea_id:s.uea_id,year:s.year,month:s.month,file:null})},[s,o]);const E=r=>{r.preventDefault(),N(route("annexes.store"),{onSuccess:c=>{var v;const d=(v=c.props)==null?void 0:v.flash;d.success?(g.success(d.success,{duration:2e4,closeButton:!0}),A(),_(!1)):d.error&&(o("file",null),n.current&&(n.current.value=""),g.error(d.error,{duration:2e4,closeButton:!0}))},onError:c=>{_(!0),g.error("Ocurri칩 un error al subir el archivo, intente de nuevo.",{duration:2e4,closeButton:!0}),o("file",null),n.current&&(n.current.value="")}})},F=()=>a.contractor_company_type_id&&a.uea_id&&a.year&&a.month&&a.file,T=Array.from({length:10},(r,c)=>new Date().getFullYear()-c);return e.jsx(R,{open:b,onOpenChange:_,children:e.jsxs(w,{className:"sm:max-w-[425px]",onInteractOutside:r=>r.preventDefault(),children:[e.jsxs(U,{children:[e.jsx(G,{children:"Actualizar Indicador"}),e.jsx(M,{children:"Complete los campos para agregar un nuevo indicador."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("contractor.store"),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"contractor_company_type_id",children:"Tipo de Cliente"}),e.jsxs(u,{required:!0,disabled:!0,onValueChange:r=>o("contractor_company_type_id",r),value:a.contractor_company_type_id,children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Seleccione un tipo de cliente"})}),e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(j,{children:"Tipos de Cliente"}),C.map(r=>e.jsx(f,{value:String(r.id),children:r.name},r.id))]})})]}),e.jsx(t,{message:i.contractor_company_type_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"uea_id",children:"UEA"}),e.jsxs(u,{disabled:!0,onValueChange:r=>o("uea_id",r),value:a.uea_id,children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Seleccione una UEA"})}),e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(j,{children:"UEAs"}),D.map(r=>e.jsx(f,{value:String(r.id),children:r.name},r.id))]})})]}),e.jsx(t,{message:i.uea_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"year",children:"A침o"}),e.jsxs(u,{disabled:!0,onValueChange:r=>o("year",r),value:a.year,children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Seleccione un a침o"})}),e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(j,{children:"A침os"}),T.map(r=>e.jsx(f,{value:String(r),children:r},r))]})})]}),e.jsx(t,{message:i.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"month",children:"Mes"}),e.jsxs(u,{disabled:!0,onValueChange:r=>o("month",r),value:a.month,children:[e.jsx(m,{children:e.jsx(p,{placeholder:"Seleccione un mes"})}),e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(j,{children:"Meses"}),z.map(r=>e.jsx(f,{value:r.value,children:r.label},r.value))]})})]}),e.jsx(t,{message:i.month})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"file",children:"Archivo"}),e.jsx(q,{type:"file",id:"file",accept:".xlsx,.xls",ref:n,onChange:r=>o("file",r.target.files?r.target.files[0]:null)}),e.jsx(t,{message:i.file})]}),e.jsxs(L,{type:"submit",className:"mt-2",disabled:!F()||y,children:[y&&e.jsx(H,{className:"h-4 w-4 animate-spin"}),"Guardar"]})]})]})})}export{te as default};
