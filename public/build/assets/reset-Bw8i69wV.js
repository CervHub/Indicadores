import{m as h,r as e,j as s}from"./app-B3B3vDzt.js";import{B as b}from"./button-CE7iUt4E.js";import{D as g,b as E,c as w,d as N,e as v}from"./dialog-o0QIXGwb.js";import{t as n}from"./index-3yArXTTO.js";import{L as S}from"./loader-circle-DHZ3fQGi.js";import"./utils-Dxu7ruf7.js";import"./index-CxAX4850.js";import"./index-BWkVxsEy.js";function A({isOpen:l=!1,onOpenChange:o,selectedItem:r}){const{data:t,setData:d,post:u,processing:f}=h({id:r.id}),[p,a]=e.useState(l),[x,j]=e.useState(!1);e.useEffect(()=>{j(t.id!=="0")},[t]),e.useEffect(()=>{a(l)},[l]),e.useEffect(()=>{d("id",r.id)},[r,d]);const D=i=>{i.preventDefault(),u(route("contrata.password.reset",{personal:t.id}),{onSuccess:m=>{const c=m.props.flash;c.success&&(n.success(c.success),a(!1),o&&o(!1)),c.error&&(n.error(c.error),a(!0))},onError:m=>{a(!0),n.error("Ocurrió un error al restablecer la contraseña. Por favor, inténtelo de nuevo.")}})};return s.jsx("div",{children:s.jsx(g,{open:p,onOpenChange:i=>{a(i),o&&o(i)},children:s.jsxs(E,{className:"sm:max-w-[425px]",children:[s.jsxs(w,{children:[s.jsx(N,{children:"Restablecer Contraseña"}),s.jsxs(v,{children:["¿Está seguro de que desea restablecer la contraseña de ",r.nombres," ",r.apellidos," al DNI (",r.doi,")?"]})]}),s.jsx("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("contrata.password.reset",{personal:t.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(b,{type:"submit",className:"mt-2",disabled:f||!x,children:[f&&s.jsx(S,{className:"h-4 w-4 animate-spin"}),"Aceptar"]})})})]})})})}export{A as default};
