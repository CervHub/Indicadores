import{j as e,K as I,r as c,L as O}from"./app-Bmcdr3rY.js";import{B as d}from"./button-DTKbtbr3.js";import{S as N}from"./square-pen-C9RM2PWl.js";import{A as w}from"./arrow-up-down-CetmW9hN.js";import{D as v}from"./data-table-BMrGRlgB.js";import{C as G,a as k,b as z,d as A}from"./card-D_fnON4t.js";import{A as b}from"./app-layout-P0V2GsON.js";import U from"./create-BzEXsej3.js";import K from"./createCategoryCompany-B-eR7OQ8.js";import L from"./createGroupCompany-Dr7velbS.js";import B from"./updateCategoryCompany-BWYML-G7.js";import"./index-F1UbrP38.js";import"./utils-CISCwvQU.js";import"./createLucideIcon-BS7UES9g.js";import"./index-CC_2smN8.js";import"./table-gNZ6VK7S.js";import"./input-iTO7QCEj.js";import"./index-C5uH-olr.js";import"./index-3hBHLDdS.js";import"./index-CxZfpC1a.js";import"./index-CKnKVnvB.js";import"./tooltip-B6VKgxl7.js";import"./index-CtQ0aJ3B.js";import"./index-CwRZ8D_s.js";import"./index-Dwm5KZLc.js";import"./chevrons-up-down-BMrNvCaf.js";import"./truck-CdogFR6i.js";import"./chevron-right-BgY-W2X8.js";import"./input-error-BlgkwXPh.js";import"./dialog-DRTvkdgv.js";import"./label-CxH93Fcg.js";import"./checkbox-7nta__P4.js";import"./check-DxJ6GiVG.js";import"./loader-circle-C5lOWTxt.js";import"./select-BAHjfWcY.js";import"./trash-2-DNpxwq21.js";import"./plus-DvuWjLFm.js";const E=(m,p)=>[{id:"actions",header:"",cell:({row:a})=>{const n=a.original;return e.jsx("div",{className:"flex space-x-2",children:e.jsx(d,{variant:"warning",className:"h-8 w-8 p-0",onClick:()=>m(n,"edit"),children:e.jsx(N,{className:"h-4 w-4"})})})}},{accessorKey:"nombre",header:({column:a})=>e.jsxs(d,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Nombre",e.jsx(w,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"group",header:"Group",cell:({row:a})=>{const n=a.original,l=p.find(g=>g.id===Number(n.group_id));return e.jsx("span",{children:(l==null?void 0:l.name)||"-"})}}],T=[{title:"Gestion de Seguridad y Salud Ocupacional",href:"/admin/category"}];function De(){const{categories:m}=I().props,[p,a]=c.useState(!1),[n,l]=c.useState(!1),[g,C]=c.useState(!1),[s,u]=c.useState({id:null,name:null,isCategorized:null,groups:[]}),[f,h]=c.useState(null),y=(t,r,o,i)=>{u({id:t,name:r,isCategorized:o,groups:i}),a(!0)},j=(t,r,o,i)=>{u({id:t,name:r,isCategorized:o,groups:i}),l(!0)},S=(t,r)=>{if(r==="edit"){const o=m.find(i=>i.id===parseInt(t.category_id));o&&u({id:o.id,name:o.nombre,isCategorized:o.is_categorized,groups:o.groups}),h(t),C(!0),console.log("Acción:",r,"Item:",t),console.log("Categoría seleccionada:",s),console.log("Categoría:",o)}else r==="delete"&&console.log("Acción:",r,"Item:",t)};return e.jsxs(b,{breadcrumbs:T,children:[e.jsx(O,{title:"Gestion SSO"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(U,{}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-1 lg:grid-cols-2",children:[...m].reverse().map(({id:t,nombre:r,is_categorized:o,category_companies:i,groups:x},D)=>e.jsxs(G,{children:[e.jsxs(k,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsx(z,{className:"flex-1",children:r}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[o==="1"&&e.jsx(d,{size:"sm",variant:"secondary",onClick:()=>j(t,r,o,x),children:"Crear Grupo"}),e.jsxs(d,{size:"sm",className:"md:ml-4",onClick:()=>y(t,r,o,x),children:["Crear ",r]})]})]}),e.jsx(A,{children:e.jsx(v,{columns:E(S,x),data:i})})]},D))})]}),s.id!==null&&e.jsxs(e.Fragment,{children:[e.jsx(K,{categoryId:s.id,title:s.name,isDialogOpen:p,setIsDialogOpen:a,isCategorized:s.isCategorized,groups:s.groups}),e.jsx(L,{categoryId:s.id,title:s.name,isDialogOpen:n,setIsDialogOpen:l})]}),f&&e.jsx(B,{categoryId:s.id,title:s.name,isDialogOpen:g,setIsDialogOpen:C,isCategorized:s.isCategorized,groups:s.groups,item:f})]})}export{De as default};
