import{m as b,r as e,j as s}from"./app-BrE_DW6v.js";import{B as g}from"./button-DRinBeoB.js";import{D as E,b as y,c as N,d as v,e as C}from"./dialog-CUyr9pRU.js";import{b as S,m as B}from"./utils-CISCwvQU.js";import{t as d}from"./index-Dkfpp0nt.js";import{L as F}from"./loader-circle-n4Ue4q5C.js";import"./index-BepoNP-L.js";import"./createLucideIcon-CgrwBIBF.js";import"./index-17Co9tRC.js";import"./index-CM047A5K.js";function G({isOpen:c=!1,onOpenChange:o,selectedItem:r}){const{data:i,setData:n,patch:u,processing:m,reset:p}=b({id:r.id}),[x,a]=e.useState(c),[h,j]=e.useState(!1);e.useEffect(()=>{j(i.id!=="0")},[i]),e.useEffect(()=>{a(c)},[c]),e.useEffect(()=>{n("id",r.id)},[r,n]);const D=t=>{t.preventDefault(),u(route("consolidated.close",{id:i.id}),{onSuccess:f=>{const l=f.props.flash;l.success&&(a(!1),p(),d.success(l.success),o&&o(!1)),l.error&&(a(!1),d.error(l.error))},onError:f=>{a(!0),d.error("Ocurrió un error al cerrar el consolidado")}})};return s.jsx("div",{children:s.jsx(E,{open:x,onOpenChange:t=>{a(t),o&&o(t)},children:s.jsxs(y,{className:"sm:max-w-[425px]",children:[s.jsxs(N,{children:[s.jsx(v,{children:"Cerrar Consolidado"}),s.jsxs(C,{children:["¿Está seguro de que desea cerrar el consolidado para el mes de"," ",S(B,"value",r.month,"label")," del año ",r.year,"? Las empresas contratistas ya no podrán subir información."]})]}),s.jsx("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("consolidated.close",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(g,{type:"submit",className:"mt-2",disabled:m||!h,children:[m&&s.jsx(F,{className:"h-4 w-4 animate-spin"}),"Aceptar"]})})})]})})})}export{G as default};
