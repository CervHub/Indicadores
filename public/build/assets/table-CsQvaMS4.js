const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-oh8MZ7gf.js","assets/app-GVpGJeU7.js","assets/app-C9X4IQpW.css"])))=>i.map(i=>d[i]);
import{r as v,j as t,$ as S,_}from"./app-GVpGJeU7.js";import{B as p}from"./button-BHPTtTdP.js";import{C as P,a as z,b as A,d as D}from"./card-9PX1B3-T.js";import{I as E}from"./input-DW4r52MY.js";import{T as $,a as y,b as N,c as k}from"./tooltip-DUgacRix.js";import{Q as B}from"./index-C3cbmovn.js";import{c as I}from"./createLucideIcon-CFMFBQne.js";import{S as L}from"./square-pen-BGrwMqDG.js";import{C as M}from"./chevron-left-DaSUshNj.js";import{C as Q}from"./chevron-right-y3yTp_Zd.js";import"./utils-qLzneZb4.js";import"./index-CwCzXZA7.js";import"./index-CZ6M3Ocn.js";import"./index-Ro_MRc18.js";import"./index-CU00uo7P.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],W=I("Unlink",U);function R(n){return window.route?window.route("vehicle.show",n):`${window.location.origin}/vehicle/${n}`}const j=15;function H(n,f){const x=document.createElement("canvas");x.width=420,x.height=220;const e=x.getContext("2d");e&&(e.save(),e.beginPath(),e.moveTo(28,0),e.lineTo(392,0),e.quadraticCurveTo(420,0,420,28),e.lineTo(420,192),e.quadraticCurveTo(420,220,392,220),e.lineTo(28,220),e.quadraticCurveTo(0,220,0,192),e.lineTo(0,28),e.quadraticCurveTo(0,0,28,0),e.closePath(),e.clip(),e.fillStyle="#fff",e.fillRect(0,0,420,220),e.restore(),e.save(),e.strokeStyle="#d1d5db",e.lineWidth=4,e.beginPath(),e.moveTo(28,2),e.lineTo(392,2),e.quadraticCurveTo(418,2,418,28),e.lineTo(418,192),e.quadraticCurveTo(418,218,392,218),e.lineTo(28,218),e.quadraticCurveTo(2,218,2,192),e.lineTo(2,28),e.quadraticCurveTo(2,2,28,2),e.closePath(),e.stroke(),e.restore(),_(()=>import("./browser-oh8MZ7gf.js").then(m=>m.b),__vite__mapDeps([0,1,2])).then(m=>{const u=document.createElement("canvas");u.width=180,u.height=180,m.toCanvas(u,R(n.id),{width:180,margin:1},function(C){if(C){alert("No se pudo generar el QR para descargar.");return}e.drawImage(u,24,40/2,180,180);const i=236,a=24,h=420-i-24,d=54,l=18;e.save(),e.beginPath(),e.moveTo(i+l,a),e.lineTo(i+h-l,a),e.quadraticCurveTo(i+h,a,i+h,a+l),e.lineTo(i+h,a+d-l),e.quadraticCurveTo(i+h,a+d,i+h-l,a+d),e.lineTo(i+l,a+d),e.quadraticCurveTo(i,a+d,i,a+d-l),e.lineTo(i,a+l),e.quadraticCurveTo(i,a,i+l,a),e.closePath(),e.fillStyle="#d7282f",e.fill(),e.font="bold 2.1rem Arial",e.fillStyle="#fff",e.textAlign="center",e.textBaseline="middle",e.fillText(n.license_plate,i+h/2,a+d/2),e.font="bold 1.1rem Arial",e.fillStyle="#222",e.textAlign="left",e.textBaseline="top";let r=a+d+18;const o=i;e.fillText("Modelo:",o,r),e.font="1.1rem Arial",e.fillText(n.model,o+90,r),e.font="bold 1.1rem Arial",e.fillText("Marca:",o,r+28),e.font="1.1rem Arial",e.fillText(n.brand,o+90,r+28),e.font="bold 1.1rem Arial",e.fillText("Año:",o,r+56),e.font="1.1rem Arial",e.fillText(n.year,o+90,r+56),e.font="bold 1.1rem Arial",e.fillText("Color:",o,r+84),e.font="1.1rem Arial",e.fillText(n.color??"",o+90,r+84);const s=document.createElement("a");s.download=f,s.href=x.toDataURL("image/png"),s.click()})}))}const ne=({data:n,onAction:f})=>{const[c,g]=v.useState(1),[b,q]=v.useState(""),[w,x]=v.useState(null),e=n.filter(r=>r.license_plate.toLowerCase().includes(b.toLowerCase())).sort((r,o)=>(o.is_linked==="1"?1:0)-(r.is_linked==="1"?1:0)),m=(c-1)*j,u=m+j,C=e.slice(m,u),i=Math.ceil(e.length/j),a=()=>{c>1&&g(c-1)},h=()=>{c<i&&g(c+1)},d=r=>{q(r.target.value),g(1)},l=(r,o)=>{x(o);const s=n.find(T=>T.id===o);s&&new Promise(T=>{H(s,`qr_${r}.png`),T()}).finally(()=>{x(null)})};return t.jsx($,{children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",children:t.jsx(E,{type:"text",placeholder:"Search by license plate...",value:b,onChange:d,className:"w-full"})}),t.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4",children:C.map(r=>{const o=r.is_linked==="1";return t.jsx(S,{href:R(r.id),className:"block",style:{textDecoration:"none",color:"inherit"},target:"_blank",rel:"noopener noreferrer",children:t.jsxs(P,{className:`relative w-full rounded-lg border-2 cursor-pointer ${o?"border-green-500":"border-gray-300"}`,children:[t.jsx(z,{onClick:s=>s.stopPropagation(),children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(A,{className:"truncate max-w-[65%] text-base font-semibold",title:`${r.license_plate} - ${r.brand}`,children:`${r.license_plate} - ${r.brand}`}),t.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[t.jsxs(y,{children:[t.jsx(N,{asChild:!0,children:t.jsx(p,{variant:"destructive",size:"icon",onClick:s=>{s.preventDefault(),f(r,"desvincular")},children:t.jsx(W,{className:"h-4 w-4"})})}),t.jsx(k,{children:t.jsx("p",{children:"Desvincular"})})]}),t.jsxs(y,{children:[t.jsx(N,{asChild:!0,children:t.jsx(p,{variant:"outline",size:"icon",onClick:s=>{s.preventDefault(),f(r,"actualizar")},children:t.jsx(L,{className:"h-4 w-4"})})}),t.jsx(k,{children:t.jsx("p",{children:"Editar"})})]}),t.jsxs(y,{children:[t.jsx(N,{asChild:!0,children:t.jsx(p,{variant:"outline",size:"icon",onClick:s=>{s.preventDefault(),l(r.license_plate,r.id)},disabled:w===r.id,children:w===r.id?t.jsxs("svg",{className:"animate-spin h-4 w-4 text-gray-500",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"})})})}),t.jsx(k,{children:t.jsx("p",{children:"Descargar QR"})})]})]})]})}),t.jsxs(D,{onClick:s=>s.stopPropagation(),children:[t.jsxs("p",{className:"text-xs mt-1",children:[t.jsx("strong",{children:"Marca:"}),t.jsx("span",{className:"ml-1",children:r.brand})]}),t.jsxs("p",{className:"text-xs mt-1",children:[t.jsx("strong",{children:"Año:"}),t.jsx("span",{className:"ml-1",children:r.year})]}),t.jsxs("p",{className:"text-xs mt-1",children:[t.jsx("strong",{children:"Cód. de llamada:"}),t.jsx("span",{className:"ml-1",children:r.code})]}),t.jsxs("p",{className:"text-xs mt-1",children:[t.jsx("strong",{children:"Tipo:"}),t.jsx("span",{className:"ml-1",children:r.type})]}),t.jsx("div",{className:"absolute bottom-2 right-2 bg-white p-1 rounded-full shadow",id:`qr-${r.id}`,children:t.jsx(B,{value:R(r.id),size:100,bgColor:"#fff"})})]})]})},r.id)})}),e.length>j&&t.jsxs("div",{className:"mt-4 flex items-center justify-start gap-4",children:[t.jsxs(p,{onClick:a,disabled:c===1,variant:"outline",className:"flex items-center gap-2",children:[t.jsx(M,{className:"h-4 w-4"}),"Previous"]}),t.jsxs("span",{children:["Page ",c," of ",i]}),t.jsxs(p,{onClick:h,disabled:c===i,variant:"outline",className:"flex items-center gap-2",children:["Next",t.jsx(Q,{className:"h-4 w-4"})]})]})]})})};export{ne as default};
