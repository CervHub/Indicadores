import{m as _,r as c,j as e}from"./app-k-c3-IUX.js";import{I as l}from"./input-error--OUc2wW7.js";import{B as b}from"./button-DS4OftCH.js";import{D as q,a as R,b as y,c as L,d as T,e as V}from"./dialog-BuUT_YpG.js";import{I as d}from"./input-BmLBwXHo.js";import{L as t}from"./label-CH4sFQ5V.js";import{S as P,a as U,b as w,c as B,f as k}from"./select-Bx-P63rG.js";import{t as p}from"./index-BnhXOjFJ.js";import{L as A}from"./loader-circle-BUzb_yh4.js";import"./utils-CISCwvQU.js";import"./index-Ch_9LA9U.js";import"./createLucideIcon-SZDYLwmW.js";import"./index-D342dBXe.js";import"./index-B3PbW1eo.js";import"./index-DrGBlFrz.js";import"./index-qSiOHZki.js";import"./index-BL9xfY7b.js";import"./check-CrF9bga2.js";function ie({isOpen:u=!1,onOpenChange:n,roles:g}){const x=g.find(r=>r.code==="RU"),C=x?x.id.toString():"",{data:s,setData:o,post:N,processing:j,errors:i,reset:h,clearErrors:f}=_({doi:"",email:"",nombres:"",apellidos:"",telefono:"",cargo:"",role_id:C}),[D,m]=c.useState(u),[S,I]=c.useState(!1);c.useEffect(()=>{m(u)},[u]),c.useEffect(()=>{I(s.doi.trim()!==""&&s.email.trim()!==""&&s.nombres.trim()!==""&&s.apellidos.trim()!==""&&s.cargo.trim()!==""&&s.role_id.trim()!=="")},[s.doi,s.email,s.nombres,s.apellidos,s.cargo,s.role_id]);const F=r=>{m(r),n&&n(r),r||(h(),f())},E=r=>{r.preventDefault(),N(route("contrata.personal.store"),{onSuccess:v=>{const a=v.props.flash;a!=null&&a.success&&(p.success(a.success),h(),f(),m(!1),n&&n(!1)),a!=null&&a.error&&p.error(a.error)},onError:v=>{m(!0),p.error("Ocurrió un error al crear la persona.")}})};return e.jsx("div",{children:e.jsxs(q,{open:D,onOpenChange:F,children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(R,{asChild:!0,children:e.jsx(b,{className:"inline-block px-4 py-2",children:"Crear Persona"})})}),e.jsxs(y,{className:"sm:max-w-[425px]",children:[e.jsxs(L,{children:[e.jsx(T,{children:"Crear Persona"}),e.jsx(V,{children:"Complete los campos para crear una nueva persona."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("contrata.personal.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"doi",children:"Documento Nacional de Identidad (DNI) *"}),e.jsx(d,{id:"doi",value:s.doi,onChange:r=>o("doi",r.target.value),required:!0}),e.jsx(l,{message:i.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"email",children:"Email *"}),e.jsx(d,{id:"email",type:"email",value:s.email,onChange:r=>o("email",r.target.value),required:!0}),e.jsx(l,{message:i.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"nombres",children:"Nombres *"}),e.jsx(d,{id:"nombres",value:s.nombres,onChange:r=>o("nombres",r.target.value),required:!0}),e.jsx(l,{message:i.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"apellidos",children:"Apellidos *"}),e.jsx(d,{id:"apellidos",value:s.apellidos,onChange:r=>o("apellidos",r.target.value),required:!0}),e.jsx(l,{message:i.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(d,{id:"telefono",value:s.telefono,onChange:r=>o("telefono",r.target.value)}),e.jsx(l,{message:i.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"cargo",children:"Cargo *"}),e.jsx(d,{id:"cargo",value:s.cargo,onChange:r=>o("cargo",r.target.value),required:!0}),e.jsx(l,{message:i.cargo})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"role_id",children:"Rol *"}),e.jsxs(P,{value:s.role_id,onValueChange:r=>o("role_id",r),required:!0,children:[e.jsx(U,{children:e.jsx(w,{placeholder:"Seleccionar rol"})}),e.jsx(B,{children:g.map(r=>e.jsxs(k,{value:r.id.toString(),children:[r.code==="RU"?"Usuario":r.nombre," (",r.code,")"]},r.id))})]}),e.jsx(l,{message:i.role_id})]}),e.jsxs(b,{type:"submit",className:"mt-2",disabled:j||!S,children:[j&&e.jsx(A,{className:"h-4 w-4 animate-spin"}),"Crear"]})]})]})]})})}export{ie as default};
