import{r as t,j as a,K as Te,m as Oe,L as Ae}from"./app-BrE_DW6v.js";import{H as We}from"./heading-small-CrlgFLe9.js";import{I as ge}from"./input-error-BqJUiAGN.js";import{B as re}from"./button-DRinBeoB.js";import{D as Be,b as Fe,c as Le,d as He}from"./dialog-CUyr9pRU.js";import{I as he}from"./input-CrQhGnBg.js";import{d as U}from"./utils-CISCwvQU.js";import{L as xe}from"./label-BE0lwKFF.js";import{A as ze}from"./app-layout-CvakE5Jz.js";import{t as $e}from"./index-Dkfpp0nt.js";import{z as Ve}from"./transition-BWQ3vcpc.js";import"./index-BepoNP-L.js";import"./createLucideIcon-CgrwBIBF.js";import"./index-17Co9tRC.js";import"./index-CM047A5K.js";import"./tooltip-vZOg3HwM.js";import"./index-DM7GVMTz.js";import"./index-BYBiqWIa.js";import"./index-CTWSnWBA.js";import"./check-DrBqCDzO.js";import"./chevrons-up-down-BoiJnS6n.js";import"./truck-DbFGIp0f.js";import"./chevron-right-FQCcLLfH.js";var Ge=Object.defineProperty,qe=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,be=(e,r,l)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[r]=l,Ke=(e,r)=>{for(var l in r||(r={}))we.call(r,l)&&be(e,l,r[l]);if(J)for(var l of J(r))je.call(r,l)&&be(e,l,r[l]);return e},Qe=(e,r)=>qe(e,Ze(r)),Ue=(e,r)=>{var l={};for(var o in e)we.call(e,o)&&r.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&J)for(var o of J(e))r.indexOf(o)<0&&je.call(e,o)&&(l[o]=e[o]);return l};function Je(e){let r=setTimeout(e,0),l=setTimeout(e,10),o=setTimeout(e,50);return[r,l,o]}function Xe(e){let r=t.useRef();return t.useEffect(()=>{r.current=e}),r.current}var Ye=18,ye=40,et=`${ye}px`,tt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function nt({containerRef:e,inputRef:r,pushPasswordManagerStrategy:l,isFocused:o}){let[x,u]=t.useState(!1),[y,k]=t.useState(!1),[_,S]=t.useState(!1),D=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&x&&y,[x,y,l]),C=t.useCallback(()=>{let v=e.current,E=r.current;if(!v||!E||_||l==="none")return;let g=v,m=g.getBoundingClientRect().left+g.offsetWidth,B=g.getBoundingClientRect().top+g.offsetHeight/2,c=m-Ye,z=B;document.querySelectorAll(tt).length===0&&document.elementFromPoint(c,z)===v||(u(!0),S(!0))},[e,r,_,l]);return t.useEffect(()=>{let v=e.current;if(!v||l==="none")return;function E(){let m=window.innerWidth-v.getBoundingClientRect().right;k(m>=ye)}E();let g=setInterval(E,1e3);return()=>{clearInterval(g)}},[e,l]),t.useEffect(()=>{let v=o||document.activeElement===r.current;if(l==="none"||!v)return;let E=setTimeout(C,0),g=setTimeout(C,2e3),m=setTimeout(C,5e3),B=setTimeout(()=>{S(!0)},6e3);return()=>{clearTimeout(E),clearTimeout(g),clearTimeout(m),clearTimeout(B)}},[r,o,l,C]),{hasPWMBadge:x,willPushPWMBadge:D,PWM_BADGE_SPACE_WIDTH:et}}var Se=t.createContext({}),Ce=t.forwardRef((e,r)=>{var l=e,{value:o,onChange:x,maxLength:u,textAlign:y="left",pattern:k,placeholder:_,inputMode:S="numeric",onComplete:D,pushPasswordManagerStrategy:C="increase-width",pasteTransformer:v,containerClassName:E,noScriptCSSFallback:g=rt,render:m,children:B}=l,c=Ue(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),z,ae,le,ie,oe;let[Ee,Pe]=t.useState(typeof c.defaultValue=="string"?c.defaultValue:""),d=o??Ee,R=Xe(d),$=t.useCallback(n=>{x==null||x(n),Pe(n)},[x]),P=t.useMemo(()=>k?typeof k=="string"?new RegExp(k):k:null,[k]),p=t.useRef(null),X=t.useRef(null),Y=t.useRef({value:d,onChange:$,isIOS:typeof window<"u"&&((ae=(z=window==null?void 0:window.CSS)==null?void 0:z.supports)==null?void 0:ae.call(z,"-webkit-touch-callout","none"))}),K=t.useRef({prev:[(le=p.current)==null?void 0:le.selectionStart,(ie=p.current)==null?void 0:ie.selectionEnd,(oe=p.current)==null?void 0:oe.selectionDirection]});t.useImperativeHandle(r,()=>p.current,[]),t.useEffect(()=>{let n=p.current,i=X.current;if(!n||!i)return;Y.current.value!==n.value&&Y.current.onChange(n.value),K.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function f(){if(document.activeElement!==n){G(null),q(null);return}let s=n.selectionStart,h=n.selectionEnd,Q=n.selectionDirection,j=n.maxLength,O=n.value,M=K.current.prev,N=-1,I=-1,A;if(O.length!==0&&s!==null&&h!==null){let Ne=s===h,Ie=s===O.length&&O.length<j;if(Ne&&!Ie){let W=s;if(W===0)N=0,I=1,A="forward";else if(W===j)N=W-1,I=W,A="backward";else if(j>1&&O.length>1){let ne=0;if(M[0]!==null&&M[1]!==null){A=W<M[1]?"backward":"forward";let Re=M[0]===M[1]&&M[0]<j;A==="backward"&&!Re&&(ne=-1)}N=ne+W,I=ne+W+1}}N!==-1&&I!==-1&&N!==I&&p.current.setSelectionRange(N,I,A)}let fe=N!==-1?N:s,ve=I!==-1?I:h,De=A??Q;G(fe),q(ve),K.current.prev=[fe,ve,De]}if(document.addEventListener("selectionchange",f,{capture:!0}),f(),document.activeElement===n&&ee(!0),!document.getElementById("input-otp-style")){let s=document.createElement("style");if(s.id="input-otp-style",document.head.appendChild(s),s.sheet){let h="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Z(s.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Z(s.sheet,`[data-input-otp]:autofill { ${h} }`),Z(s.sheet,`[data-input-otp]:-webkit-autofill { ${h} }`),Z(s.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Z(s.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let b=()=>{i&&i.style.setProperty("--root-height",`${n.clientHeight}px`)};b();let w=new ResizeObserver(b);return w.observe(n),()=>{document.removeEventListener("selectionchange",f,{capture:!0}),w.disconnect()}},[]);let[se,ue]=t.useState(!1),[V,ee]=t.useState(!1),[T,G]=t.useState(null),[F,q]=t.useState(null);t.useEffect(()=>{Je(()=>{var n,i,f,b;(n=p.current)==null||n.dispatchEvent(new Event("input"));let w=(i=p.current)==null?void 0:i.selectionStart,s=(f=p.current)==null?void 0:f.selectionEnd,h=(b=p.current)==null?void 0:b.selectionDirection;w!==null&&s!==null&&(G(w),q(s),K.current.prev=[w,s,h])})},[d,V]),t.useEffect(()=>{R!==void 0&&d!==R&&R.length<u&&d.length===u&&(D==null||D(d))},[u,D,R,d]);let L=nt({containerRef:X,inputRef:p,pushPasswordManagerStrategy:C,isFocused:V}),ce=t.useCallback(n=>{let i=n.currentTarget.value.slice(0,u);if(i.length>0&&P&&!P.test(i)){n.preventDefault();return}typeof R=="string"&&i.length<R.length&&document.dispatchEvent(new Event("selectionchange")),$(i)},[u,$,R,P]),de=t.useCallback(()=>{var n;if(p.current){let i=Math.min(p.current.value.length,u-1),f=p.current.value.length;(n=p.current)==null||n.setSelectionRange(i,f),G(i),q(f)}ee(!0)},[u]),pe=t.useCallback(n=>{var i,f;let b=p.current;if(!v&&(!Y.current.isIOS||!n.clipboardData||!b))return;let w=n.clipboardData.getData("text/plain"),s=v?v(w):w;n.preventDefault();let h=(i=p.current)==null?void 0:i.selectionStart,Q=(f=p.current)==null?void 0:f.selectionEnd,j=(h!==Q?d.slice(0,h)+s+d.slice(Q):d.slice(0,h)+s+d.slice(h)).slice(0,u);if(j.length>0&&P&&!P.test(j))return;b.value=j,$(j);let O=Math.min(j.length,u-1),M=j.length;b.setSelectionRange(O,M),G(O),q(M)},[u,$,P,d]),ke=t.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),me=t.useMemo(()=>({position:"absolute",inset:0,width:L.willPushPWMBadge?`calc(100% + ${L.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:L.willPushPWMBadge?`inset(0 ${L.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:y,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[L.PWM_BADGE_SPACE_WIDTH,L.willPushPWMBadge,y]),Me=t.useMemo(()=>t.createElement("input",Qe(Ke({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":T,"data-input-otp-mse":F,inputMode:S,pattern:P==null?void 0:P.source,"aria-placeholder":_,style:me,maxLength:u,value:d,ref:p,onPaste:n=>{var i;pe(n),(i=c.onPaste)==null||i.call(c,n)},onChange:ce,onMouseOver:n=>{var i;ue(!0),(i=c.onMouseOver)==null||i.call(c,n)},onMouseLeave:n=>{var i;ue(!1),(i=c.onMouseLeave)==null||i.call(c,n)},onFocus:n=>{var i;de(),(i=c.onFocus)==null||i.call(c,n)},onBlur:n=>{var i;ee(!1),(i=c.onBlur)==null||i.call(c,n)}})),[ce,de,pe,S,me,u,F,T,c,P==null?void 0:P.source,d]),te=t.useMemo(()=>({slots:Array.from({length:u}).map((n,i)=>{var f;let b=V&&T!==null&&F!==null&&(T===F&&i===T||i>=T&&i<F),w=d[i]!==void 0?d[i]:null,s=d[0]!==void 0?null:(f=_==null?void 0:_[i])!=null?f:null;return{char:w,placeholderChar:s,isActive:b,hasFakeCaret:b&&w===null}}),isFocused:V,isHovering:!c.disabled&&se}),[V,se,u,F,T,c.disabled,d]),_e=t.useMemo(()=>m?m(te):t.createElement(Se.Provider,{value:te},B),[B,te,m]);return t.createElement(t.Fragment,null,g!==null&&t.createElement("noscript",null,t.createElement("style",null,g)),t.createElement("div",{ref:X,"data-input-otp-container":!0,style:ke,className:E},_e,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Me)))});Ce.displayName="Input";function Z(e,r){try{e.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var rt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,at="^[a-zA-Z0-9]+$";function lt({className:e,containerClassName:r,...l}){return a.jsx(Ce,{"data-slot":"input-otp",containerClassName:U("flex items-center gap-2 has-disabled:opacity-50",r),className:U("disabled:cursor-not-allowed",e),...l})}function it({className:e,...r}){return a.jsx("div",{"data-slot":"input-otp-group",className:U("flex items-center",e),...r})}function H({index:e,className:r,...l}){const o=t.useContext(Se),{char:x,hasFakeCaret:u,isActive:y}=(o==null?void 0:o.slots[e])??{};return a.jsxs("div",{"data-slot":"input-otp-slot","data-active":y,className:U("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",r),...l,children:[x,u&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}const ot=[{title:"Configuración General",href:"/settings/general"}];function Nt(){const{settingGlobal:e}=Te().props,{data:r,setData:l,post:o,reset:x,errors:u,processing:y,recentlySuccessful:k}=Oe({web_version:(e==null?void 0:e.web_version)||"",mobile_version:(e==null?void 0:e.mobile_version)||""}),[_,S]=t.useState(!1),[D,C]=t.useState("");t.useEffect(()=>{l({web_version:(e==null?void 0:e.web_version)||"",mobile_version:(e==null?void 0:e.mobile_version)||""})},[e]);const v=m=>{m.preventDefault(),S(!0)},E=()=>{D==="135791"?(S(!1),o(route("settings.general.storeOrUpdate"),{preserveScroll:!0,onSuccess:()=>{x(),C(""),S(!1)}})):$e.error("El PIN ingresado es incorrecto.")},g=()=>{x(),C("")};return a.jsxs(ze,{breadcrumbs:ot,children:[a.jsx(Ae,{title:"Configuración General"}),a.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[a.jsx(We,{title:"Configuración General",description:"Administra la configuración general de la aplicación, incluyendo versiones web y móvil."}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(xe,{htmlFor:"web_version",children:"Versión Web"}),a.jsx(he,{id:"web_version",value:r.web_version,onChange:m=>l("web_version",m.target.value),className:"mt-1 block w-full",placeholder:"Versión Web"}),a.jsx(ge,{message:u.web_version})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(xe,{htmlFor:"mobile_version",children:"Versión Móvil"}),a.jsx(he,{id:"mobile_version",value:r.mobile_version,onChange:m=>l("mobile_version",m.target.value),className:"mt-1 block w-full",placeholder:"Versión Móvil"}),a.jsx(ge,{message:u.mobile_version})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{type:"submit",disabled:y,children:y?"Guardando...":"Guardar Configuración"}),a.jsx(Ve,{show:k,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:a.jsx("p",{className:"text-sm text-neutral-600",children:"¡Configuración guardada correctamente!"})})]})]})]}),a.jsx(Be,{open:_,onOpenChange:S,children:a.jsxs(Fe,{children:[a.jsx(Le,{children:a.jsx(He,{children:"Ingrese el PIN de seguridad"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Para confirmar esta acción, ingrese el PIN de seguridad."}),a.jsx("div",{className:"flex justify-center",children:a.jsx(lt,{maxLength:6,pattern:at,value:D,onChange:C,children:a.jsxs(it,{children:[a.jsx(H,{index:0}),a.jsx(H,{index:1}),a.jsx(H,{index:2}),a.jsx(H,{index:3}),a.jsx(H,{index:4}),a.jsx(H,{index:5})]})})}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(re,{variant:"secondary",onClick:g,children:"Limpiar"}),a.jsx(re,{onClick:E,children:"Confirmar"})]})]})]})})]})}export{Nt as default};
