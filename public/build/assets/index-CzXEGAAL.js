import{j as e,r as c,K as G,L as O}from"./app-Bmcdr3rY.js";import{A as q}from"./app-layout-P0V2GsON.js";import{B as P}from"./badge-BhbYWyuL.js";import{T as J,a as Q,b as U,c as X}from"./tooltip-B6VKgxl7.js";import{u as Y,f as V,g as Z,a as $,b as ee,c as se}from"./index-CC_2smN8.js";import{T as ae,a as te,b as _,c as u,d as oe,e as W}from"./table-gNZ6VK7S.js";import{B as K}from"./button-DTKbtbr3.js";import{I as S}from"./input-iTO7QCEj.js";import{S as z,a as D,b as B,c as A,f as p}from"./select-BAHjfWcY.js";import"./index-C5uH-olr.js";import"./index-3hBHLDdS.js";import"./index-F1UbrP38.js";import"./utils-CISCwvQU.js";import"./index-CxZfpC1a.js";import"./createLucideIcon-BS7UES9g.js";import"./index-CKnKVnvB.js";import"./index-Dwm5KZLc.js";import"./index-CtQ0aJ3B.js";import"./chevrons-up-down-BMrNvCaf.js";import"./truck-CdogFR6i.js";import"./chevron-right-BgY-W2X8.js";import"./index-CwRZ8D_s.js";import"./check-DxJ6GiVG.js";function h({estado:o,status:l,label:w}){if(!o&&!l)return e.jsx(P,{variant:"secondary",children:"Sin data"});let x="secondary";return l&&(l.toLowerCase()==="aprobado"?x="success":l.toLowerCase()==="rechazado"&&(x="warning")),e.jsx(J,{children:e.jsxs(Q,{children:[e.jsx(U,{asChild:!0,children:e.jsx(P,{variant:x,children:l??o??"Sin data"})}),e.jsx(X,{children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",l??"Sin data"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estado:"})," ",o??"Sin data"]})]})})]})})}const ie=[{accessorKey:"placa",header:"Placa"},{accessorKey:"codigo",header:"Código de Vehículo"},{accessorKey:"nombre_company",header:"Empresa Vinculada"},{accessorKey:"pre_use_estado",header:"Ins. Diaria",cell:({row:o})=>e.jsx(h,{estado:o.original.pre_use_estado,status:o.original.pre_use_status,label:"Ins. Diaria"})},{accessorKey:"pre_use_visit_estado",header:"Ins. Diaria Visita",cell:({row:o})=>e.jsx(h,{estado:o.original.pre_use_visit_estado,status:o.original.pre_use_visit_status,label:"Ins. Diaria Visita"})},{accessorKey:"trimestral_estado",header:"Ins. Trimestral",cell:({row:o})=>e.jsx(h,{estado:o.original.trimestral_estado,status:o.original.trimestral_status,label:"Ins. Trimestral"})},{accessorKey:"semestral_estado",header:"Ins. Semestral",cell:({row:o})=>e.jsx(h,{estado:o.original.semestral_estado,status:o.original.semestral_status,label:"Ins. Semestral"})},{accessorKey:"anual_estado",header:"Ins. Anual",cell:({row:o})=>e.jsx(h,{estado:o.original.anual_estado,status:o.original.anual_status,label:"Ins. Anual"})}];function le({columns:o,data:l}){var R;const[w,x]=c.useState([]),[y,L]=c.useState({pageIndex:0,pageSize:10}),[f,ne]=c.useState(""),[j,de]=c.useState(""),[m,ce]=c.useState("__all__"),[b,E]=c.useState({}),[r,C]=c.useState({});c.useMemo(()=>{const a=new Set;return l.forEach(s=>{s.nombre_company&&a.add(s.nombre_company)}),Array.from(a)},[l]);const I=c.useMemo(()=>{let a=l;return r.placa&&(a=a.filter(s=>(s.placa??"").toLowerCase().includes(r.placa.toLowerCase()))),r.codigo&&(a=a.filter(s=>(s.codigo??"").toLowerCase().includes(r.codigo.toLowerCase()))),r.nombre_company&&(a=a.filter(s=>(s.nombre_company??"").toLowerCase().includes(r.nombre_company.toLowerCase()))),f&&(a=a.filter(s=>(s.placa??"").toLowerCase().includes(f.toLowerCase()))),j&&(a=a.filter(s=>(s.nombre_company??"").toLowerCase().includes(j.toLowerCase()))),m!=="__all__"&&(a=a.filter(s=>{var t,i,d,g,M;return((t=s.pre_use_status)==null?void 0:t.toLowerCase())===m.toLowerCase()||((i=s.pre_use_visit_status)==null?void 0:i.toLowerCase())===m.toLowerCase()||((d=s.trimestral_status)==null?void 0:d.toLowerCase())===m.toLowerCase()||((g=s.semestral_status)==null?void 0:g.toLowerCase())===m.toLowerCase()||((M=s.anual_status)==null?void 0:M.toLowerCase())===m.toLowerCase()})),Object.entries(b).forEach(([s,t])=>{t!=="__all__"&&(a=a.filter(i=>{var d,g;return(((g=(d=i[s])==null?void 0:d.toLowerCase)==null?void 0:g.call(d))??"")===t.toLowerCase()}))}),a},[l,r,f,j,m,b]),n=Y({data:I,columns:o,getCoreRowModel:se(),getPaginationRowModel:ee(),onSortingChange:x,getSortedRowModel:$(),getFilteredRowModel:Z(),state:{sorting:w,pagination:y},onPaginationChange:L,manualPagination:!1,pageCount:void 0}),k=a=>{L(s=>({...s,pageSize:Number(a),pageIndex:0}))},v=I.length,N=n.getState().pagination.pageIndex,T=n.getState().pagination.pageSize,F=v===0?0:N*T+1,H=Math.min((N+1)*T,v);return e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 py-4 w-full",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Mostrar"}),e.jsxs(z,{value:y.pageSize.toString(),onValueChange:k,children:[e.jsx(D,{className:"w-full",children:e.jsx(B,{})}),e.jsxs(A,{children:[e.jsx(p,{value:"10",children:"10"}),e.jsx(p,{value:"25",children:"25"}),e.jsx(p,{value:"50",children:"50"}),e.jsx(p,{value:"100",children:"100"})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"registros"})]})}),e.jsx("div",{className:"grid grid-cols-1 rounded-md border",children:e.jsxs(ae,{className:"text-xs",children:[e.jsxs(te,{children:[e.jsx(_,{children:n.getHeaderGroups()[0].headers.map(a=>{const s=a.column.id;if(s==="placa")return e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px",background:"#f9fafb"},children:e.jsx(S,{value:r.placa??"",onChange:t=>C(i=>({...i,placa:t.target.value})),placeholder:"Buscar placa",className:"w-28 h-7 text-xs"})},a.id);if(s==="codigo")return e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px",background:"#f9fafb"},children:e.jsx(S,{value:r.codigo??"",onChange:t=>C(i=>({...i,codigo:t.target.value})),placeholder:"Buscar código",className:"w-28 h-7 text-xs"})},a.id);if(s==="nombre_company")return e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px",background:"#f9fafb"},children:e.jsx(S,{value:r.nombre_company??"",onChange:t=>C(i=>({...i,nombre_company:t.target.value})),placeholder:"Buscar empresa",className:"w-28 h-7 text-xs"})},a.id);if(s==="pre_use_estado"||s==="pre_use_visit_estado"||s==="trimestral_estado"||s==="semestral_estado"||s==="anual_estado"){let t="";return s==="pre_use_estado"&&(t="pre_use_status"),s==="pre_use_visit_estado"&&(t="pre_use_visit_status"),s==="trimestral_estado"&&(t="trimestral_status"),s==="semestral_estado"&&(t="semestral_status"),s==="anual_estado"&&(t="anual_status"),e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px",background:"#f9fafb"},children:e.jsxs(z,{value:b[t]??"__all__",onValueChange:i=>E(d=>({...d,[t]:i})),children:[e.jsx(D,{className:"w-24 h-7 text-xs",children:e.jsx(B,{placeholder:"Todos"})}),e.jsxs(A,{children:[e.jsx(p,{value:"__all__",children:"Todos"}),e.jsx(p,{value:"aprobado",children:"Aprobado"}),e.jsx(p,{value:"rechazado",children:"Rechazado"})]})]})},a.id)}return e.jsx(u,{},a.id)})}),n.getHeaderGroups().map(a=>e.jsx(_,{children:a.headers.map(s=>{const t=s.column.id;if(t==="pre_use_estado"||t==="pre_use_visit_estado"||t==="trimestral_estado"||t==="semestral_estado"||t==="anual_estado"){let i="";return t==="pre_use_estado"&&(i="Ins. Diaria"),t==="pre_use_visit_estado"&&(i="Ins. Diaria Visita"),t==="trimestral_estado"&&(i="Ins. Trimestral"),t==="semestral_estado"&&(i="Ins. Semestral"),t==="anual_estado"&&(i="Ins. Anual"),e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px"},children:i},s.id)}return e.jsx(u,{style:{minWidth:"10px",maxWidth:"150px"},children:s.isPlaceholder?null:V(s.column.columnDef.header,s.getContext())},s.id)})},a.id))]}),e.jsx(oe,{children:(R=n.getRowModel().rows)!=null&&R.length?n.getRowModel().rows.map(a=>e.jsx(_,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(s=>e.jsx(W,{style:{minWidth:"10px",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:V(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(_,{children:e.jsx(W,{colSpan:o.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between py-4 gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Mostrando ",F," a ",H," de ",v," registros"]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:()=>n.previousPage(),disabled:!n.getCanPreviousPage(),children:"Previous"}),e.jsx(K,{variant:"outline",size:"sm",onClick:()=>n.nextPage(),disabled:!n.getCanNextPage(),children:"Next"})]})]})]})}const re=[{title:"Gestión de Vehículos",href:"/vehiculos"}];function We(){const{vehicles:o}=G().props;return console.log("Vehicles:",o),e.jsxs(q,{breadcrumbs:re,children:[e.jsx(O,{title:"Vehículos"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsx("div",{className:"flex-1",children:e.jsx(le,{columns:ie,data:o??[]})})})]})}export{We as default};
