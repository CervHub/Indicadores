import{m as C,r as d,j as e}from"./app-D6oo4aiI.js";import{I as o}from"./input-error-DIVqv6jZ.js";import{B as F}from"./button-B_5QTdvO.js";import{D as I,b as L,c as S,d as y,e as p}from"./dialog-BQBvrB5h.js";import{I as r}from"./input-D70_QrOi.js";import{L as m}from"./label-dzqnh3AS.js";import{t as x}from"./index-BpdHWgbY.js";import{L as w}from"./loader-circle-DGqUbdRF.js";import"./utils-CISCwvQU.js";import"./index-CuTWOldI.js";import"./createLucideIcon-CIm9F9Xe.js";import"./index-b278Kwfv.js";import"./index-SSGtsAuw.js";function M({isOpen:f=!1,onOpenChange:c,person:a}){const{data:l,setData:s,put:n,processing:j,errors:t,reset:v}=C({id:(a==null?void 0:a.id)||0,doi:(a==null?void 0:a.doi)||"",email:(a==null?void 0:a.email)||"",nombres:(a==null?void 0:a.nombres)||"",apellidos:(a==null?void 0:a.apellidos)||"",telefono:(a==null?void 0:a.telefono)||"",cargo:(a==null?void 0:a.cargo)||""}),[b,g]=d.useState(f),[D,N]=d.useState(!1);d.useEffect(()=>{g(f)},[f]),d.useEffect(()=>{a&&s({id:a.id,doi:a.doi,email:a.email,nombres:a.nombres,apellidos:a.apellidos,telefono:a.telefono,cargo:a.cargo})},[a,s]),d.useEffect(()=>{N(l.doi.trim()!==""&&l.nombres.trim()!==""&&l.apellidos.trim()!=="")},[l.doi,l.nombres,l.apellidos]);const E=i=>{i.preventDefault(),n(route("contrata.personal.update",a==null?void 0:a.id),{onSuccess:h=>{const u=h.props.flash;u.success&&(x.success(u.success),v(),g(!1),c&&c(!1)),u.error&&x.error(u.error)},onError:h=>{g(!0),x.error("Ocurrió un error al intentar actualizar la persona.")}})};return e.jsx("div",{children:e.jsx(I,{open:b,onOpenChange:i=>{g(i),c&&c(i)},children:e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(S,{children:[e.jsx(y,{children:"Editar Persona"}),e.jsx(p,{children:"Complete los campos para editar la persona."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("contrata.personal.update",a==null?void 0:a.doi),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"doi",children:"DOI"}),e.jsx(r,{id:"doi",value:l.doi,onChange:i=>s("doi",i.target.value)}),e.jsx(o,{message:t.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:l.email,onChange:i=>s("email",i.target.value)}),e.jsx(o,{message:t.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nombres",children:"Nombres"}),e.jsx(r,{id:"nombres",value:l.nombres,onChange:i=>s("nombres",i.target.value)}),e.jsx(o,{message:t.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"apellidos",children:"Apellidos"}),e.jsx(r,{id:"apellidos",value:l.apellidos,onChange:i=>s("apellidos",i.target.value)}),e.jsx(o,{message:t.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(r,{id:"telefono",value:l.telefono,onChange:i=>s("telefono",i.target.value)}),e.jsx(o,{message:t.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"cargo",children:"Cargo"}),e.jsx(r,{id:"cargo",value:l.cargo,onChange:i=>s("cargo",i.target.value)}),e.jsx(o,{message:t.cargo})]}),e.jsxs(F,{type:"submit",className:"mt-2",disabled:j||!D,children:[j&&e.jsx(w,{className:"h-4 w-4 animate-spin"}),"Actualizar"]})]})]})})})}export{M as default};
