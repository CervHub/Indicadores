import{K as I,m as w,r as E,j as e}from"./app-BC0I_x-8.js";import{I as o}from"./input-error-DjrE15Nc.js";import{B as g}from"./button-CPNoa6pn.js";import{D as T,a as V,b as B,c as L,d as O,e as U}from"./dialog-xExO4vfu.js";import{I as k}from"./input-BqvsmbS9.js";import{L as l}from"./label-DKlWSbcV.js";import{S as c,a as d,b as m,c as p,d as h,e as u,f as x}from"./select-Dcat2zSo.js";import{m as q}from"./utils-Dxu7ruf7.js";import{t as f}from"./index-9eh68DQj.js";import{F as G}from"./file-chart-pie-CP-OD1au.js";import{L as M}from"./loader-circle-COg0BfpX.js";import"./index-DYqKuolF.js";import"./index-Ct77MprN.js";import"./index-fxEFBNQF.js";import"./index-Naj27QKr.js";import"./index-Cl1z67RT.js";import"./index-BRzG3Zxg.js";import"./index-426bq6qz.js";import"./check-Do619M-a.js";function ne({rules:H}){const{contractorCompanyTypes:y,ueas:S}=I().props,{data:r,setData:a,post:C,processing:_,errors:i,reset:D}=w({contractor_company_type_id:"",uea_id:"",year:"",month:"",file:null}),[N,j]=E.useState(!1),b=s=>{s.preventDefault(),C(route("annexes.store"),{onSuccess:t=>{var v;const n=(v=t.props)==null?void 0:v.flash;n.success?(f.success(n.success,{duration:2e4,closeButton:!0}),D(),j(!1)):n.error&&f.error(n.error,{duration:2e4,closeButton:!0})},onError:t=>{j(!0),f.error("Ocurri칩 un error al subir el archivo, intente de nuevo.",{duration:2e4,closeButton:!0})}})},A=()=>r.contractor_company_type_id&&r.uea_id&&r.year&&r.month&&r.file,F=Array.from({length:10},(s,t)=>new Date().getFullYear()-t);return e.jsx("div",{children:e.jsxs(T,{open:N,onOpenChange:j,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{asChild:!0,children:e.jsx(g,{className:"inline-block px-4 py-2",children:"Agregar Indicador"})}),e.jsxs(g,{variant:"success",className:"ml-2",onClick:()=>window.location.href="/formats/format.xlsx",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Formato"]})]}),e.jsxs(B,{className:"sm:max-w-[425px]",onInteractOutside:s=>s.preventDefault(),children:[e.jsxs(L,{children:[e.jsx(O,{children:"Agregar Indicador"}),e.jsx(U,{children:"Complete los campos para agregar un nuevo indicador."})]}),e.jsxs("form",{onSubmit:b,className:"space-y-3",method:"post",action:route("contractor.store"),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"contractor_company_type_id",children:"Tipo de Cliente"}),e.jsxs(c,{required:!0,onValueChange:s=>a("contractor_company_type_id",s),value:r.contractor_company_type_id,children:[e.jsx(d,{children:e.jsx(m,{placeholder:"Seleccione un tipo de cliente"})}),e.jsx(p,{children:e.jsxs(h,{children:[e.jsx(u,{children:"Tipos de Cliente"}),y.map(s=>e.jsx(x,{value:String(s.id),children:s.name},s.id))]})})]}),e.jsx(o,{message:i.contractor_company_type_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"uea_id",children:"UEA"}),e.jsxs(c,{onValueChange:s=>a("uea_id",s),value:r.uea_id,children:[e.jsx(d,{children:e.jsx(m,{placeholder:"Seleccione una UEA"})}),e.jsx(p,{children:e.jsxs(h,{children:[e.jsx(u,{children:"UEAs"}),S.map(s=>e.jsx(x,{value:String(s.id),children:s.name},s.id))]})})]}),e.jsx(o,{message:i.uea_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"year",children:"A침o"}),e.jsxs(c,{onValueChange:s=>a("year",s),value:r.year,children:[e.jsx(d,{children:e.jsx(m,{placeholder:"Seleccione un a침o"})}),e.jsx(p,{children:e.jsxs(h,{children:[e.jsx(u,{children:"A침os"}),F.map(s=>e.jsx(x,{value:String(s),children:s},s))]})})]}),e.jsx(o,{message:i.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"month",children:"Mes"}),e.jsxs(c,{onValueChange:s=>a("month",s),value:r.month,children:[e.jsx(d,{children:e.jsx(m,{placeholder:"Seleccione un mes"})}),e.jsx(p,{children:e.jsxs(h,{children:[e.jsx(u,{children:"Meses"}),q.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))]})})]}),e.jsx(o,{message:i.month})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"file",children:"Archivo"}),e.jsx(k,{type:"file",id:"file",required:!0,accept:".xlsx,.xls",onChange:s=>a("file",s.target.files?s.target.files[0]:null)}),e.jsx(o,{message:i.file})]}),e.jsxs(g,{type:"submit",className:"mt-2",disabled:!A()||_,children:[_&&e.jsx(M,{className:"h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})})}export{ne as default};
