import{r as g,j as e,$ as T,K as N,L as _}from"./app-CTL5S9iY.js";import{u as A,T as M,a as R,b as x,c as S,f as h,d as w,e as p,g as P,h as D,i as K,j as k}from"./table-MR7B6I2i.js";import{B as m}from"./button-CXUJ0U03.js";import{I as F}from"./input-BhJySYgm.js";import{B as u}from"./badge-Dp4iCUbn.js";import{T as j,a as f,b,c as C,A as B}from"./app-layout-CAzHklqt.js";import{m as I,f as U}from"./utils-2YzkRP5P.js";import{A as y}from"./arrow-up-down-yRiJFH8T.js";import $ from"./create-DItAPvEF.js";import"./index-BCT-lbNC.js";import"./index-D0mu6X-q.js";import"./index-BnBYLySk.js";import"./app-logo-icon-CzSnhrzU.js";import"./input-error-eBVurzc1.js";import"./dialog-Bow5bgQW.js";import"./label-DL_p19np.js";import"./select-DqDnb1_4.js";import"./index-D1sDU56J.js";import"./loader-circle-C52BI5FE.js";function z({columns:r,data:d}){var l;const[n,t]=g.useState([]),[s,i]=g.useState(""),a=A({data:d,columns:r,getCoreRowModel:k(),getPaginationRowModel:K(),onSortingChange:t,getSortedRowModel:D(),onGlobalFilterChange:i,getFilteredRowModel:P(),state:{sorting:n,globalFilter:s}});return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center py-4",children:e.jsx(F,{placeholder:"Filter by any column...",value:s,onChange:o=>i(o.target.value),className:"max-w-sm"})}),e.jsx("div",{className:"grid grid-cols-1 rounded-md border",children:e.jsxs(M,{className:"text-xs",children:[e.jsx(R,{children:a.getHeaderGroups().map(o=>e.jsx(x,{children:o.headers.map(c=>e.jsx(S,{children:c.isPlaceholder?null:h(c.column.columnDef.header,c.getContext())},c.id))},o.id))}),e.jsx(w,{children:(l=a.getRowModel().rows)!=null&&l.length?a.getRowModel().rows.map(o=>e.jsx(x,{"data-state":o.getIsSelected()&&"selected",children:o.getVisibleCells().map(c=>e.jsx(p,{children:h(c.column.columnDef.cell,c.getContext())},c.id))},o.id)):e.jsx(x,{children:e.jsx(p,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})}const v=r=>r===0?"destructive":r===100?"default":"secondary",E=(r,d)=>[{accessorKey:"contractor_company_type_id",header:"T. Cliente",cell:({row:n})=>{const t=r.find(s=>s.id===Number(n.original.contractor_company_type_id));return t?t.name:"Unknown"}},{accessorKey:"uea_id",header:"UEA",cell:({row:n})=>{const t=d.find(s=>s.id===Number(n.original.uea_id));return t?t.name:"Unknown"}},{accessorKey:"month",header:({column:n})=>e.jsxs(m,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Mes",e.jsx(y,{className:"ml-2 h-4 w-4"})]}),cell:({row:n})=>{const t=I.find(s=>Number(s.value)===Number(n.original.month));return t?t.label:"Unknown"}},{accessorKey:"year",header:({column:n})=>e.jsxs(m,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Year",e.jsx(y,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"annexes",header:"Anexos",cell:({row:n})=>{const t=[n.original.annex24,n.original.annex25,n.original.annex26,n.original.annex27,n.original.annex28,n.original.annex30],i=t.filter(l=>l==="true"||l==="1").length/t.length*100,a=v(i);return e.jsx(j,{children:e.jsxs(f,{children:[e.jsx(b,{children:e.jsx(u,{variant:a,children:`${i}%`})}),e.jsxs(C,{children:[e.jsxs("p",{children:["Annex 24: ",n.original.annex24]}),e.jsxs("p",{children:["Annex 25: ",n.original.annex25]}),e.jsxs("p",{children:["Annex 26: ",n.original.annex26]}),e.jsxs("p",{children:["Annex 27: ",n.original.annex27]}),e.jsxs("p",{children:["Annex 28: ",n.original.annex28]}),e.jsxs("p",{children:["Annex 30: ",n.original.annex30]})]})]})})}},{accessorKey:"minem_templates",header:"Minems",cell:({row:n})=>{const t=[n.original.minem_template_1,n.original.minem_template_2],i=t.filter(l=>l==="true"||l==="1").length/t.length*100,a=v(i);return e.jsx(j,{children:e.jsxs(f,{children:[e.jsx(b,{children:e.jsx(u,{variant:a,children:`${i}%`})}),e.jsxs(C,{children:[e.jsxs("p",{children:["Minem Template 1: ",n.original.minem_template_1]}),e.jsxs("p",{children:["Minem Template 2: ",n.original.minem_template_2]})]})]})})}},{accessorKey:"F. CreaciÃ³n",header:"Created At",cell:({row:n})=>{const t=new Date(n.original.created_at);return U(t)}},{id:"actions",header:"Acciones",cell:({row:n})=>{const t=n.original;return e.jsx(T,{href:route("annexes.show",{annex:t.id}),children:e.jsx(m,{variant:"default",size:"sm",className:"mt-2",children:"Detalle"})})}}],H=[{title:"Anexos",href:"/annexe"}];function oe(){const{fileStatuses:r,contractorCompanyTypes:d,ueas:n}=N().props;return e.jsxs(B,{breadcrumbs:H,children:[e.jsx(_,{title:"Contratistas"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx($,{}),e.jsx("div",{className:"w-full max-w-full overflow-x-auto",children:e.jsx(z,{columns:E(d,n),data:r})})]})]})}export{oe as default};
