import{K as $,j as e,L as H,r as g}from"./app-BrE_DW6v.js";import{C as j,a as b,b as y,c as u,d as N,e as v}from"./card-jpKqeY12.js";import{C as w,X as C,H as _,a as D,t as L}from"./chart-DkTmf5Kx.js";import{T as k,a as U,b as B,c as R}from"./tooltip-vZOg3HwM.js";import{L as T,C as z,a as K}from"./LineChart-CBaJjEIx.js";import{c as G}from"./createLucideIcon-CgrwBIBF.js";import"./utils-CISCwvQU.js";import"./index-YXktFlYT.js";import"./index-Chjiymov.js";import"./index-17Co9tRC.js";import"./index-CM047A5K.js";import"./index-DM7GVMTz.js";import"./index-BYBiqWIa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],M=G("TrendingUp",W);function X(){const t=new Date,s=new Date(t);s.setMonth(t.getMonth()-1),s.getMonth()===t.getMonth()&&s.setDate(0);const r=[];let l=new Date(s),i=0;for(;l<=t;){const n=Math.floor(Math.random()*40)+10;i+=n,r.push({day:l.toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit"}),daily:n,accumulated:i}),l.setDate(l.getDate()+1)}return r}const S=X(),O={daily:{label:"Km por día",color:"hsl(var(--chart-1, 0, 100%, 40%))"}},Y={accumulated:{label:"Km acumulado",color:"hsl(var(--chart-2, 0, 100%, 40%))"}};function q(){const[t,s]=g.useState(new Date);return g.useEffect(()=>{const r=setInterval(()=>s(new Date),1e3);return()=>clearInterval(r)},[]),e.jsxs("span",{className:"font-mono text-sm font-bold",style:{color:"#000"},children:[t.toLocaleDateString()," ",t.toLocaleTimeString()]})}function de(){const{vehicle:t,vehicleInspection:s,lastCompanyLink:r,company:l,allInspectionsHistory:i}=$().props;let n=t.code,x="",c="";l&&l.code&&r&&r.code&&(x=l.code,n=`${l.code}${r.code}`,c=l.nombre||"");const m=(t.license_plate||"").replace(/-/g,"");[(s==null?void 0:s["pre-use"])&&{tipo:s["pre-use"].tipo_inspeccion,realizado_por:s["pre-use"].realizado_por,fecha:s["pre-use"].created_at,vencimiento:s["pre-use"].vencimiento,estado:s["pre-use"].estado,observaciones:s["pre-use"].observaciones},(s==null?void 0:s.trimestral)&&{tipo:s.trimestral.tipo_inspeccion,realizado_por:s.trimestral.realizado_por,fecha:s.trimestral.created_at,vencimiento:s.trimestral.vencimiento,estado:s.trimestral.estado,observaciones:s.trimestral.observaciones},(s==null?void 0:s.semestral)&&{tipo:s.semestral.tipo_inspeccion,realizado_por:s.semestral.realizado_por,fecha:s.semestral.created_at,vencimiento:s.semestral.vencimiento,estado:s.semestral.estado,observaciones:s.semestral.observaciones},(s==null?void 0:s.anual)&&{tipo:s.anual.tipo_inspeccion,realizado_por:s.anual.realizado_por,fecha:s.anual.created_at,vencimiento:s.anual.vencimiento,estado:s.anual.estado,observaciones:s.anual.observaciones}].filter(Boolean);const F=["pre-use","trimestral","semestral","anual"],A={"pre-use":"Diaria Pre-Uso",trimestral:"Trimestral",semestral:"Semestral",anual:"Anual","pre-use-visit":"Visita Diaria Pre-Uso"},p=F.map(a=>{const o=(s==null?void 0:s[a])||{};return{tipo:o.tipo_inspeccion||A[a],realizado_por:o.realizado_por||"",fecha:o.created_at||"",vencimiento:o.vencimiento||"",estado:o.estado||"",observaciones:o.observaciones||""}}),f=p.some(a=>!a.estado||a.estado.toLowerCase()!=="aprobado"),E=f?"No Autorizado":"Autorizado",P=f?"bg-red-600 text-white":"bg-green-600 text-white",h=Array.isArray(i)?i:(i==null?void 0:i.data)||[];return console.log("Vehicle Detail:",h),e.jsxs(e.Fragment,{children:[e.jsx(H,{title:`Hoja de Vida: ${m}`}),e.jsx("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center py-8 px-2",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-xl shadow-2xl flex flex-col overflow-hidden print:shadow-none print:rounded-none print:bg-white",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between border-b px-8 py-4 bg-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 w-full",children:[e.jsx("div",{className:`px-5 py-2 rounded-full font-bold text-base ${P}`,children:E}),e.jsx("div",{className:"ml-auto text-gray-600 text-sm",children:e.jsx(q,{})})]})}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[c&&e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50 md:col-span-2",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Empresa"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:[c," ",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",x,")"]})]})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Placa"}),e.jsx("span",{className:"text-2xl font-extrabold tracking-widest text-gray-800",children:m})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Código de Llamada"}),e.jsx("span",{className:"text-2xl font-extrabold tracking-widest text-gray-800",children:n})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Marca"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.brand})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Modelo"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.model})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Año de Fabricación"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.year})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Clase Vehicular"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.type})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Color"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.color})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Capacidad de Pasajeros"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.seating_capacity})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Kilometraje"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.mileage})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Número de Serie (VIN)"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.chassis_number})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Número de Motor"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.engine_number})]})]})}),e.jsxs("div",{className:"px-8 pb-10",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 mt-2",style:{color:"#d7282f"},children:"Historial de Inspecciones"}),e.jsx(k,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#d7282f"},children:[e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Tipo"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Realizado por"}),e.jsx("th",{className:"px-2 py-1 text-left font-bold",style:{color:"#fff"},children:"Fecha"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Vencimiento"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Estado"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Observaciones"})]})}),e.jsx("tbody",{children:p.map((a,o)=>{const d=a.observaciones||"",V=d.length>25;return e.jsxs("tr",{className:"hover:bg-red-50 border-t border-gray-200 text-xs",children:[e.jsx("td",{className:"px-2 py-1",children:a.tipo}),e.jsx("td",{className:"px-2 py-1",children:a.realizado_por}),e.jsx("td",{className:"px-2 py-1",children:a.fecha}),e.jsx("td",{className:"px-2 py-1",children:a.vencimiento}),e.jsx("td",{className:"px-2 py-1",children:a.estado}),e.jsx("td",{className:"px-2 py-1 max-w-[120px] truncate",children:V?e.jsxs(U,{children:[e.jsx(B,{asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:d.slice(0,25)+"..."})}),e.jsx(R,{children:e.jsx("span",{className:"whitespace-pre-line",children:d})})]}):d})]},o)})})]})})})]}),e.jsxs("div",{className:"px-8 pb-10",children:[e.jsx("h3",{className:"text-base font-bold mb-4 mt-2",style:{color:"#d7282f"},children:"Historial Completo de Inspecciones"}),e.jsx(k,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#d7282f"},children:[e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Tipo"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Realizado por"}),e.jsx("th",{className:"px-2 py-1 text-left font-bold",style:{color:"#fff"},children:"Fecha"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Estado"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Empresa"})]})}),e.jsx("tbody",{children:h.map((a,o)=>e.jsxs("tr",{className:"hover:bg-red-50 border-t border-gray-200 text-xs",children:[e.jsx("td",{className:"px-2 py-1",children:a.tipo_inspeccion}),e.jsx("td",{className:"px-2 py-1",children:a.realizado_por}),e.jsx("td",{className:"px-2 py-1",children:a.created_at}),e.jsx("td",{className:"px-2 py-1",children:a.estado}),e.jsx("td",{className:"px-2 py-1",children:a.empresa})]},o))})]})})})]}),e.jsx("div",{className:"px-8 pb-8",children:e.jsxs(j,{className:"gap-0 shadow-none border-red-400",children:[e.jsxs(b,{children:[e.jsx(y,{children:"Kilometraje diario último mes"}),e.jsx(u,{children:"Consumo diario"})]}),e.jsx(N,{children:e.jsx(w,{config:O,className:"aspect-auto h-[250px] w-full",children:e.jsxs(T,{data:S,margin:{top:20,left:12,right:12,bottom:20},children:[e.jsx(z,{vertical:!1}),e.jsx(C,{dataKey:"day",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:a=>`${a}`,label:{value:"Día",position:"insideBottom",offset:-5}}),e.jsx(_,{cursor:!1,content:e.jsx(D,{indicator:"line"})}),e.jsx(K,{dataKey:"daily",type:"monotone",stroke:"#d7282f",strokeWidth:2,dot:{fill:"#d7282f"},activeDot:{r:6},children:e.jsx(L,{position:"top",offset:12,className:"fill-foreground",fontSize:12})})]})})}),e.jsxs(v,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 font-medium leading-none",style:{color:"#d7282f"},children:["Tendencia diaria ",e.jsx(M,{className:"h-4 w-4",style:{color:"#d7282f"}})]}),e.jsx("div",{className:"leading-none text-muted-foreground",children:"Kilometraje consumido por día en el último mes"})]})]})}),e.jsx("div",{className:"px-8 pb-8",children:e.jsxs(j,{className:"gap-0 shadow-none border-red-400",children:[e.jsxs(b,{children:[e.jsx(y,{children:"Kilometraje acumulado último mes"}),e.jsx(u,{children:"Histórico acumulado"})]}),e.jsx(N,{children:e.jsx(w,{config:Y,className:"aspect-auto h-[250px] w-full",children:e.jsxs(T,{data:S,margin:{top:20,left:12,right:12,bottom:20},children:[e.jsx(z,{vertical:!1}),e.jsx(C,{dataKey:"day",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:a=>`${a}`,label:{value:"Día",position:"insideBottom",offset:-5}}),e.jsx(_,{cursor:!1,content:e.jsx(D,{indicator:"line"})}),e.jsx(K,{dataKey:"accumulated",type:"monotone",stroke:"#1e293b",strokeWidth:2,dot:{fill:"#1e293b"},activeDot:{r:6},children:e.jsx(L,{position:"top",offset:12,className:"fill-foreground",fontSize:12})})]})})}),e.jsxs(v,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 font-medium leading-none",style:{color:"#1e293b"},children:["Tendencia acumulada ",e.jsx(M,{className:"h-4 w-4",style:{color:"#1e293b"}})]}),e.jsx("div",{className:"leading-none text-muted-foreground",children:"Kilometraje acumulado del último mes"})]})]})}),e.jsxs("div",{className:"border-t px-8 py-4 text-xs text-gray-400 text-center print:hidden",children:["Documento generado por el sistema de Gestión SST © ",new Date().getFullYear()]})]})})]})}export{de as default};
