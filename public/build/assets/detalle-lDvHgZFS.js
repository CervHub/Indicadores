import{j as e,K as k,r as a,L as E}from"./app-BrE_DW6v.js";import{C as S}from"./check-DrBqCDzO.js";import{B as L}from"./button-DRinBeoB.js";import{C as u,a as f,b as j,d as n}from"./card-jpKqeY12.js";import{I as s}from"./input-CrQhGnBg.js";import{L as i}from"./label-BE0lwKFF.js";import{A as D}from"./app-layout-CvakE5Jz.js";import{f as y}from"./utils-CISCwvQU.js";import z from"./closed-Dc1C7cXv.js";import"./createLucideIcon-CgrwBIBF.js";import"./index-CM047A5K.js";import"./index-Dkfpp0nt.js";import"./index-BepoNP-L.js";import"./index-17Co9tRC.js";import"./tooltip-vZOg3HwM.js";import"./index-DM7GVMTz.js";import"./index-BYBiqWIa.js";import"./index-CTWSnWBA.js";import"./chevrons-up-down-BoiJnS6n.js";import"./truck-DbFGIp0f.js";import"./chevron-right-FQCcLLfH.js";import"./index-CV5l-hIi.js";import"./index-YXktFlYT.js";import"./index-Chjiymov.js";import"./dialog-CUyr9pRU.js";import"./loader-circle-n4Ue4q5C.js";const I=["Generado","Revisado","Finalizado"],P=({currentStep:l})=>e.jsx("ul",{className:"relative flex flex-row gap-x-2",children:I.map((t,r)=>e.jsxs("li",{className:"flex items-center gap-x-2 shrink basis-0 flex-1 group",children:[e.jsxs("div",{className:"min-w-7 min-h-7 inline-flex justify-center items-center text-xs align-middle",children:[e.jsx("span",{className:`size-7 flex justify-center items-center shrink-0 ${r<=l?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"} font-medium rounded-full dark:bg-neutral-700 dark:text-white`,children:r<=l?e.jsx(S,{className:"w-4 h-4"}):r+1}),e.jsx("span",{className:"ms-2 block text-sm font-medium text-gray-800 dark:text-white",children:t})]}),e.jsx("div",{className:"w-full h-px flex-1 bg-gray-200 group-last:hidden dark:bg-neutral-700"})]},r))}),K=[{title:"Reportabilidad",href:"/admin/reportability"},{title:"Detalle",href:"/admin/reportability/detalle"}];function ne(){const{reportability_id:l,reportability:t,isSecurityEngineer:r,canCloseReport:b}=k().props,[c,p]=a.useState(!0),[o,m]=a.useState(null),[g,x]=a.useState(!1),[v,N]=a.useState(0),[_,C]=a.useState(h(t.estado)),F=route("company.reportability.download",{reportability_id:l}),R=()=>{p(!1),m(null)},w=()=>{p(!1),m("No se pudo cargar el PDF")};a.useEffect(()=>{N(d=>d+1),C(h(t.estado))},[t.estado]);function h(d){switch(d){case"Generado":return 0;case"Revisado":return 1;case"Finalizado":return 2;default:return 0}}return e.jsxs(D,{breadcrumbs:K,children:[e.jsx(E,{title:"Reportabilidad"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"grid h-full grid-cols-12 gap-4",children:[e.jsxs(u,{className:"col-span-12 h-full md:col-span-8",children:[e.jsx(f,{children:e.jsx(j,{children:"Reporte"})}),e.jsxs(n,{children:[c&&e.jsx("p",{children:"Cargando PDF..."}),o&&e.jsx("p",{children:o}),e.jsx("iframe",{src:F,width:"100%",height:"759",onLoad:R,onError:w,style:{display:c||o?"none":"block"}},v)]})]}),e.jsxs(u,{className:"col-span-12 flex h-full flex-col justify-between md:col-span-4",children:[e.jsxs("div",{children:[e.jsx(f,{children:e.jsx(j,{children:"Detalles del reporte"})}),e.jsx("br",{}),e.jsxs(n,{className:"flex flex-col gap-2 space-y-2",children:[e.jsx(P,{currentStep:_}),e.jsxs("div",{className:"space-y-2 d-none",children:[e.jsx(i,{htmlFor:"estado",children:"Estado"}),e.jsx(s,{id:"estado",type:"text",value:t.estado,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tipo_reporte",children:"Tipo de Reporte"}),e.jsx(s,{id:"tipo_reporte",type:"text",value:t.tipo_reporte,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"company_name",children:"Compañía"}),e.jsx(s,{id:"company_name",type:"text",value:t.company_name,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"company_report_name",children:"Compañía Reportada"}),e.jsx(s,{id:"company_report_name",type:"text",value:t.company_report_name,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"fecha_reporte",children:"Fecha de Reporte"}),e.jsx(s,{id:"fecha_reporte",type:"text",value:y(t.fecha_reporte),disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"fecha_evento",children:"Fecha de Evento"}),e.jsx(s,{id:"fecha_evento",type:"text",value:y(t.fecha_evento),disabled:!0})]})]})]}),e.jsx(n,{children:e.jsx(L,{variant:"destructive",className:"mt-4 w-auto",onClick:()=>x(!0),disabled:!b||t.estado==="Finalizado"||!r,children:"Finalizar Reporte"})})]})]})}),e.jsx(z,{report_id:l,isDialogOpen:g,setIsDialogOpen:x})]})}export{ne as default};
