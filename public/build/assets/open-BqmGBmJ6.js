import{K as D,m as g,r as o,j as s}from"./app-BM5UaoLz.js";import{B as E}from"./button-B4jGflLp.js";import{D as y,b as N,c as v,d as S,e as B}from"./dialog-CwBL4gBr.js";import{b as F,m as V}from"./utils-Dxu7ruf7.js";import{t as c}from"./index-CIInWgbm.js";import{L as w}from"./loader-circle-Bak669U4.js";import"./index-DNhIbKYH.js";import"./index-I9jujFTw.js";function z({isOpen:d=!1,onOpenChange:e,selectedItem:r}){const{flash:A}=D().props,{data:i,setData:n,patch:u,processing:m,reset:p}=g({id:r.id}),[x,a]=o.useState(d),[h,j]=o.useState(!1);o.useEffect(()=>{j(i.id!=="0")},[i]),o.useEffect(()=>{a(d)},[d]),o.useEffect(()=>{n("id",r.id)},[r,n]);const b=t=>{t.preventDefault(),u(route("consolidated.open",{id:i.id}),{onSuccess:f=>{const l=f.props.flash;l.success&&(a(!1),p(),c.success(l.success),e&&e(!1)),l.error&&(a(!1),c.error(l.error))},onError:f=>{a(!0),c.error("Ocurrió un error al abrir el consolidado")}})};return s.jsx("div",{children:s.jsx(y,{open:x,onOpenChange:t=>{a(t),e&&e(t)},children:s.jsxs(N,{className:"sm:max-w-[425px]",children:[s.jsxs(v,{children:[s.jsx(S,{children:"Abrir Consolidado"}),s.jsxs(B,{children:["¿Está seguro de que desea abrir el consolidado para el mes de"," ",F(V,"value",r.month,"label")," del año ",r.year,"?"]})]}),s.jsx("form",{onSubmit:b,className:"space-y-3",method:"post",action:route("consolidated.open",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(E,{type:"submit",className:"mt-2",disabled:m||!h,children:[m&&s.jsx(w,{className:"h-4 w-4 animate-spin"}),"Abrir"]})})})]})})})}export{z as default};
