import{m as y,r as d,j as e}from"./app-DnQCaV3x.js";import{I as E}from"./input-error-N3vl0cxn.js";import{B as f}from"./button-1gPQlIc3.js";import{D as I,a as S,b as k,c as w,d as C,e as L}from"./dialog-jCcLGnov.js";import{I as A}from"./input-BeCVyVtN.js";import{L as F}from"./label-x-o6BylK.js";import{t as o}from"./index-BV-Mithc.js";import{c as M}from"./createLucideIcon-X9D3Eoyg.js";import{L as R}from"./loader-circle-CUz5UHxA.js";import"./utils-CISCwvQU.js";import"./index-BSPhMZ0d.js";import"./index-CIpeiAt6.js";import"./index-BNrexipy.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],z=M("Upload",U);function Y({isOpen:l=!1,onOpenChange:i}){const{data:m,setData:h,post:j,processing:c,errors:v,reset:u,clearErrors:p}=y({file:null}),[g,t]=d.useState(l),[x,n]=d.useState("");d.useEffect(()=>{t(l)},[l]);const b=r=>{t(r),i&&i(r),r||(u(),p(),n(""))},N=r=>{var s;const a=((s=r.target.files)==null?void 0:s[0])||null;h("file",a),n(a?a.name:"")},D=r=>{if(r.preventDefault(),!m.file){o.error("Por favor seleccione un archivo.");return}j(route("contrata.personal.update.massive"),{forceFormData:!0,onSuccess:a=>{const s=a.props.flash;s!=null&&s.success&&(o.success(s.success),u(),p(),n(""),t(!1),i&&i(!1)),s!=null&&s.error&&o.error(s.error)},onError:a=>{t(!0),o.error("Ocurrió un error al procesar el archivo.")}})};return e.jsx("div",{children:e.jsxs(I,{open:g,onOpenChange:b,children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"inline-flex items-center gap-2 px-4 py-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Registro Masivo"]})})}),e.jsxs(k,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Registro Masivo"}),e.jsx(L,{children:"Suba un archivo Excel para realizar una actualización masiva de personal."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",method:"post",action:route("contrata.personal.update.massive"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(F,{htmlFor:"file",children:"Archivo Excel"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(A,{id:"file",type:"file",accept:".xlsx,.xls,.csv",onChange:N,className:"cursor-pointer"})}),x&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Archivo seleccionado: ",x]}),e.jsx(E,{message:v.file})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Instrucciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"El archivo debe estar en formato Excel (.xlsx, .xls) o CSV"}),e.jsx("li",{children:"Asegúrese de que las columnas estén correctamente estructuradas"}),e.jsx("li",{children:"Revise los datos antes de procesar el archivo"})]})]}),e.jsxs(f,{type:"submit",className:"w-full",disabled:c||!m.file,children:[c&&e.jsx(R,{className:"h-4 w-4 animate-spin mr-2"}),c?"Procesando...":"Subir Archivo"]})]})]})]})})}export{Y as default};
