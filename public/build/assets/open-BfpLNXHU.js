import{K as D,m as g,r as a,j as s}from"./app-D7zUCyRY.js";import{B as E}from"./button-BE06mpUI.js";import{D as y,b as N,c as v,d as S,e as B}from"./dialog-DgDjMbhn.js";import{b as F,m as V}from"./utils-Dxu7ruf7.js";import{t as c}from"./index-B1edQLmp.js";import{L as w}from"./loader-circle-Vwov9UxL.js";import"./index-C8Q4TNeI.js";import"./index-HN7NhMEt.js";import"./index-C0lRQ9Ck.js";function G({isOpen:d=!1,onOpenChange:e,selectedItem:r}){const{flash:A}=D().props,{data:i,setData:n,patch:p,processing:m,reset:u}=g({id:r.id}),[x,o]=a.useState(d),[h,j]=a.useState(!1);a.useEffect(()=>{j(i.id!=="0")},[i]),a.useEffect(()=>{o(d)},[d]),a.useEffect(()=>{n("id",r.id)},[r,n]);const b=t=>{t.preventDefault(),p(route("consolidated.open",{id:i.id}),{onSuccess:f=>{const l=f.props.flash;l.success&&(o(!1),u(),c.success(l.success),e&&e(!1)),l.error&&(o(!1),c.error(l.error))},onError:f=>{o(!0),c.error("Ocurrió un error al abrir el consolidado")}})};return s.jsx("div",{children:s.jsx(y,{open:x,onOpenChange:t=>{o(t),e&&e(t)},children:s.jsxs(N,{className:"sm:max-w-[425px]",children:[s.jsxs(v,{children:[s.jsx(S,{children:"Abrir Consolidado"}),s.jsxs(B,{children:["¿Está seguro de que desea abrir el consolidado para el mes de"," ",F(V,"value",r.month,"label")," del año ",r.year,"?"]})]}),s.jsx("form",{onSubmit:b,className:"space-y-3",method:"post",action:route("consolidated.open",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(E,{type:"submit",className:"mt-2",disabled:m||!h,children:[m&&s.jsx(w,{className:"h-4 w-4 animate-spin"}),"Abrir"]})})})]})})})}export{G as default};
