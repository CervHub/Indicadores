import{m as w,r as n,j as e}from"./app-CFbnwxaJ.js";import{I as u}from"./input-error-BAFbzPKB.js";import{B as M}from"./button-CMVn9jsO.js";import{D as A,b as B,c as R,d as G,e as T}from"./dialog-Pix7n2zF.js";import{L as h}from"./label-BSuMeJi7.js";import{S as p,a as x,b as j,c as f,d as g,e as S,f as b}from"./select-DjeTE6lj.js";import{m as Y}from"./utils-DU6Hee-i.js";import{t as l}from"./index-CtokE_cK.js";import{L as H}from"./loader-circle-C6EVYJpZ.js";import"./index-BLxLQ2lR.js";import"./index-DczEtKpH.js";import"./index-DM9dij4a.js";import"./index-Ce_yXbC7.js";import"./index-7lrwsnUS.js";import"./index-C3QMGSSW.js";import"./index-DM2guIZE.js";import"./check-BefMJKsU.js";function se({isDialogOpen:C,setIsDialogOpen:o}){const i=new Date().getFullYear(),v=new Date().getMonth()+1,{data:s,setData:c,post:y,processing:m,errors:d,reset:D}=w({year:i,month:v}),[N,E]=n.useState(!0),F=n.useRef(null);n.useEffect(()=>{E(s.year!==0&&s.month!==0)},[s]);const L=r=>{r.preventDefault(),y(route("consolidated.store"),{onSuccess:a=>{const t=a.props.flash;t.success&&(o(!1),D(),l.success(t.success)),t.error&&(o(!0),l.error(t.error))},onError:a=>{o(!0),l.error("Ocurri칩 un error al intentar crear el consolidado.")}})},V=Array.from({length:i-2023+1},(r,a)=>2023+a);return e.jsx(A,{open:C,onOpenChange:r=>o(r),children:e.jsxs(B,{className:"sm:max-w-[425px]",children:[e.jsxs(R,{children:[e.jsx(G,{children:"Crear Consolidado"}),e.jsx(T,{children:"Complete los campos para crear un nuevo consolidado."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-3",method:"post",action:route("consolidated.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"year",children:"A침o"}),e.jsxs(p,{onValueChange:r=>c("year",Number(r)),value:String(s.year),children:[e.jsx(x,{children:e.jsx(j,{placeholder:"Seleccione un a침o"})}),e.jsx(f,{children:e.jsxs(g,{children:[e.jsx(S,{children:"A침os"}),V.map(r=>e.jsx(b,{value:String(r),children:r},r))]})})]}),e.jsx(u,{message:d.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"month",children:"Mes"}),e.jsxs(p,{onValueChange:r=>c("month",Number(r)),value:String(s.month),children:[e.jsx(x,{children:e.jsx(j,{placeholder:"Seleccione un mes"})}),e.jsx(f,{children:e.jsxs(g,{children:[e.jsx(S,{children:"Meses"}),Y.map(r=>e.jsx(b,{value:r.value,children:r.label},r.value))]})})]}),e.jsx(u,{message:d.month})]}),e.jsxs(M,{ref:F,type:"submit",className:"mt-2",disabled:m||!N,children:[m&&e.jsx(H,{className:"h-4 w-4 animate-spin"}),"Generar"]})]})]})})}export{se as default};
