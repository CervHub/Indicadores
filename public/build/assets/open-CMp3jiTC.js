import{K as j,m as D,r as e,j as s}from"./app-CgNGoX1T.js";import{B as b}from"./button-kaTXcZii.js";import{D as g,b as E,c as y,d as N,e as S}from"./dialog-CTa4mFrk.js";import{f as v,m as B}from"./utils-U4jazdRL.js";import{L as F}from"./loader-circle-3HvUlcjo.js";import"./index-l0oIqbCP.js";import"./index-bp9c4tc-.js";import"./index-DJE-FRJd.js";function T({isOpen:l=!1,onOpenChange:o,selectedItem:a}){const{flash:V}=j().props,{data:i,setData:n,patch:m,processing:c,reset:p}=D({id:a.id}),[u,r]=e.useState(l),[f,x]=e.useState(!1);e.useEffect(()=>{x(i.id!=="0")},[i]),e.useEffect(()=>{r(l)},[l]),e.useEffect(()=>{n("id",a.id)},[a,n]);const h=t=>{t.preventDefault(),m(route("consolidated.open",{id:i.id}),{onSuccess:d=>{p(),r(!1),o&&o(!1),console.log("Solicitud de apertura exitosa:",d)},onError:d=>{r(!0),console.log("Errores en la solicitud de apertura:",d)}})};return s.jsx("div",{children:s.jsx(g,{open:u,onOpenChange:t=>{r(t),o&&o(t)},children:s.jsxs(E,{className:"sm:max-w-[425px]",children:[s.jsxs(y,{children:[s.jsx(N,{children:"Abrir Consolidado"}),s.jsxs(S,{children:["¿Está seguro de que desea abrir el consolidado para el mes de"," ",v(B,"value",a.month,"label")," del año ",a.year,"?"]})]}),s.jsx("form",{onSubmit:h,className:"space-y-3",method:"post",action:route("consolidated.open",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(b,{type:"submit",className:"mt-2",disabled:c||!f,children:[c&&s.jsx(F,{className:"h-4 w-4 animate-spin"}),"Abrir"]})})})]})})})}export{T as default};
