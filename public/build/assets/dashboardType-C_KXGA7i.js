import{U as N,g as ut,r as f,K as ee,j as r,a as te,L as Pt}from"./app-BP7XMsQP.js";import{C as q,a as de,b as ue,c as pe,d as H}from"./card-B1Uo1X5J.js";import{h as R,r as pt,i as Dt,j as ft,k as Tt,l as J,m as ze,p as W,n as G,o as mt,q as Be,s as fe,D as Et,t as Ft,u as ie,v as ae,S as Lt,A as Rt,w as It,x as Ge,y as Mt,z as re,B as $t,E as Vt,G as Kt,F as ke,H as Yt,I as zt,J as Bt,K as _e,M as qe,N as Gt,O as qt,C as me,e as he,b as xe,c as ht,L as xt,a as yt,X as gt,d as vt,f as bt,g as jt}from"./chart-CyoqIO0D.js";import{S as V,a as K,b as Y,c as z,f as L}from"./select-CPd6hpli.js";import{e as U,m as ye}from"./utils-Dxu7ruf7.js";import{A as Wt}from"./app-layout-C-gMZoJn.js";import"./index-CVVE6TaT.js";import"./index-DET1ay4E.js";import"./button-B9YPBg05.js";import"./index-BtQ3LuG1.js";import"./index-2WTE79i9.js";import"./index-BUoUYoci.js";import"./index-CfkpjRik.js";import"./index-CmzwOFqT.js";import"./index-DMmdRBsu.js";import"./check-C8IFhvWQ.js";import"./index-BIV9YrXW.js";import"./chevrons-up-down-DvEjUlMJ.js";import"./app-logo-icon-kmrxhXBV.js";import"./file-chart-pie-kK8RpfBJ.js";var Ut=["points","className","baseLinePoints","connectNulls"];function ne(){return ne=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},ne.apply(this,arguments)}function Ht(a,e){if(a==null)return{};var n=Zt(a,e),t,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(s=0;s<i.length;s++)t=i[s],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(a,t)&&(n[t]=a[t])}return n}function Zt(a,e){if(a==null)return{};var n={};for(var t in a)if(Object.prototype.hasOwnProperty.call(a,t)){if(e.indexOf(t)>=0)continue;n[t]=a[t]}return n}function We(a){return ea(a)||Qt(a)||Jt(a)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jt(a,e){if(a){if(typeof a=="string")return $e(a,e);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(a,e)}}function Qt(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ea(a){if(Array.isArray(a))return $e(a)}function $e(a,e){(e==null||e>a.length)&&(e=a.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=a[n];return t}var Ue=function(e){return e&&e.x===+e.x&&e.y===+e.y},ta=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(t){Ue(t)?n[n.length-1].push(t):n[n.length-1].length>0&&n.push([])}),Ue(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Oe=function(e,n){var t=ta(e);n&&(t=[t.reduce(function(i,o){return[].concat(We(i),We(o))},[])]);var s=t.map(function(i){return i.reduce(function(o,p,x){return"".concat(o).concat(x===0?"M":"L").concat(p.x,",").concat(p.y)},"")}).join("");return t.length===1?"".concat(s,"Z"):s},aa=function(e,n,t){var s=Oe(e,t);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Oe(n.reverse(),t).slice(1))},ra=function(e){var n=e.points,t=e.className,s=e.baseLinePoints,i=e.connectNulls,o=Ht(e,Ut);if(!n||!n.length)return null;var p=U("recharts-polygon",t);if(s&&s.length){var x=o.stroke&&o.stroke!=="none",u=aa(n,s,i);return N.createElement("g",{className:p},N.createElement("path",ne({},R(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),x?N.createElement("path",ne({},R(o,!0),{fill:"none",d:Oe(n,i)})):null,x?N.createElement("path",ne({},R(o,!0),{fill:"none",d:Oe(s,i)})):null)}var g=Oe(n,i);return N.createElement("path",ne({},R(o,!0),{fill:g.slice(-1)==="Z"?o.fill:"none",className:p,d:g}))},Ie,He;function na(){if(He)return Ie;He=1;var a=pt(),e=Dt(),n=ft();function t(s,i){return s&&s.length?a(s,n(i,2),e):void 0}return Ie=t,Ie}var sa=na();const ia=ut(sa);var Me,Ze;function oa(){if(Ze)return Me;Ze=1;var a=pt(),e=ft(),n=Tt();function t(s,i){return s&&s.length?a(s,e(i,2),n):void 0}return Me=t,Me}var la=oa();const ca=ut(la);var da=["cx","cy","angle","ticks","axisLine"],ua=["ticks","tick","angle","tickFormatter","stroke"];function oe(a){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(a)}function Ne(){return Ne=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},Ne.apply(this,arguments)}function Xe(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,t)}return n}function Z(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(n),!0).forEach(function(t){Te(a,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}function Je(a,e){if(a==null)return{};var n=pa(a,e),t,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(s=0;s<i.length;s++)t=i[s],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(a,t)&&(n[t]=a[t])}return n}function pa(a,e){if(a==null)return{};var n={};for(var t in a)if(Object.prototype.hasOwnProperty.call(a,t)){if(e.indexOf(t)>=0)continue;n[t]=a[t]}return n}function fa(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Qe(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,At(t.key),t)}}function ma(a,e,n){return e&&Qe(a.prototype,e),n&&Qe(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function ha(a,e,n){return e=Ce(e),xa(a,St()?Reflect.construct(e,n||[],Ce(a).constructor):e.apply(a,n))}function xa(a,e){if(e&&(oe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ya(a)}function ya(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function St(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(St=function(){return!!a})()}function Ce(a){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ce(a)}function ga(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&Ve(a,e)}function Ve(a,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ve(a,e)}function Te(a,e,n){return e=At(e),e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function At(a){var e=va(a,"string");return oe(e)=="symbol"?e:e+""}function va(a,e){if(oe(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var t=n.call(a,e);if(oe(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var Ee=function(a){function e(){return fa(this,e),ha(this,e,arguments)}return ga(e,a),ma(e,[{key:"getTickValueCoord",value:function(t){var s=t.coordinate,i=this.props,o=i.angle,p=i.cx,x=i.cy;return W(p,x,s,o)}},{key:"getTickTextAnchor",value:function(){var t=this.props.orientation,s;switch(t){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var t=this.props,s=t.cx,i=t.cy,o=t.angle,p=t.ticks,x=ia(p,function(g){return g.coordinate||0}),u=ca(p,function(g){return g.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:x.coordinate||0}}},{key:"renderAxisLine",value:function(){var t=this.props,s=t.cx,i=t.cy,o=t.angle,p=t.ticks,x=t.axisLine,u=Je(t,da),g=p.reduce(function(v,d){return[Math.min(v[0],d.coordinate),Math.max(v[1],d.coordinate)]},[1/0,-1/0]),c=W(s,i,g[0],o),y=W(s,i,g[1],o),S=Z(Z(Z({},R(u,!1)),{},{fill:"none"},R(x,!1)),{},{x1:c.x,y1:c.y,x2:y.x,y2:y.y});return N.createElement("line",Ne({className:"recharts-polar-radius-axis-line"},S))}},{key:"renderTicks",value:function(){var t=this,s=this.props,i=s.ticks,o=s.tick,p=s.angle,x=s.tickFormatter,u=s.stroke,g=Je(s,ua),c=this.getTickTextAnchor(),y=R(g,!1),S=R(o,!1),v=i.map(function(d,A){var O=t.getTickValueCoord(d),l=Z(Z(Z(Z({textAnchor:c,transform:"rotate(".concat(90-p,", ").concat(O.x,", ").concat(O.y,")")},y),{},{stroke:"none",fill:u},S),{},{index:A},O),{},{payload:d});return N.createElement(G,Ne({className:U("recharts-polar-radius-axis-tick",mt(o)),key:"tick-".concat(d.coordinate)},Be(t.props,d,A)),e.renderTickItem(o,l,x?x(d.value,A):d.value))});return N.createElement(G,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var t=this.props,s=t.ticks,i=t.axisLine,o=t.tick;return!s||!s.length?null:N.createElement(G,{className:U("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),fe.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(t,s,i){var o;return N.isValidElement(t)?o=N.cloneElement(t,s):J(t)?o=t(s):o=N.createElement(ze,Ne({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(f.PureComponent);Te(Ee,"displayName","PolarRadiusAxis");Te(Ee,"axisType","radiusAxis");Te(Ee,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function le(a){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(a)}function Q(){return Q=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},Q.apply(this,arguments)}function et(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,t)}return n}function X(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(t){Fe(a,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}function ba(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,Nt(t.key),t)}}function ja(a,e,n){return e&&tt(a.prototype,e),n&&tt(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function Sa(a,e,n){return e=Pe(e),Aa(a,Ot()?Reflect.construct(e,n||[],Pe(a).constructor):e.apply(a,n))}function Aa(a,e){if(e&&(le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oa(a)}function Oa(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ot(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ot=function(){return!!a})()}function Pe(a){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pe(a)}function Na(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&Ke(a,e)}function Ke(a,e){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ke(a,e)}function Fe(a,e,n){return e=Nt(e),e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function Nt(a){var e=_a(a,"string");return le(e)=="symbol"?e:e+""}function _a(a,e){if(le(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var t=n.call(a,e);if(le(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ka=Math.PI/180,wa=1e-5,Le=function(a){function e(){return ba(this,e),Sa(this,e,arguments)}return Na(e,a),ja(e,[{key:"getTickLineCoord",value:function(t){var s=this.props,i=s.cx,o=s.cy,p=s.radius,x=s.orientation,u=s.tickSize,g=u||8,c=W(i,o,p,t.coordinate),y=W(i,o,p+(x==="inner"?-1:1)*g,t.coordinate);return{x1:c.x,y1:c.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(t){var s=this.props.orientation,i=Math.cos(-t.coordinate*ka),o;return i>wa?o=s==="outer"?"start":"end":i<-1e-5?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var t=this.props,s=t.cx,i=t.cy,o=t.radius,p=t.axisLine,x=t.axisLineType,u=X(X({},R(this.props,!1)),{},{fill:"none"},R(p,!1));if(x==="circle")return N.createElement(Et,Q({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var g=this.props.ticks,c=g.map(function(y){return W(s,i,o,y.coordinate)});return N.createElement(ra,Q({className:"recharts-polar-angle-axis-line"},u,{points:c}))}},{key:"renderTicks",value:function(){var t=this,s=this.props,i=s.ticks,o=s.tick,p=s.tickLine,x=s.tickFormatter,u=s.stroke,g=R(this.props,!1),c=R(o,!1),y=X(X({},g),{},{fill:"none"},R(p,!1)),S=i.map(function(v,d){var A=t.getTickLineCoord(v),O=t.getTickTextAnchor(v),l=X(X(X({textAnchor:O},g),{},{stroke:"none",fill:u},c),{},{index:d,payload:v,x:A.x2,y:A.y2});return N.createElement(G,Q({className:U("recharts-polar-angle-axis-tick",mt(o)),key:"tick-".concat(v.coordinate)},Be(t.props,v,d)),p&&N.createElement("line",Q({className:"recharts-polar-angle-axis-tick-line"},y,A)),o&&e.renderTickItem(o,l,x?x(v.value,d):v.value))});return N.createElement(G,{className:"recharts-polar-angle-axis-ticks"},S)}},{key:"render",value:function(){var t=this.props,s=t.ticks,i=t.radius,o=t.axisLine;return i<=0||!s||!s.length?null:N.createElement(G,{className:U("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(t,s,i){var o;return N.isValidElement(t)?o=N.cloneElement(t,s):J(t)?o=t(s):o=N.createElement(ze,Q({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(f.PureComponent);Fe(Le,"displayName","PolarAngleAxis");Fe(Le,"axisType","angleAxis");Fe(Le,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var we;function ce(a){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(a)}function se(){return se=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a},se.apply(this,arguments)}function at(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),n.push.apply(n,t)}return n}function P(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?at(Object(n),!0).forEach(function(t){$(a,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}function Ca(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,kt(t.key),t)}}function Pa(a,e,n){return e&&rt(a.prototype,e),n&&rt(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function Da(a,e,n){return e=De(e),Ta(a,_t()?Reflect.construct(e,n||[],De(a).constructor):e.apply(a,n))}function Ta(a,e){if(e&&(ce(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ea(a)}function Ea(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _t(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_t=function(){return!!a})()}function De(a){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},De(a)}function Fa(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&Ye(a,e)}function Ye(a,e){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},Ye(a,e)}function $(a,e,n){return e=kt(e),e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function kt(a){var e=La(a,"string");return ce(e)=="symbol"?e:e+""}function La(a,e){if(ce(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var t=n.call(a,e);if(ce(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var B=function(a){function e(n){var t;return Ca(this,e),t=Da(this,e,[n]),$(t,"pieRef",null),$(t,"sectorRefs",[]),$(t,"id",Vt("recharts-pie-")),$(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),J(s)&&s()}),$(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),J(s)&&s()}),t.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},t}return Fa(e,a),Pa(e,[{key:"isActiveIndex",value:function(t){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(t)!==-1:t===s}},{key:"hasActiveIndex",value:function(){var t=this.props.activeIndex;return Array.isArray(t)?t.length!==0:t||t===0}},{key:"renderLabels",value:function(t){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,p=i.labelLine,x=i.dataKey,u=i.valueKey,g=R(this.props,!1),c=R(o,!1),y=R(p,!1),S=o&&o.offsetRadius||20,v=t.map(function(d,A){var O=(d.startAngle+d.endAngle)/2,l=W(d.cx,d.cy,d.outerRadius+S,O),j=P(P(P(P({},g),d),{},{stroke:"none"},c),{},{index:A,textAnchor:e.getTextAnchor(l.x,d.cx)},l),m=P(P(P(P({},g),d),{},{fill:"none",stroke:d.fill},y),{},{index:A,points:[W(d.cx,d.cy,d.outerRadius,O),l]}),b=x;return ie(x)&&ie(u)?b="value":ie(x)&&(b=u),N.createElement(G,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(A)},p&&e.renderLabelLineItem(p,m,"line"),e.renderLabelItem(o,j,ae(d,b)))});return N.createElement(G,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(t){var s=this,i=this.props,o=i.activeShape,p=i.blendStroke,x=i.inactiveShape;return t.map(function(u,g){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&t.length!==1)return null;var c=s.isActiveIndex(g),y=x&&s.hasActiveIndex()?x:null,S=c?o:y,v=P(P({},u),{},{stroke:p?u.fill:u.stroke,tabIndex:-1});return N.createElement(G,se({ref:function(A){A&&!s.sectorRefs.includes(A)&&s.sectorRefs.push(A)},tabIndex:-1,className:"recharts-pie-sector"},Be(s.props,u,g),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(g)}),N.createElement(Lt,se({option:S,isActive:c,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var t=this,s=this.props,i=s.sectors,o=s.isAnimationActive,p=s.animationBegin,x=s.animationDuration,u=s.animationEasing,g=s.animationId,c=this.state,y=c.prevSectors,S=c.prevIsAnimationActive;return N.createElement(Rt,{begin:p,duration:x,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(g,"-").concat(S),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var d=v.t,A=[],O=i&&i[0],l=O.startAngle;return i.forEach(function(j,m){var b=y&&y[m],C=m>0?It(j,"paddingAngle",0):0;if(b){var T=Ge(b.endAngle-b.startAngle,j.endAngle-j.startAngle),_=P(P({},j),{},{startAngle:l+C,endAngle:l+T(d)+C});A.push(_),l=_.endAngle}else{var I=j.endAngle,F=j.startAngle,k=Ge(0,I-F),D=k(d),E=P(P({},j),{},{startAngle:l+C,endAngle:l+D+C});A.push(E),l=E.endAngle}}),N.createElement(G,null,t.renderSectorsStatically(A))})}},{key:"attachKeyboardHandlers",value:function(t){var s=this;t.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var p=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[p].focus(),s.setState({sectorToFocus:p});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var t=this.props,s=t.sectors,i=t.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Mt(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var t=this,s=this.props,i=s.hide,o=s.sectors,p=s.className,x=s.label,u=s.cx,g=s.cy,c=s.innerRadius,y=s.outerRadius,S=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!re(u)||!re(g)||!re(c)||!re(y))return null;var d=U("recharts-pie",p);return N.createElement(G,{tabIndex:this.props.rootTabIndex,className:d,ref:function(O){t.pieRef=O}},this.renderSectors(),x&&this.renderLabels(o),fe.renderCallByParent(this.props,null,!1),(!S||v)&&$t.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(t,s){return s.prevIsAnimationActive!==t.isAnimationActive?{prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:[],isAnimationFinished:!0}:t.isAnimationActive&&t.animationId!==s.prevAnimationId?{prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:t.sectors!==s.curSectors?{curSectors:t.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(t,s){return t>s?"start":t<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(t,s,i){if(N.isValidElement(t))return N.cloneElement(t,s);if(J(t))return t(s);var o=U("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return N.createElement(Ft,se({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(t,s,i){if(N.isValidElement(t))return N.cloneElement(t,s);var o=i;if(J(t)&&(o=t(s),N.isValidElement(o)))return o;var p=U("recharts-pie-label-text",typeof t!="boolean"&&!J(t)?t.className:"");return N.createElement(ze,se({},s,{alignmentBaseline:"middle",className:p}),o)}}])}(f.PureComponent);we=B;$(B,"displayName","Pie");$(B,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Kt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$(B,"parseDeltaAngle",function(a,e){var n=ke(e-a),t=Math.min(Math.abs(e-a),360);return n*t});$(B,"getRealPieData",function(a){var e=a.data,n=a.children,t=R(a,!1),s=Yt(n,zt);return e&&e.length?e.map(function(i,o){return P(P(P({payload:i},t),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return P(P({},t),i.props)}):[]});$(B,"parseCoordinateOfPie",function(a,e){var n=e.top,t=e.left,s=e.width,i=e.height,o=Bt(s,i),p=t+_e(a.cx,s,s/2),x=n+_e(a.cy,i,i/2),u=_e(a.innerRadius,o,0),g=_e(a.outerRadius,o,o*.8),c=a.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:p,cy:x,innerRadius:u,outerRadius:g,maxRadius:c}});$(B,"getComposedData",function(a){var e=a.item,n=a.offset,t=e.type.defaultProps!==void 0?P(P({},e.type.defaultProps),e.props):e.props,s=we.getRealPieData(t);if(!s||!s.length)return null;var i=t.cornerRadius,o=t.startAngle,p=t.endAngle,x=t.paddingAngle,u=t.dataKey,g=t.nameKey,c=t.valueKey,y=t.tooltipType,S=Math.abs(t.minAngle),v=we.parseCoordinateOfPie(t,n),d=we.parseDeltaAngle(o,p),A=Math.abs(d),O=u;ie(u)&&ie(c)?(qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),O="value"):ie(u)&&(qe(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),O=c);var l=s.filter(function(_){return ae(_,O,0)!==0}).length,j=(A>=360?l:l-1)*x,m=A-l*S-j,b=s.reduce(function(_,I){var F=ae(I,O,0);return _+(re(F)?F:0)},0),C;if(b>0){var T;C=s.map(function(_,I){var F=ae(_,O,0),k=ae(_,g,I),D=(re(F)?F:0)/b,E;I?E=T.endAngle+ke(d)*x*(F!==0?1:0):E=o;var h=E+ke(d)*((F!==0?S:0)+D*m),w=(E+h)/2,M=(v.innerRadius+v.outerRadius)/2,wt=[{name:k,value:F,payload:_,dataKey:O,type:y}],Ct=W(v.cx,v.cy,M,w);return T=P(P(P({percent:D,cornerRadius:i,name:k,tooltipPayload:wt,midAngle:w,middleRadius:M,tooltipPosition:Ct},_),v),{},{value:ae(_,O),startAngle:E,endAngle:h,payload:_,paddingAngle:ke(d)*x}),T})}return P(P({},v),{},{sectors:C,data:s})});var Re=Gt({chartName:"PieChart",GraphicalChild:B,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Le},{axisType:"radiusAxis",AxisComp:Ee}],formatAxisMap:qt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Ra={visitors:{label:"Número de reporte"}},nt=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FFCD56","#4BC0C0","#36A2EB","#FF6384"],st=(a,e,n,t,s,i)=>{const o=n==="all"?a:a.filter(c=>{const y=new Date(c.fecha_reporte).getMonth()+1;return y.toString()===n||y===parseInt(n)}),p=t==="all"?o:o.filter(c=>c.estado===t),x=s==="all"?p:p.filter(c=>c.company_id.toString()===s),u=i==="all"?x:x.filter(c=>c.gerencia.toString()===i),g=Object.keys(e).map((c,y)=>{const S=u.filter(v=>v.tipo_reporte===c).length;return{report:c,visitors:S,fill:nt[y%nt.length]}});return g.every(c=>c.visitors===0)?[{report:"Sin datos",visitors:0,fill:"#CCCCCC"}]:g},ge=({value:a,onValueChange:e,options:n,placeholder:t})=>r.jsxs(V,{value:a,onValueChange:e,children:[r.jsx(K,{className:"w-auto rounded-lg",children:r.jsx(Y,{placeholder:t})}),r.jsx(z,{className:"rounded-xl",children:n.map(s=>r.jsx(L,{value:s.value,children:s.label},s.value))})]});function Ia({titles:a,companies:e,entities:n}){const[t,s]=f.useState(new Date().getFullYear().toString()),[i,o]=f.useState("all"),[p,x]=f.useState("all"),[u,g]=f.useState("all"),[c,y]=f.useState("all"),[S,v]=f.useState([]),[d,A]=f.useState([]),[O,l]=f.useState(!0),j=ee().props.auth.user.company_id??null,m=f.useMemo(()=>{const k=new Date().getFullYear();return Array.from({length:k-2022},(D,E)=>(2023+E).toString())},[]);f.useEffect(()=>{(async()=>{l(!0);try{const D=new FormData;D.append("year",t),j&&(D.append("company_id",j.toString()),D.append("company_report_id",j.toString()));const E=await te.post(route("getReportsMetrics",{type:"cat"}),D);v(E.data.data),A(st(E.data.data,a,i,p,u,c))}catch(D){console.error("Error fetching data:",D),v([]),A([{report:"Sin datos",visitors:0,fill:"#CCCCCC"}])}finally{l(!1)}})()},[t,a]),f.useEffect(()=>{A(st(S,a,i,p,u,c))},[i,p,u,c,S,a]);const b=m.map(k=>({value:k,label:k})),C=[{value:"all",label:"Todos"},...ye],T=[{value:"all",label:"Todos"},{value:"Generado",label:"Generado"},{value:"Revisado",label:"Revisado"},{value:"Finalizado",label:"Finalizado"}],_=[{value:"all",label:"Todas las compañías"},...e.map(k=>({value:k.id.toString(),label:k.nombre}))],I=[{value:"all",label:"Todas las entidades"},...n.map(k=>({value:k.id.toString(),label:k.nombre}))],F=d.reduce((k,D)=>k+D.visitors,0);return r.jsxs(q,{children:[r.jsxs(de,{className:"flex flex-col gap-4 border-b py-5 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte Anual"}),r.jsx(pe,{children:"Distribución por tipo: Actos y condiciones subestándares e incidentes"})]}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:justify-end",children:[r.jsx(ge,{value:t,onValueChange:s,options:b,placeholder:"Seleccione un año"}),r.jsx(ge,{value:i,onValueChange:o,options:C,placeholder:"Seleccione un mes"}),r.jsx(ge,{value:p,onValueChange:x,options:T,placeholder:"Seleccione un estado"}),!j&&r.jsx(ge,{value:u,onValueChange:g,options:_,placeholder:"Seleccione una compañía"}),r.jsx(ge,{value:c,onValueChange:y,options:I,placeholder:"Seleccione una entidad"})]})]}),r.jsx(H,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:O?r.jsx("div",{className:"flex h-[320px] items-center justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsx(me,{config:Ra,className:"mx-auto aspect-square max-h-[250px]",children:r.jsxs(Re,{children:[r.jsx(he,{cursor:!1,content:r.jsx(xe,{hideLabel:!0})}),r.jsx(B,{data:d,dataKey:"visitors",nameKey:"report",innerRadius:60,strokeWidth:5,children:r.jsx(fe,{content:({viewBox:k})=>{if(k&&"cx"in k&&"cy"in k)return r.jsxs("text",{x:k.cx,y:k.cy,textAnchor:"middle",dominantBaseline:"middle",children:[r.jsx("tspan",{x:k.cx,y:k.cy,className:"fill-foreground text-3xl font-bold",children:F.toLocaleString()}),r.jsx("tspan",{x:k.cx,y:(k.cy||0)+24,className:"fill-muted-foreground",children:"Número de reporte"})]})}})}),r.jsx(ht,{})]})})})]})}const Ma={visitors:{label:"Número de reporte"}},it=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FFCD56","#4BC0C0","#36A2EB","#FF6384"],ot=(a,e,n,t,s,i)=>{const o=n==="all"?a:a.filter(c=>{const y=new Date(c.fecha_reporte).getMonth()+1;return y.toString()===n||y===parseInt(n)}),p=t==="all"?o:o.filter(c=>c.estado===t),x=s==="all"?p:p.filter(c=>c.company_id.toString()===s),u=i==="all"?x:x.filter(c=>c.gerencia.toString()===i);return e.map((c,y)=>{const S=u.filter(v=>parseInt(v.category_company_id)===parseInt(c.id)).length;return{report:c.nombre,visitors:S,fill:it[y%it.length]}})},ve=({value:a,onValueChange:e,options:n,placeholder:t})=>r.jsxs(V,{value:a,onValueChange:e,children:[r.jsx(K,{className:"w-auto rounded-lg",children:r.jsx(Y,{placeholder:t})}),r.jsx(z,{className:"rounded-xl",children:n.map(s=>r.jsx(L,{value:s.value,children:s.label},s.value))})]});function $a({title:a,pageType:e,companies:n,entities:t,categoriesData:s}){const[i,o]=f.useState(new Date().getFullYear().toString()),[p,x]=f.useState("all"),[u,g]=f.useState("all"),[c,y]=f.useState("all"),[S,v]=f.useState("all"),[d,A]=f.useState([]),[O,l]=f.useState([]),[j,m]=f.useState(!0),b=ee().props.auth.user.company_id??null,C=f.useMemo(()=>{const h=new Date().getFullYear();return Array.from({length:h-2022},(w,M)=>(2023+M).toString())},[]);f.useEffect(()=>{(async()=>{m(!0);try{const w=new FormData;w.append("year",i),w.append("tipo_reporte",e),b&&(w.append("company_id",b.toString()),w.append("company_report_id",b.toString()));const M=await te.post(route("getReportsMetrics",{type:"cat"}),w);A(M.data.data),l(ot(M.data.data,s,p,u,c,S))}catch(w){console.error("Error fetching data:",w),A([]),l([{report:"Sin datos",visitors:0,fill:"#CCCCCC"}])}finally{m(!1)}})()},[i,s]),f.useEffect(()=>{l(ot(d,s,p,u,c,S))},[p,u,c,S,d,s]);const T=C.map(h=>({value:h,label:h})),_=[{value:"all",label:"Todos"},...ye],I=[{value:"all",label:"Todos"},{value:"Generado",label:"Generado"},{value:"Finalizado",label:"Finalizado"}],F=[{value:"all",label:"Todas las compañías"},...n.map(h=>({value:h.id.toString(),label:h.nombre}))],k=[{value:"all",label:"Todas las entidades"},...t.map(h=>({value:h.id.toString(),label:h.nombre}))],D=O.reduce((h,w)=>h+w.visitors,0),E=[...O].sort((h,w)=>w.visitors-h.visitors);return r.jsxs("div",{className:"space-y-4",children:[r.jsx(q,{children:r.jsx(H,{className:"flex flex-col gap-4 py-5 sm:flex-row sm:items-center sm:justify-between",children:r.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:justify-end",children:[r.jsx(ve,{value:i,onValueChange:o,options:T,placeholder:"Seleccione un año"}),r.jsx(ve,{value:p,onValueChange:x,options:_,placeholder:"Seleccione un mes"}),r.jsx(ve,{value:u,onValueChange:g,options:I,placeholder:"Seleccione un estado"}),!b&&r.jsx(ve,{value:c,onValueChange:y,options:F,placeholder:"Seleccione una compañía"}),r.jsx(ve,{value:S,onValueChange:v,options:k,placeholder:"Seleccione una entidad"})]})})}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[r.jsxs(q,{className:"h-[500px]",children:[r.jsx(de,{className:"flex flex-col gap-4 border-b py-5 sm:flex-row sm:items-center sm:justify-between",children:r.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte Anual"}),r.jsx(pe,{children:a})]})}),r.jsx(H,{className:"flex h-full justify-center",children:j?r.jsx("div",{className:"flex justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsx(me,{config:Ma,className:"mx-auto aspect-square h-full",children:r.jsxs(Re,{children:[r.jsx(he,{cursor:!1,content:r.jsx(xe,{hideLabel:!0})}),r.jsx(B,{data:E,dataKey:"visitors",nameKey:"report",innerRadius:60,strokeWidth:5,children:r.jsx(fe,{content:({viewBox:h})=>{if(h&&"cx"in h&&"cy"in h)return r.jsxs("text",{x:h.cx,y:h.cy,textAnchor:"middle",dominantBaseline:"middle",children:[r.jsx("tspan",{x:h.cx,y:h.cy,className:"fill-foreground text-3xl font-bold",children:D.toLocaleString()}),r.jsx("tspan",{x:h.cx,y:(h.cy||0)+24,className:"fill-muted-foreground",children:"Número de reporte"})]})}})})]})})})]}),r.jsx(q,{className:"col-span-2 m-0 h-[500px] p-0",children:r.jsx("div",{className:"max-h-full overflow-y-auto rounded-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-full dark:divide-gray-700",children:[r.jsx("thead",{className:"sticky top-0 rounded-full bg-gray-50 dark:bg-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Categoría"}),r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Total"}),r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Porcentaje"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-200 rounded-b-sm bg-white dark:divide-gray-700 dark:bg-gray-900",children:[E.map((h,w)=>r.jsxs("tr",{children:[r.jsx("td",{className:"max-w-[300px] truncate px-2 py-1 text-sm font-medium whitespace-nowrap text-gray-900 dark:text-gray-100",children:h.report}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:h.visitors}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:D===0?"0%":(h.visitors/D*100).toFixed(2)+"%"})]},w)),r.jsxs("tr",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-800",children:[r.jsx("td",{className:"px-2 py-1 text-sm font-medium whitespace-nowrap text-gray-900 dark:text-gray-100",children:"Total"}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:D}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:"100%"})]})]})]})})})]})]})}const be={otros:{label:"Otros",color:"hsl(var(--chart-1))"},comites:{label:"Comités",color:"hsl(var(--chart-2))"},planeada:{label:"Planeada",color:"hsl(var(--chart-3))"},no_planeada:{label:"No Planeada",color:"hsl(var(--chart-4))"}},lt=["#FF6384","#36A2EB","#FFCE56","#4BC0C0"],Va=a=>Array.from({length:365},(e,n)=>({date:new Date(a,0,n+1).toISOString().split("T")[0],otros:0,comites:0,planeada:0,no_planeada:0})),Ka=a=>a.reduce((e,n)=>(e.otros+=n.otros,e.comites+=n.comites,e.planeada+=n.planeada,e.no_planeada+=n.no_planeada,e),{otros:0,comites:0,planeada:0,no_planeada:0}),Ya=()=>{const a=new Date().getFullYear(),[e,n]=f.useState(""),[t,s]=f.useState(a.toString()),[i,o]=f.useState("all"),[p,x]=f.useState("all"),[u,g]=f.useState([]),[c,y]=f.useState(!1),S=f.useMemo(()=>{const m=[];for(let b=2023;b<=a;b++)m.push(b.toString());return m},[a]),v=f.useMemo(()=>u.filter(m=>{const b=new Date(m.date),C=b.getFullYear().toString()===t,T=i==="all"||(b.getMonth()+1).toString()===i;return C&&T}),[u,t,i]),d=f.useMemo(()=>Ka(v),[v]),{props:A}=ee(),O=A.auth.user.company_id||"all";f.useEffect(()=>{const m=route("year.metrics.inspeccion",{company_id:O,year:t});n(m)},[t,O]),f.useEffect(()=>{e&&(y(!0),te.get(e).then(m=>{console.log("Response:",m);const b=Va(Number(t));m.data.events.forEach(C=>{const T=C.fecha_evento;let _=C.tipo_inspeccion;!_||_==="OTROS"?_="otros":_==="NO PLANEADA"?_="no_planeada":_=_.toLowerCase();const I=b.find(F=>F.date===T);I&&I[_]++}),g(b)}).catch(m=>{console.error("Error fetching metrics data:",m)}).finally(()=>{y(!1)}))},[e,t]);const l=Object.keys(d).map((m,b)=>({name:be[m].label,value:d[m],fill:lt[b%lt.length]})),j=l.reduce((m,b)=>m+b.value,0);return r.jsxs(q,{children:[r.jsxs(de,{className:"flex items-center gap-2 space-y-0 border-b py-5 sm:flex-row",children:[r.jsxs("div",{className:"grid flex-1 gap-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte general Anual"}),r.jsx(pe,{children:"Visualiza todos los reportes generados en la plataforma por todas las contratas."})]}),r.jsxs(V,{value:t,onValueChange:s,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a year",children:r.jsx(Y,{placeholder:"Select a year"})}),r.jsx(z,{className:"rounded-xl",children:S.map(m=>r.jsx(L,{value:m,className:"rounded-lg",children:m},m))})]}),r.jsxs(V,{value:i,onValueChange:o,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a month",children:r.jsx(Y,{placeholder:"Select a month"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),ye.map(m=>r.jsx(L,{value:m.value,className:"rounded-lg",children:m.label},m.value))]})]}),r.jsxs(V,{value:p,onValueChange:x,children:[r.jsx(K,{className:"w-[220px] rounded-lg sm:ml-auto","aria-label":"Select a type",children:r.jsx(Y,{placeholder:"Select a type"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),Object.keys(be).map(m=>r.jsx(L,{value:m,className:"rounded-lg",children:be[m].label},m))]})]})]}),r.jsx(H,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:c?r.jsx("div",{className:"flex h-[320px] items-center justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-4 flex justify-around",children:Object.keys(d).map((m,b)=>r.jsxs("div",{children:[r.jsxs("strong",{children:[be[m].label,":"]})," ",d[m]]},b))}),r.jsx(me,{config:be,className:"aspect-auto h-[320px] w-full",children:r.jsxs(Re,{children:[r.jsx(he,{cursor:!1,content:r.jsx(xe,{hideLabel:!0})}),r.jsx(B,{data:l,dataKey:"value",nameKey:"name",innerRadius:60,strokeWidth:5,children:r.jsx(fe,{content:({viewBox:m})=>{if(m&&"cx"in m&&"cy"in m)return r.jsxs("text",{x:m.cx,y:m.cy,textAnchor:"middle",dominantBaseline:"middle",children:[r.jsx("tspan",{x:m.cx,y:m.cy,className:"fill-foreground text-3xl font-bold",children:j.toLocaleString()}),r.jsx("tspan",{x:m.cx,y:(m.cy||0)+24,className:"fill-muted-foreground",children:"Número de reporte"})]})}})}),r.jsx(ht,{})]})})]})})]})},za={visitors:{label:"Número de reporte"}},ct=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FFCD56","#4BC0C0","#36A2EB","#FF6384"],dt=(a,e,n,t,s,i)=>{const o=n==="all"?a:a.filter(c=>{const y=new Date(c.fecha_reporte).getMonth()+1;return y.toString()===n||y===parseInt(n)}),p=t==="all"?o:o.filter(c=>c.estado===t),x=s==="all"?p:p.filter(c=>c.company_id.toString()===s),u=i==="all"?x:x.filter(c=>c.gerencia.toString()===i);return e.map((c,y)=>{const S=u.filter(v=>parseInt(v.category_company_id)===parseInt(c.id)).length;return{report:c.nombre,visitors:S,fill:ct[y%ct.length]}})},je=({value:a,onValueChange:e,options:n,placeholder:t})=>r.jsxs(V,{value:a,onValueChange:e,children:[r.jsx(K,{className:"w-auto rounded-lg",children:r.jsx(Y,{placeholder:t})}),r.jsx(z,{className:"rounded-xl",children:n.map(s=>r.jsx(L,{value:s.value,children:s.label},s.value))})]});function Ba({title:a,pageType:e,companies:n,entities:t,categoriesData:s}){const[i,o]=f.useState(new Date().getFullYear().toString()),[p,x]=f.useState("all"),[u,g]=f.useState("all"),[c,y]=f.useState("all"),[S,v]=f.useState("all"),[d,A]=f.useState([]),[O,l]=f.useState([]),[j,m]=f.useState(!0),b=ee().props.auth.user.company_id??null,C=f.useMemo(()=>{const h=new Date().getFullYear();return Array.from({length:h-2022},(w,M)=>(2023+M).toString())},[]);f.useEffect(()=>{(async()=>{m(!0);try{const w=new FormData;w.append("year",i),w.append("tipo_reporte",e),b&&(w.append("company_id",b.toString()),w.append("company_report_id",b.toString()));const M=await te.post(route("year.metrics.inspeccion.detalle",{type:"cat"}),w);A(M.data.data),l(dt(M.data.data,s,p,u,c,S))}catch(w){console.error("Error fetching data:",w),A([]),l([{report:"Sin datos",visitors:0,fill:"#CCCCCC"}])}finally{m(!1)}})()},[i,s]),f.useEffect(()=>{l(dt(d,s,p,u,c,S))},[p,u,c,S,d,s]);const T=C.map(h=>({value:h,label:h})),_=[{value:"all",label:"Todos"},...ye],I=[{value:"all",label:"Todos"},{value:"Generado",label:"Generado"},{value:"Finalizado",label:"Finalizado"}],F=[{value:"all",label:"Todas las compañías"},...n.map(h=>({value:h.id.toString(),label:h.nombre}))],k=[{value:"all",label:"Todas las entidades"},...t.map(h=>({value:h.id.toString(),label:h.nombre}))],D=O.reduce((h,w)=>h+w.visitors,0),E=[...O].sort((h,w)=>w.visitors-h.visitors);return r.jsxs("div",{className:"space-y-4",children:[r.jsx(q,{children:r.jsx(H,{className:"flex flex-col gap-4 py-5 sm:flex-row sm:items-center sm:justify-between",children:r.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:justify-end",children:[r.jsx(je,{value:i,onValueChange:o,options:T,placeholder:"Seleccione un año"}),r.jsx(je,{value:p,onValueChange:x,options:_,placeholder:"Seleccione un mes"}),r.jsx(je,{value:u,onValueChange:g,options:I,placeholder:"Seleccione un estado"}),!b&&r.jsx(je,{value:c,onValueChange:y,options:F,placeholder:"Seleccione una compañía"}),r.jsx(je,{value:S,onValueChange:v,options:k,placeholder:"Seleccione una entidad"})]})})}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[r.jsxs(q,{className:"h-[500px]",children:[r.jsx(de,{className:"flex flex-col gap-4 border-b py-5 sm:flex-row sm:items-center sm:justify-between",children:r.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte Anual"}),r.jsx(pe,{children:a})]})}),r.jsx(H,{className:"flex h-full justify-center",children:j?r.jsx("div",{className:"flex justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsx(me,{config:za,className:"mx-auto aspect-square h-full",children:r.jsxs(Re,{children:[r.jsx(he,{cursor:!1,content:r.jsx(xe,{hideLabel:!0})}),r.jsx(B,{data:E,dataKey:"visitors",nameKey:"report",innerRadius:60,strokeWidth:5,children:r.jsx(fe,{content:({viewBox:h})=>{if(h&&"cx"in h&&"cy"in h)return r.jsxs("text",{x:h.cx,y:h.cy,textAnchor:"middle",dominantBaseline:"middle",children:[r.jsx("tspan",{x:h.cx,y:h.cy,className:"fill-foreground text-3xl font-bold",children:D.toLocaleString()}),r.jsx("tspan",{x:h.cx,y:(h.cy||0)+24,className:"fill-muted-foreground",children:"Número de reporte"})]})}})})]})})})]}),r.jsx(q,{className:"col-span-2 m-0 h-[500px] p-0",children:r.jsx("div",{className:"max-h-full overflow-y-auto rounded-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-full dark:divide-gray-700",children:[r.jsx("thead",{className:"sticky top-0 rounded-full bg-gray-50 dark:bg-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Categoría"}),r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Total"}),r.jsx("th",{scope:"col",className:"px-2 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-400",children:"Porcentaje"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-200 rounded-b-sm bg-white dark:divide-gray-700 dark:bg-gray-900",children:[E.map((h,w)=>r.jsxs("tr",{children:[r.jsx("td",{className:"max-w-[300px] truncate px-2 py-3 text-sm font-medium whitespace-nowrap text-gray-900 dark:text-gray-100",children:h.report}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:h.visitors}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:D===0?"0%":(h.visitors/D*100).toFixed(2)+"%"})]},w)),r.jsxs("tr",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-800",children:[r.jsx("td",{className:"px-2 py-1 text-sm font-medium whitespace-nowrap text-gray-900 dark:text-gray-100",children:"Total"}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:D}),r.jsx("td",{className:"px-2 py-1 text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:"100%"})]})]})]})})})]})]})}const Se={actos:{label:"Reporte Actos Subestandar",color:"hsl(var(--chart-1))"},incidentes:{label:"Reporte Incidentes",color:"hsl(var(--chart-2))"},condiciones:{label:"Reporte Condiciones subestandar",color:"hsl(var(--chart-3))"}},Ga=a=>Array.from({length:365},(e,n)=>({date:new Date(a,0,n+1).toISOString().split("T")[0],actos:0,incidentes:0,condiciones:0})),qa=a=>a.reduce((e,n)=>(e.actos+=n.actos,e.incidentes+=n.incidentes,e.condiciones+=n.condiciones,e),{actos:0,incidentes:0,condiciones:0}),Wa=()=>{const a=new Date().getFullYear(),[e,n]=f.useState(""),[t,s]=f.useState(a.toString()),[i,o]=f.useState("all"),[p,x]=f.useState("all"),[u,g]=f.useState([]),[c,y]=f.useState(!1),S=f.useMemo(()=>{const l=[];for(let j=2023;j<=a;j++)l.push(j.toString());return l},[a]),v=f.useMemo(()=>u.filter(l=>{const j=new Date(l.date),m=j.getFullYear().toString()===t,b=i==="all"||(j.getMonth()+1).toString()===i;return m&&b}),[u,t,i]),d=f.useMemo(()=>qa(v),[v]),{props:A}=ee(),O=A.auth.user.company_id||"all";return f.useEffect(()=>{const l=route("year.metrics",{company_id:O,year:t});n(l)},[t,O]),f.useEffect(()=>{e&&(y(!0),te.get(e).then(l=>{const j=Ga(Number(t));l.data.events.forEach(m=>{const b=m.fecha_evento,C=m.tipo_reporte,T=j.find(_=>_.date===b);T&&T[C]++}),g(j)}).catch(l=>{console.error("Error fetching metrics data:",l)}).finally(()=>{y(!1)}))},[e,t]),r.jsxs(q,{children:[r.jsxs(de,{className:"flex items-center gap-2 space-y-0 border-b py-5 sm:flex-row",children:[r.jsxs("div",{className:"grid flex-1 gap-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte general Anual"}),r.jsx(pe,{children:"Visualiza todos los reportes generados en la plataforma por todas las contratas."})]}),r.jsxs(V,{value:t,onValueChange:s,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a year",children:r.jsx(Y,{placeholder:"Select a year"})}),r.jsx(z,{className:"rounded-xl",children:S.map(l=>r.jsx(L,{value:l,className:"rounded-lg",children:l},l))})]}),r.jsxs(V,{value:i,onValueChange:o,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a month",children:r.jsx(Y,{placeholder:"Select a month"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),ye.map(l=>r.jsx(L,{value:l.value,className:"rounded-lg",children:l.label},l.value))]})]}),r.jsxs(V,{value:p,onValueChange:x,children:[r.jsx(K,{className:"w-[220px] rounded-lg sm:ml-auto","aria-label":"Select a type",children:r.jsx(Y,{placeholder:"Select a type"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),Object.keys(Se).map(l=>r.jsx(L,{value:l,className:"rounded-lg",children:Se[l].label},l))]})]})]}),r.jsx(H,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:c?r.jsx("div",{className:"flex h-[320px] items-center justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 flex justify-around",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Actos:"})," ",d.actos]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Incidentes:"})," ",d.incidentes]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Condiciones:"})," ",d.condiciones]})]}),r.jsx(me,{config:Se,className:"aspect-auto h-[320px] w-full",children:r.jsxs(xt,{data:v,children:[r.jsx(yt,{vertical:!1}),r.jsx(gt,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:l=>new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})}),r.jsx(he,{cursor:!1,content:r.jsx(xe,{labelFormatter:l=>new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),indicator:"dot"})}),Object.keys(Se).map(l=>(p==="all"||p===l)&&r.jsx(vt,{dataKey:l,type:"monotone",stroke:Se[l].color,strokeWidth:2,dot:!1},l)),r.jsx(bt,{content:r.jsx(jt,{})})]})})]})})]})},Ae={otros:{label:"Otros",color:"hsl(var(--chart-1))"},comites:{label:"Comités",color:"hsl(var(--chart-2))"},planeada:{label:"Planeada",color:"hsl(var(--chart-3))"},no_planeada:{label:"No Planeada",color:"hsl(var(--chart-4))"}},Ua=a=>Array.from({length:365},(e,n)=>({date:new Date(a,0,n+1).toISOString().split("T")[0],otros:0,comites:0,planeada:0,no_planeada:0})),Ha=a=>a.reduce((e,n)=>(e.otros+=n.otros,e.comites+=n.comites,e.planeada+=n.planeada,e.no_planeada+=n.no_planeada,e),{otros:0,comites:0,planeada:0,no_planeada:0}),Za=()=>{const a=new Date().getFullYear(),[e,n]=f.useState(""),[t,s]=f.useState(a.toString()),[i,o]=f.useState("all"),[p,x]=f.useState("all"),[u,g]=f.useState([]),[c,y]=f.useState(!1),S=f.useMemo(()=>{const l=[];for(let j=2023;j<=a;j++)l.push(j.toString());return l},[a]),v=f.useMemo(()=>u.filter(l=>{const j=new Date(l.date),m=j.getFullYear().toString()===t,b=i==="all"||(j.getMonth()+1).toString()===i;return m&&b}),[u,t,i]),d=f.useMemo(()=>Ha(v),[v]),{props:A}=ee(),O=A.auth.user.company_id||"all";return f.useEffect(()=>{const l=route("year.metrics.inspeccion",{company_id:O,year:t});n(l)},[t,O]),f.useEffect(()=>{e&&(y(!0),te.get(e).then(l=>{console.log("Response:",l);const j=Ua(Number(t));l.data.events.forEach(m=>{const b=m.fecha_evento;let C=m.tipo_inspeccion;!C||C==="OTROS"?C="otros":C==="NO PLANEADA"?C="no_planeada":C=C.toLowerCase();const T=j.find(_=>_.date===b);T&&T[C]++}),g(j)}).catch(l=>{console.error("Error fetching metrics data:",l)}).finally(()=>{y(!1)}))},[e,t]),r.jsxs(q,{children:[r.jsxs(de,{className:"flex items-center gap-2 space-y-0 border-b py-5 sm:flex-row",children:[r.jsxs("div",{className:"grid flex-1 gap-1 text-center sm:text-left",children:[r.jsx(ue,{children:"Reporte general Anual"}),r.jsx(pe,{children:"Visualiza todos los reportes generados en la plataforma por todas las contratas."})]}),r.jsxs(V,{value:t,onValueChange:s,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a year",children:r.jsx(Y,{placeholder:"Select a year"})}),r.jsx(z,{className:"rounded-xl",children:S.map(l=>r.jsx(L,{value:l,className:"rounded-lg",children:l},l))})]}),r.jsxs(V,{value:i,onValueChange:o,children:[r.jsx(K,{className:"w-[160px] rounded-lg sm:ml-auto","aria-label":"Select a month",children:r.jsx(Y,{placeholder:"Select a month"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),ye.map(l=>r.jsx(L,{value:l.value,className:"rounded-lg",children:l.label},l.value))]})]}),r.jsxs(V,{value:p,onValueChange:x,children:[r.jsx(K,{className:"w-[220px] rounded-lg sm:ml-auto","aria-label":"Select a type",children:r.jsx(Y,{placeholder:"Select a type"})}),r.jsxs(z,{className:"rounded-xl",children:[r.jsx(L,{value:"all",className:"rounded-lg",children:"Todos"}),Object.keys(Ae).map(l=>r.jsx(L,{value:l,className:"rounded-lg",children:Ae[l].label},l))]})]})]}),r.jsx(H,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:c?r.jsx("div",{className:"flex h-[320px] items-center justify-center",children:r.jsx("span",{children:"Loading..."})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 flex justify-around",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Otros:"})," ",d.otros]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Comités:"})," ",d.comites]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Planeada:"})," ",d.planeada]}),r.jsxs("div",{children:[r.jsx("strong",{children:"No Planeada:"})," ",d.no_planeada]})]}),r.jsx(me,{config:Ae,className:"aspect-auto h-[320px] w-full",children:r.jsxs(xt,{data:v,children:[r.jsx(yt,{vertical:!1}),r.jsx(gt,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:l=>new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})}),r.jsx(he,{cursor:!1,content:r.jsx(xe,{labelFormatter:l=>new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),indicator:"dot"})}),Object.keys(Ae).map(l=>(p==="all"||p===l)&&r.jsx(vt,{dataKey:l,type:"monotone",stroke:Ae[l].color,strokeWidth:2,dot:!1},l)),r.jsx(bt,{content:r.jsx(jt,{})})]})})]})})]})};function yr({type:a}){const{props:e}=ee(),{type:n,companies:t,titles:s,entities:i}=e,[o,p]=f.useState(null),[x,u]=f.useState(!0);f.useEffect(()=>{n&&t&&["actos","condiciones","incidentes","inspección"].includes(n)?te.get(route("categories",{company_id:1,name:n})).then(O=>{console.log(O.data.data),p(O.data.data)}).catch(O=>{console.error(O)}).finally(()=>{u(!1)}):u(!1)},[n,t]);const g=[{title:"Dashboard",href:"/dashboard"}],c=[{text:"Actos y condiciones subestándares e incidentes",type:"cat"},{text:"Actos Subestándares",type:"actos"},{text:"Condiciones Subestándares",type:"condiciones"},{text:"Incidentes",type:"incidentes"}],y=[{text:"Actos y condiciones subestándares e incidentes",type:"yr"},{text:"Observaciones detectadas por Gerencia",type:"insp.yr"}],S=[{text:"Planeada, no planeada, comite y otros",type:"insp"},{text:"Detalles de inspección",type:"inspección"}],d=[...y,...S,...c].find(A=>A.type===n);return g.push({title:d==null?void 0:d.text,href:`/dashboard/${d==null?void 0:d.type}`}),r.jsxs(Wt,{breadcrumbs:g,children:[r.jsx(Pt,{title:(d==null?void 0:d.text)||"Dashboard"}),r.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:x?r.jsx("div",{children:"Loading..."}):n==="cat"?r.jsx(Ia,{titles:s,companies:t,entities:i}):n==="yr"?r.jsx(Wa,{}):n==="insp.yr"?r.jsx(Za,{}):n==="insp"?r.jsx(Ya,{}):n==="inspección"?r.jsx(Ba,{title:d==null?void 0:d.text,pageType:n,companies:t,entities:i,categoriesData:o}):n==="actos"||n==="condiciones"||n==="incidentes"?r.jsx($a,{title:d==null?void 0:d.text,pageType:n,companies:t,entities:i,categoriesData:o}):r.jsx("div",{children:"Gráfico no encontrado"})})]})}export{yr as default};
