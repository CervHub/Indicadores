import{r as l,j as e}from"./app-BGRtgKnc.js";import{u as q,f as M,g as J,a as K,b as L,c as Q}from"./index-DLNAdeKk.js";import{T as U,a as X,b as f,c as Y,d as Z,e as y}from"./table-c9FaAR0Q.js";import{B as T}from"./button-CE9Kfrma.js";import{S as x,a as p,b as g,c as h,f as r}from"./select-Tam4fzSJ.js";import{C as E}from"./combobox-DQVOIMtK.js";function re({columns:j,data:t}){var w;const[P,F]=l.useState([]),[o,z]=l.useState("__all__"),[i,I]=l.useState("__all__"),[c,_]=l.useState(""),[d,v]=l.useState(""),[m,G]=l.useState("__all__"),[S,b]=l.useState({pageIndex:0,pageSize:10}),O=l.useMemo(()=>{const a=new Set;return t.forEach(s=>{s.gerencia_name&&a.add(s.gerencia_name)}),Array.from(a)},[t]),V=l.useMemo(()=>{const a=new Set;return t.forEach(s=>{s.tipo_reporte&&a.add(s.tipo_reporte)}),Array.from(a)},[t]),A=l.useMemo(()=>{const a=new Set;return t.forEach(s=>{s.estado&&a.add(s.estado)}),Array.from(a)},[t]),D=l.useMemo(()=>{const a=new Set;return t.forEach(s=>{s.company_name&&a.add(s.company_name)}),Array.from(a).map(s=>({value:s,label:s}))},[t]),W=l.useMemo(()=>{const a=new Set;return t.forEach(s=>{s.company_report_name&&a.add(s.company_report_name)}),Array.from(a).map(s=>({value:s,label:s}))},[t]),N=l.useMemo(()=>{let a=t;return o!=="__all__"&&(a=a.filter(s=>s.gerencia_name===o)),i!=="__all__"&&(a=a.filter(s=>s.tipo_reporte===i)),c&&(a=a.filter(s=>s.company_name===c)),d&&(a=a.filter(s=>s.company_report_name===d)),m!=="__all__"&&(a=a.filter(s=>s.estado===m)),a},[t,o,i,c,d,m]),n=q({data:N,columns:j,getCoreRowModel:Q(),getPaginationRowModel:L(),onSortingChange:F,getSortedRowModel:K(),getFilteredRowModel:J(),state:{sorting:P,pagination:S},onPaginationChange:b,manualPagination:!1,pageCount:void 0}),B=a=>{b(s=>({...s,pageSize:Number(a),pageIndex:0}))},u=N.length,R=n.getState().pagination.pageIndex,C=n.getState().pagination.pageSize,H=u===0?0:R*C+1,k=Math.min((R+1)*C,u);return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 py-4 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Mostrar"}),e.jsxs(x,{value:S.pageSize.toString(),onValueChange:B,children:[e.jsx(p,{className:"w-full",children:e.jsx(g,{})}),e.jsxs(h,{children:[e.jsx(r,{value:"10",children:"10"}),e.jsx(r,{value:"25",children:"25"}),e.jsx(r,{value:"50",children:"50"}),e.jsx(r,{value:"100",children:"100"})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:"registros"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Gerencia"}),e.jsxs(x,{value:o,onValueChange:z,children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Todas"})}),e.jsxs(h,{children:[e.jsx(r,{value:"__all__",children:"Todas"}),O.map(a=>e.jsx(r,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Tipo Reporte"}),e.jsxs(x,{value:i,onValueChange:I,children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Todos"})}),e.jsxs(h,{children:[e.jsx(r,{value:"__all__",children:"Todos"}),V.map(a=>e.jsx(r,{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Empresa Generadora"}),e.jsx(E,{data:D,value:c,onChange:_,placeholder:"Seleccione Empresa Generadora...",className:"w-full",onInputChange:a=>{a||_("")}})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Empresa Reportada"}),e.jsx(E,{data:W,value:d,onChange:v,placeholder:"Seleccione Empresa Reportada...",className:"w-full",onInputChange:a=>{a||v("")}})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm mb-1",children:"Estado"}),e.jsxs(x,{value:m,onValueChange:G,children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Todos"})}),e.jsxs(h,{children:[e.jsx(r,{value:"__all__",children:"Todos"}),A.map(a=>e.jsx(r,{value:a,children:a},a))]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 rounded-md border",children:e.jsxs(U,{className:"text-xs",children:[e.jsx(X,{children:n.getHeaderGroups().map(a=>e.jsx(f,{children:a.headers.map(s=>e.jsx(Y,{style:{minWidth:"10px",maxWidth:"150px"},children:s.isPlaceholder?null:M(s.column.columnDef.header,s.getContext())},s.id))},a.id))}),e.jsx(Z,{children:(w=n.getRowModel().rows)!=null&&w.length?n.getRowModel().rows.map(a=>e.jsx(f,{"data-state":a.getIsSelected()&&"selected",children:a.getVisibleCells().map(s=>e.jsx(y,{style:{minWidth:"10px",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M(s.column.columnDef.cell,s.getContext())},s.id))},a.id)):e.jsx(f,{children:e.jsx(y,{colSpan:j.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between py-4 gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Mostrando ",H," a ",k," de ",u," registros"]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>n.previousPage(),disabled:!n.getCanPreviousPage(),children:"Previous"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>n.nextPage(),disabled:!n.getCanNextPage(),children:"Next"})]})]})]})}export{re as D};
