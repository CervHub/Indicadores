import{K as N,j as e,L as v,r as f}from"./app-2ocnS8h9.js";import{T as w,a as _,b as D,c as C}from"./tooltip-BEYdpRRO.js";import"./index-B1l-BCg7.js";import"./index-CVPpN8V0.js";import"./index-DFI_lVRN.js";import"./index-D9no_Jgx.js";import"./utils-Dba3_-po.js";function z(){const t=new Date,s=new Date(t);s.setMonth(t.getMonth()-1),s.getMonth()===t.getMonth()&&s.setDate(0);const o=[];let l=new Date(s),c=0;for(;l<=t;){const n=Math.floor(Math.random()*40)+10;c+=n,o.push({day:l.toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit"}),daily:n,accumulated:c}),l.setDate(l.getDate()+1)}return o}z();function T(){const[t,s]=f.useState(new Date);return f.useEffect(()=>{const o=setInterval(()=>s(new Date),1e3);return()=>clearInterval(o)},[]),e.jsxs("span",{className:"font-mono text-sm font-bold",style:{color:"#000"},children:[t.toLocaleDateString()," ",t.toLocaleTimeString()]})}function A(){const{vehicle:t,vehicleInspection:s,lastCompanyLink:o,company:l,allInspectionsHistory:c}=N().props;let n=t.code,x="",d="";l&&l.code&&o&&o.code&&(x=l.code,n=`${l.code}${o.code}`,d=l.nombre||"");const m=(t.license_plate||"").replace(/-/g,"");[(s==null?void 0:s["pre-use"])&&{tipo:s["pre-use"].tipo_inspeccion,realizado_por:s["pre-use"].realizado_por,fecha:s["pre-use"].created_at,vencimiento:s["pre-use"].vencimiento,estado:s["pre-use"].estado,observaciones:s["pre-use"].observaciones},(s==null?void 0:s.trimestral)&&{tipo:s.trimestral.tipo_inspeccion,realizado_por:s.trimestral.realizado_por,fecha:s.trimestral.created_at,vencimiento:s.trimestral.vencimiento,estado:s.trimestral.estado,observaciones:s.trimestral.observaciones},(s==null?void 0:s.semestral)&&{tipo:s.semestral.tipo_inspeccion,realizado_por:s.semestral.realizado_por,fecha:s.semestral.created_at,vencimiento:s.semestral.vencimiento,estado:s.semestral.estado,observaciones:s.semestral.observaciones},(s==null?void 0:s.anual)&&{tipo:s.anual.tipo_inspeccion,realizado_por:s.anual.realizado_por,fecha:s.anual.created_at,vencimiento:s.anual.vencimiento,estado:s.anual.estado,observaciones:s.anual.observaciones}].filter(Boolean);const g=["pre-use","trimestral","semestral","anual"],b={"pre-use":"Diaria Pre-Uso",trimestral:"Trimestral",semestral:"Semestral",anual:"Anual"},p=g.map(a=>{const r=(s==null?void 0:s[a])||{};return{tipo:r.tipo_inspeccion||b[a],realizado_por:r.realizado_por||"",fecha:r.created_at||"",vencimiento:r.vencimiento||"",estado:r.estado||"",observaciones:r.observaciones||""}}),h=p.some(a=>!a.estado||a.estado.toLowerCase()!=="aprobado"),y=h?"Desaprobado":"Aprobado",j=h?"bg-red-600 text-white":"bg-green-600 text-white";return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:`Hoja de Vida: ${m}`}),e.jsx("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center py-8 px-2",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-xl shadow-2xl flex flex-col overflow-hidden print:shadow-none print:rounded-none print:bg-white",children:[e.jsx("div",{className:"flex flex-row items-center justify-between border-b px-8 py-4 bg-gray-100",children:e.jsxs("div",{className:"flex flex-row items-center gap-4 w-full",children:[e.jsx("div",{className:`px-3 py-1 rounded-full font-bold text-base ${j}`,style:{width:"fit-content",minWidth:90,textAlign:"center"},children:y}),e.jsx("div",{className:"ml-auto text-gray-600 text-sm",children:e.jsx(T,{})})]})}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[d&&e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50 col-span-2 md:col-span-2",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Empresa"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:[d," ",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",x,")"]})]})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Placa"}),e.jsx("span",{className:"text-2xl font-extrabold tracking-widest text-gray-800",children:m})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Código de Llamada"}),e.jsx("span",{className:"text-2xl font-extrabold tracking-widest text-gray-800",children:n})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Marca"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.brand})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Modelo"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.model})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Año de Fabricación"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.year})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Clase Vehicular"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.type})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Color"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.color})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Capacidad de Pasajeros"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.seating_capacity})]}),e.jsxs("div",{className:"rounded-lg p-3 flex flex-col items-center shadow-sm bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600 font-semibold",children:"Kilometraje"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:t.mileage})]})]})}),e.jsxs("div",{className:"px-8 pb-10",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 mt-2",style:{color:"#d7282f"},children:"Historial de Inspecciones"}),e.jsx(w,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#d7282f"},children:[e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Tipo"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Realizado por"}),e.jsx("th",{className:"px-2 py-1 text-left font-bold",style:{color:"#fff"},children:"Fecha"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Vencimiento"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Estado"}),e.jsx("th",{className:"px-2 py-1 text-left font-semibold",style:{color:"#fff"},children:"Observaciones"})]})}),e.jsx("tbody",{children:p.map((a,r)=>{const i=a.observaciones||"",u=i.length>25;return e.jsxs("tr",{className:"hover:bg-red-50 border-t border-gray-200 text-xs",children:[e.jsx("td",{className:"px-2 py-1",children:a.tipo}),e.jsx("td",{className:"px-2 py-1",children:a.realizado_por}),e.jsx("td",{className:"px-2 py-1",children:a.fecha}),e.jsx("td",{className:"px-2 py-1",children:a.vencimiento}),e.jsx("td",{className:"px-2 py-1",children:a.estado}),e.jsx("td",{className:"px-2 py-1 max-w-[120px] truncate",children:u?e.jsxs(_,{children:[e.jsx(D,{asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:i.slice(0,25)+"..."})}),e.jsx(C,{children:e.jsx("span",{className:"whitespace-pre-line",children:i})})]}):i})]},r)})})]})})})]}),e.jsxs("div",{className:"border-t px-8 py-4 text-xs text-gray-400 text-center print:hidden",children:["Documento generado por el sistema de Gestión SST © ",new Date().getFullYear()]})]})})]})}export{A as default};
