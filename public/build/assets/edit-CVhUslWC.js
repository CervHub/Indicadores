import{m as C,r as m,j as e}from"./app-B3B3vDzt.js";import{I as o}from"./input-error-B7J2p72t.js";import{B as F}from"./button-CE7iUt4E.js";import{D as I,b as L,c as S,d as y,e as w}from"./dialog-o0QIXGwb.js";import{I as r}from"./input-1nEbPg3-.js";import{L as d}from"./label-C4wI0h8o.js";import{t as x}from"./index-3yArXTTO.js";import{L as z}from"./loader-circle-DHZ3fQGi.js";import"./utils-Dxu7ruf7.js";import"./index-CxAX4850.js";import"./index-BWkVxsEy.js";function J({isOpen:f=!1,onOpenChange:c,person:a}){const{data:l,setData:s,put:n,processing:j,errors:t,reset:v}=C({id:(a==null?void 0:a.id)||0,doi:(a==null?void 0:a.doi)||"",email:(a==null?void 0:a.email)||"",nombres:(a==null?void 0:a.nombres)||"",apellidos:(a==null?void 0:a.apellidos)||"",telefono:(a==null?void 0:a.telefono)||"",cargo:(a==null?void 0:a.cargo)||""}),[b,g]=m.useState(f),[D,N]=m.useState(!1);m.useEffect(()=>{g(f)},[f]),m.useEffect(()=>{a&&s({id:a.id,doi:a.doi,email:a.email,nombres:a.nombres,apellidos:a.apellidos,telefono:a.telefono,cargo:a.cargo})},[a,s]),m.useEffect(()=>{N(l.doi.trim()!==""&&l.nombres.trim()!==""&&l.apellidos.trim()!=="")},[l.doi,l.nombres,l.apellidos]);const E=i=>{i.preventDefault(),n(route("contrata.personal.update",a==null?void 0:a.id),{onSuccess:h=>{const u=h.props.flash;u.success&&(x.success(u.success),v(),g(!1),c&&c(!1)),u.error&&x.error(u.error)},onError:h=>{g(!0),x.error("Ocurrió un error al intentar actualizar la persona.")}})};return e.jsx("div",{children:e.jsx(I,{open:b,onOpenChange:i=>{g(i),c&&c(i)},children:e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(S,{children:[e.jsx(y,{children:"Editar Persona"}),e.jsx(w,{children:"Complete los campos para editar la persona."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("contrata.personal.update",a==null?void 0:a.doi),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"doi",children:"DOI"}),e.jsx(r,{id:"doi",value:l.doi,onChange:i=>s("doi",i.target.value)}),e.jsx(o,{message:t.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:l.email,onChange:i=>s("email",i.target.value)}),e.jsx(o,{message:t.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"nombres",children:"Nombres"}),e.jsx(r,{id:"nombres",value:l.nombres,onChange:i=>s("nombres",i.target.value)}),e.jsx(o,{message:t.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"apellidos",children:"Apellidos"}),e.jsx(r,{id:"apellidos",value:l.apellidos,onChange:i=>s("apellidos",i.target.value)}),e.jsx(o,{message:t.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(r,{id:"telefono",value:l.telefono,onChange:i=>s("telefono",i.target.value)}),e.jsx(o,{message:t.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"cargo",children:"Cargo"}),e.jsx(r,{id:"cargo",value:l.cargo,onChange:i=>s("cargo",i.target.value)}),e.jsx(o,{message:t.cargo})]}),e.jsxs(F,{type:"submit",className:"mt-2",disabled:j||!D,children:[j&&e.jsx(z,{className:"h-4 w-4 animate-spin"}),"Actualizar"]})]})]})})})}export{J as default};
