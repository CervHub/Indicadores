import{m as y,r as m,j as e}from"./app-BrE_DW6v.js";import{I as l}from"./input-error-BqJUiAGN.js";import{B as b}from"./button-DRinBeoB.js";import{D as R,a as _,b as L,c as T,d as V,e as P}from"./dialog-CUyr9pRU.js";import{I as n}from"./input-CrQhGnBg.js";import{L as t}from"./label-BE0lwKFF.js";import{S as w,a as B,b as k,c as A,f as H}from"./select-BYzAORup.js";import{t as g}from"./index-Dkfpp0nt.js";import{L as U}from"./loader-circle-n4Ue4q5C.js";import"./utils-CISCwvQU.js";import"./index-BepoNP-L.js";import"./createLucideIcon-CgrwBIBF.js";import"./index-17Co9tRC.js";import"./index-CM047A5K.js";import"./index-CTWSnWBA.js";import"./index-DM7GVMTz.js";import"./index-BYBiqWIa.js";import"./check-DrBqCDzO.js";function ie({isOpen:p=!1,onOpenChange:d,roles:x}){const j=x.find(s=>s.code==="RU"),C=j?j.id.toString():"",{data:r,setData:o,post:D,processing:u,errors:i,reset:h,clearErrors:f}=y({doi:"",email:"",nombres:"",apellidos:"",telefono:"",cargo:"",role_id:C}),[N,c]=m.useState(p),[S,F]=m.useState(!1);m.useEffect(()=>{c(p)},[p]),m.useEffect(()=>{F(r.doi.trim()!==""&&r.nombres.trim()!==""&&r.apellidos.trim()!=="")},[r.doi,r.nombres,r.apellidos]);const I=s=>{c(s),d&&d(s),s||(h(),f())},E=s=>{s.preventDefault(),D(route("contrata.personal.store"),{onSuccess:v=>{const a=v.props.flash;a!=null&&a.success&&(g.success(a.success),h(),f(),c(!1),d&&d(!1)),a!=null&&a.error&&g.error(a.error)},onError:v=>{c(!0),g.error("Ocurrió un error al crear la persona.")}})};return e.jsx("div",{children:e.jsxs(R,{open:N,onOpenChange:I,children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(_,{asChild:!0,children:e.jsx(b,{className:"inline-block px-4 py-2",children:"Crear Persona"})})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(T,{children:[e.jsx(V,{children:"Crear Persona"}),e.jsx(P,{children:"Complete los campos para crear una nueva persona."})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("contrata.personal.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"doi",children:"DOI"}),e.jsx(n,{id:"doi",value:r.doi,onChange:s=>o("doi",s.target.value)}),e.jsx(l,{message:i.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",value:r.email,onChange:s=>o("email",s.target.value)}),e.jsx(l,{message:i.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"nombres",children:"Nombres"}),e.jsx(n,{id:"nombres",value:r.nombres,onChange:s=>o("nombres",s.target.value)}),e.jsx(l,{message:i.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"apellidos",children:"Apellidos"}),e.jsx(n,{id:"apellidos",value:r.apellidos,onChange:s=>o("apellidos",s.target.value)}),e.jsx(l,{message:i.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(n,{id:"telefono",value:r.telefono,onChange:s=>o("telefono",s.target.value)}),e.jsx(l,{message:i.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"cargo",children:"Cargo"}),e.jsx(n,{id:"cargo",value:r.cargo,onChange:s=>o("cargo",s.target.value)}),e.jsx(l,{message:i.cargo})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"role_id",children:"Rol"}),e.jsxs(w,{value:r.role_id,onValueChange:s=>o("role_id",s),children:[e.jsx(B,{children:e.jsx(k,{placeholder:"Seleccionar rol"})}),e.jsx(A,{children:x.map(s=>e.jsxs(H,{value:s.id.toString(),children:[s.nombre," (",s.code,")"]},s.id))})]}),e.jsx(l,{message:i.role_id})]}),e.jsxs(b,{type:"submit",className:"mt-2",disabled:u||!S,children:[u&&e.jsx(U,{className:"h-4 w-4 animate-spin"}),"Crear"]})]})]})]})})}export{ie as default};
