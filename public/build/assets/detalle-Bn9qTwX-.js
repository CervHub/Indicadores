import{K as E,r,j as e,L}from"./app-DFJY1BGy.js";import{S as D}from"./stepper-uuZ90FK0.js";import{B as w}from"./button-Bc6R-Kxb.js";import{C as h,a as u,b as f,d as l}from"./card-D486TOUN.js";import{I as s}from"./input-BWsNATuj.js";import{L as a}from"./label-BLQodZug.js";import{A as I}from"./app-layout-pTNbT6c5.js";import{f as j}from"./utils-gl1Fv5mo.js";import P from"./closed-CEnCG2WE.js";import"./check-D1ERWe29.js";import"./index-4Wby4sqP.js";import"./index-VxwpWnFy.js";import"./index-BFxsZ1xd.js";import"./index-BhxNckzA.js";import"./index-DZKWfvhj.js";import"./tooltip-Dyl4vyNI.js";import"./index-DTuM4eI_.js";import"./index-DtbCXjQI.js";import"./index-BKqPsUxU.js";import"./chevrons-up-down-BY9x1ovE.js";import"./truck-nk0E01LI.js";import"./chevron-right-D94u1ioS.js";import"./index-BmHWR_y5.js";import"./index-CfMpDONp.js";import"./dialog-CXUySuDq.js";import"./loader-circle-D3ZXsUMK.js";const z=[{title:"Reportabilidad",href:"/admin/reportability"},{title:"Detalle",href:"/admin/reportability/detalle"}];function le(){const{reportability_id:d,reportability:t,isSecurityEngineer:y,empresa_nombre:b}=E().props,[n,p]=r.useState(!0),[o,c]=r.useState(null),[v,m]=r.useState(!1),[g,_]=r.useState(0),[N,C]=r.useState(x(t.estado)),F=route("inspection.download",{reportability_id:d}),S=()=>{p(!1),c(null)},R=()=>{p(!1),c("No se pudo cargar el PDF")};r.useEffect(()=>{_(i=>i+1),C(x(t.estado))},[t.estado]);function x(i){switch(i){case"Generado":return 0;case"Revisado":return 1;case"Finalizado":return 2;default:return 0}}return e.jsxs(I,{breadcrumbs:z,children:[e.jsx(L,{title:"Reportabilidad"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"grid h-full grid-cols-12 gap-4",children:[e.jsxs(h,{className:"col-span-12 h-full md:col-span-8",children:[e.jsx(u,{children:e.jsx(f,{children:"Reporte"})}),e.jsxs(l,{children:[n&&e.jsx("p",{children:"Cargando PDF..."}),o&&e.jsx("p",{children:o}),e.jsx("iframe",{src:F,width:"100%",height:"759",onLoad:S,onError:R,style:{display:n||o?"none":"block"}},g)]})]}),e.jsxs(h,{className:"col-span-12 flex h-full flex-col justify-between md:col-span-4",children:[e.jsxs("div",{children:[e.jsx(u,{children:e.jsx(f,{children:"Detalles del reporte"})}),e.jsx("br",{}),e.jsxs(l,{className:"flex flex-col gap-2 space-y-2",children:[e.jsx(D,{currentStep:N}),e.jsxs("div",{className:"space-y-2 d-none",children:[e.jsx(a,{htmlFor:"estado",children:"Estado"}),e.jsx(s,{id:"estado",type:"text",value:t.estado,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"tipo_reporte",children:"Tipo de Reporte"}),e.jsx(s,{id:"tipo_reporte",type:"text",value:t.tipo_reporte,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"company_name",children:"Compañía"}),e.jsx(s,{id:"company_name",type:"text",value:b??"",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"fecha_reporte",children:"Fecha de Reporte"}),e.jsx(s,{id:"fecha_reporte",type:"text",value:j(t.fecha_reporte),disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"fecha_evento",children:"Fecha de Evento"}),e.jsx(s,{id:"fecha_evento",type:"text",value:j(t.fecha_evento),disabled:!0})]})]})]}),e.jsx(l,{children:e.jsx(w,{variant:"destructive",className:"mt-4 w-auto",onClick:()=>m(!0),disabled:t.estado==="Finalizado"||!y,children:"Finalizar Reporte"})})]})]})}),e.jsx(P,{report_id:d,isDialogOpen:v,setIsDialogOpen:m})]})}export{le as default};
