import{U as D,r as j,j as e,L as pt,b as xt}from"./app-k-c3-IUX.js";import{F as gt,A as vt}from"./app-layout-DZFWTyUB.js";import{C as k,d as $,a as V,c as Y,e as J,b as Q}from"./card-Dhtq3Av6.js";import{E as bt}from"./eye-H0nedwk7.js";import{C as yt}from"./circle-check-big-E7JdtSLw.js";import{d as W,e as K,m as je,i as ce,h as Ne,A as Je,j as _,k as X,l as jt,n as Le,o as Nt,p as M,u as Qe,q as we,G as et,r as de,s as Ce,D as wt,S as We,t as Ct,v as At,w as tt,E as Dt,x as Pt,y as at,g as rt,B as z,X as F,Y as G,f as st,c as Be,C as ee,a as te,z as ae,b as Me,R as Fe}from"./chart-DaBWAiVV.js";import{e as Ge}from"./utils-CISCwvQU.js";import{T as re}from"./trending-up-Dsv2z4NH.js";import{S as Ae,a as De,b as Pe,c as Se,f as se}from"./select-Bx-P63rG.js";import{B as L}from"./button-DS4OftCH.js";import{I as oe}from"./input-BmLBwXHo.js";import{C as ge}from"./chevron-left-BGKerM2r.js";import{C as ve}from"./chevron-right-CzHWkwYl.js";import{S as be}from"./search-CDN3zHzK.js";import{B as $e}from"./badge-BAKPKg4E.js";import{T as St,a as Rt,b as ze,c as H,d as Et,e as U}from"./table-DfL6ig8B.js";import{T as Ot,a as Mt,b as Tt,c as kt}from"./tooltip-D3tBfP_G.js";import{C as $t}from"./combobox-CH2ZjVqs.js";import"./index-BnhXOjFJ.js";import"./index-B3PbW1eo.js";import"./index-Ch_9LA9U.js";import"./createLucideIcon-SZDYLwmW.js";import"./index-D342dBXe.js";import"./index-DrGBlFrz.js";import"./index-qSiOHZki.js";import"./check-CrF9bga2.js";import"./chevrons-up-down-zkKt1COi.js";import"./truck-D78V83WZ.js";import"./index-BUm7skBF.js";import"./index-Chjiymov.js";import"./index-BL9xfY7b.js";import"./trash-2-quT4AUHS.js";var zt=["layout","type","stroke","connectNulls","isRange","ref"],Lt=["key"],nt;function ue(a){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(a)}function ot(a,t){if(a==null)return{};var s=It(a,t),r,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(l=0;l<o.length;l++)r=o[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function It(a,t){if(a==null)return{};var s={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(t.indexOf(r)>=0)continue;s[r]=a[r]}return s}function ne(){return ne=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},ne.apply(this,arguments)}function Ve(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,r)}return s}function q(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ve(Object(s),!0).forEach(function(r){B(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Ve(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function _t(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,lt(r.key),r)}}function Kt(a,t,s){return t&&Ye(a.prototype,t),s&&Ye(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function Bt(a,t,s){return t=Re(t),Ft(a,it()?Reflect.construct(t,s||[],Re(a).constructor):t.apply(a,s))}function Ft(a,t){if(t&&(ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gt(a)}function Gt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function it(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(it=function(){return!!a})()}function Re(a){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Re(a)}function Ut(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ie(a,t)}function Ie(a,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Ie(a,t)}function B(a,t,s){return t=lt(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function lt(a){var t=Wt(a,"string");return ue(t)=="symbol"?t:t+""}function Wt(a,t){if(ue(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(ue(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ie=function(a){function t(){var s;_t(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return s=Bt(this,t,[].concat(l)),B(s,"state",{isAnimationFinished:!0}),B(s,"id",Qe("recharts-area-")),B(s,"handleAnimationEnd",function(){var u=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),we(u)&&u()}),B(s,"handleAnimationStart",function(){var u=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),we(u)&&u()}),s}return Ut(t,a),Kt(t,[{key:"renderDots",value:function(r,l,o){var u=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(u&&!c)return null;var p=this.props,f=p.dot,m=p.points,x=p.dataKey,n=W(this.props,!1),y=W(f,!0),h=m.map(function(d,v){var N=q(q(q({key:"dot-".concat(v),r:3},n),y),{},{index:v,cx:d.x,cy:d.y,dataKey:x,value:d.value,payload:d.payload,points:m});return t.renderDotItem(f,N)}),i={clipPath:r?"url(#clipPath-".concat(l?"":"dots-").concat(o,")"):null};return D.createElement(K,ne({className:"recharts-area-dots"},i),h)}},{key:"renderHorizontalRect",value:function(r){var l=this.props,o=l.baseLine,u=l.points,c=l.strokeWidth,p=u[0].x,f=u[u.length-1].x,m=r*Math.abs(p-f),x=je(u.map(function(n){return n.y||0}));return ce(o)&&typeof o=="number"?x=Math.max(o,x):o&&Array.isArray(o)&&o.length&&(x=Math.max(je(o.map(function(n){return n.y||0})),x)),ce(x)?D.createElement("rect",{x:p<f?p:p-m,y:0,width:m,height:Math.floor(x+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var l=this.props,o=l.baseLine,u=l.points,c=l.strokeWidth,p=u[0].y,f=u[u.length-1].y,m=r*Math.abs(p-f),x=je(u.map(function(n){return n.x||0}));return ce(o)&&typeof o=="number"?x=Math.max(o,x):o&&Array.isArray(o)&&o.length&&(x=Math.max(je(o.map(function(n){return n.x||0})),x)),ce(x)?D.createElement("rect",{x:0,y:p<f?p:p-m,width:x+(c?parseInt("".concat(c),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(r){var l=this.props.layout;return l==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,l,o,u){var c=this.props,p=c.layout,f=c.type,m=c.stroke,x=c.connectNulls,n=c.isRange;c.ref;var y=ot(c,zt);return D.createElement(K,{clipPath:o?"url(#clipPath-".concat(u,")"):null},D.createElement(Ne,ne({},W(y,!0),{points:r,connectNulls:x,type:f,baseLine:l,layout:p,stroke:"none",className:"recharts-area-area"})),m!=="none"&&D.createElement(Ne,ne({},W(this.props,!1),{className:"recharts-area-curve",layout:p,type:f,connectNulls:x,fill:"none",points:r})),m!=="none"&&n&&D.createElement(Ne,ne({},W(this.props,!1),{className:"recharts-area-curve",layout:p,type:f,connectNulls:x,fill:"none",points:l})))}},{key:"renderAreaWithAnimation",value:function(r,l){var o=this,u=this.props,c=u.points,p=u.baseLine,f=u.isAnimationActive,m=u.animationBegin,x=u.animationDuration,n=u.animationEasing,y=u.animationId,h=this.state,i=h.prevPoints,d=h.prevBaseLine;return D.createElement(Je,{begin:m,duration:x,isActive:f,easing:n,from:{t:0},to:{t:1},key:"area-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var N=v.t;if(i){var b=i.length/c.length,g=c.map(function(P,E){var S=Math.floor(E*b);if(i[S]){var R=i[S],O=_(R.x,P.x),I=_(R.y,P.y);return q(q({},P),{},{x:O(N),y:I(N)})}return P}),w;if(ce(p)&&typeof p=="number"){var C=_(d,p);w=C(N)}else if(X(p)||jt(p)){var A=_(d,0);w=A(N)}else w=p.map(function(P,E){var S=Math.floor(E*b);if(d[S]){var R=d[S],O=_(R.x,P.x),I=_(R.y,P.y);return q(q({},P),{},{x:O(N),y:I(N)})}return P});return o.renderAreaStatically(g,w,r,l)}return D.createElement(K,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(l)},o.renderClipRect(N))),D.createElement(K,{clipPath:"url(#animationClipPath-".concat(l,")")},o.renderAreaStatically(c,p,r,l)))})}},{key:"renderArea",value:function(r,l){var o=this.props,u=o.points,c=o.baseLine,p=o.isAnimationActive,f=this.state,m=f.prevPoints,x=f.prevBaseLine,n=f.totalLength;return p&&u&&u.length&&(!m&&n>0||!Le(m,u)||!Le(x,c))?this.renderAreaWithAnimation(r,l):this.renderAreaStatically(u,c,r,l)}},{key:"render",value:function(){var r,l=this.props,o=l.hide,u=l.dot,c=l.points,p=l.className,f=l.top,m=l.left,x=l.xAxis,n=l.yAxis,y=l.width,h=l.height,i=l.isAnimationActive,d=l.id;if(o||!c||!c.length)return null;var v=this.state.isAnimationFinished,N=c.length===1,b=Ge("recharts-area",p),g=x&&x.allowDataOverflow,w=n&&n.allowDataOverflow,C=g||w,A=X(d)?this.id:d,P=(r=W(u,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=P.r,S=E===void 0?3:E,R=P.strokeWidth,O=R===void 0?2:R,I=Nt(u)?u:{},le=I.clipDot,Ue=le===void 0?!0:le,ye=S*2+O;return D.createElement(K,{className:b},g||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(A)},D.createElement("rect",{x:g?m:m-y/2,y:w?f:f-h/2,width:g?y:y*2,height:w?h:h*2})),!Ue&&D.createElement("clipPath",{id:"clipPath-dots-".concat(A)},D.createElement("rect",{x:m-ye/2,y:f-ye/2,width:y+ye,height:h+ye}))):null,N?null:this.renderArea(C,A),(u||N)&&this.renderDots(C,Ue,A),(!i||v)&&M.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.animationId!==l.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:l.curPoints,prevBaseLine:l.curBaseLine}:r.points!==l.curPoints||r.baseLine!==l.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(j.PureComponent);nt=ie;B(ie,"displayName","Area");B(ie,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!et.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});B(ie,"getBaseValue",function(a,t,s,r){var l=a.layout,o=a.baseValue,u=t.props.baseValue,c=u??o;if(ce(c)&&typeof c=="number")return c;var p=l==="horizontal"?r:s,f=p.scale.domain();if(p.type==="number"){var m=Math.max(f[0],f[1]),x=Math.min(f[0],f[1]);return c==="dataMin"?x:c==="dataMax"||m<0?m:Math.max(Math.min(f[0],f[1]),0)}return c==="dataMin"?f[0]:c==="dataMax"?f[1]:f[0]});B(ie,"getComposedData",function(a){var t=a.props,s=a.item,r=a.xAxis,l=a.yAxis,o=a.xAxisTicks,u=a.yAxisTicks,c=a.bandSize,p=a.dataKey,f=a.stackedData,m=a.dataStartIndex,x=a.displayedData,n=a.offset,y=t.layout,h=f&&f.length,i=nt.getBaseValue(t,s,r,l),d=y==="horizontal",v=!1,N=x.map(function(g,w){var C;h?C=f[m+w]:(C=de(g,p),Array.isArray(C)?v=!0:C=[i,C]);var A=C[1]==null||h&&de(g,p)==null;return d?{x:Ce({axis:r,ticks:o,bandSize:c,entry:g,index:w}),y:A?null:l.scale(C[1]),value:C,payload:g}:{x:A?null:r.scale(C[1]),y:Ce({axis:l,ticks:u,bandSize:c,entry:g,index:w}),value:C,payload:g}}),b;return h||v?b=N.map(function(g){var w=Array.isArray(g.value)?g.value[0]:null;return d?{x:g.x,y:w!=null&&g.y!=null?l.scale(w):null}:{x:w!=null?r.scale(w):null,y:g.y}}):b=d?l.scale(i):r.scale(i),q({points:N,baseLine:b,layout:y,isRange:v},n)});B(ie,"renderDotItem",function(a,t){var s;if(D.isValidElement(a))s=D.cloneElement(a,t);else if(we(a))s=a(t);else{var r=Ge("recharts-area-dot",typeof a!="boolean"?a.className:""),l=t.key,o=ot(t,Lt);s=D.createElement(wt,ne({},o,{key:l,className:r}))}return s});function me(a){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(a)}function Vt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,ut(r.key),r)}}function Ht(a,t,s){return t&&Yt(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function qt(a,t,s){return t=Ee(t),Xt(a,ct()?Reflect.construct(t,s||[],Ee(a).constructor):t.apply(a,s))}function Xt(a,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zt(a)}function Zt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ct(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ct=function(){return!!a})()}function Ee(a){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ee(a)}function Jt(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&_e(a,t)}function _e(a,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},_e(a,t)}function dt(a,t,s){return t=ut(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function ut(a){var t=Qt(a,"string");return me(t)=="symbol"?t:t+""}function Qt(a,t){if(me(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(me(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var Te=function(a){function t(){return Vt(this,t),qt(this,t,arguments)}return Jt(t,a),Ht(t,[{key:"render",value:function(){return null}}])}(D.Component);dt(Te,"displayName","ZAxis");dt(Te,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ea=["option","isActive"];function pe(){return pe=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},pe.apply(this,arguments)}function ta(a,t){if(a==null)return{};var s=aa(a,t),r,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(l=0;l<o.length;l++)r=o[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function aa(a,t){if(a==null)return{};var s={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(t.indexOf(r)>=0)continue;s[r]=a[r]}return s}function ra(a){var t=a.option,s=a.isActive,r=ta(a,ea);return typeof t=="string"?D.createElement(We,pe({option:D.createElement(Ct,pe({type:t},r)),isActive:s,shapeType:"symbols"},r)):D.createElement(We,pe({option:t,isActive:s,shapeType:"symbols"},r))}function he(a){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(a)}function xe(){return xe=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},xe.apply(this,arguments)}function He(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,r)}return s}function T(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?He(Object(s),!0).forEach(function(r){Z(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):He(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function sa(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,ht(r.key),r)}}function na(a,t,s){return t&&qe(a.prototype,t),s&&qe(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function oa(a,t,s){return t=Oe(t),ia(a,mt()?Reflect.construct(t,s||[],Oe(a).constructor):t.apply(a,s))}function ia(a,t){if(t&&(he(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return la(a)}function la(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function mt(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mt=function(){return!!a})()}function Oe(a){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Oe(a)}function ca(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ke(a,t)}function Ke(a,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Ke(a,t)}function Z(a,t,s){return t=ht(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function ht(a){var t=da(a,"string");return he(t)=="symbol"?t:t+""}function da(a,t){if(he(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(he(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ke=function(a){function t(){var s;sa(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return s=oa(this,t,[].concat(l)),Z(s,"state",{isAnimationFinished:!1}),Z(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),Z(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),Z(s,"id",Qe("recharts-scatter-")),s}return ca(t,a),na(t,[{key:"renderSymbolsStatically",value:function(r){var l=this,o=this.props,u=o.shape,c=o.activeShape,p=o.activeIndex,f=W(this.props,!1);return r.map(function(m,x){var n=p===x,y=n?c:u,h=T(T({},f),m);return D.createElement(K,xe({className:"recharts-scatter-symbol",key:"symbol-".concat(m==null?void 0:m.cx,"-").concat(m==null?void 0:m.cy,"-").concat(m==null?void 0:m.size,"-").concat(x)},At(l.props,m,x),{role:"img"}),D.createElement(ra,xe({option:y,isActive:n,key:"symbol-".concat(x)},h)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,l=this.props,o=l.points,u=l.isAnimationActive,c=l.animationBegin,p=l.animationDuration,f=l.animationEasing,m=l.animationId,x=this.state.prevPoints;return D.createElement(Je,{begin:c,duration:p,isActive:u,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var y=n.t,h=o.map(function(i,d){var v=x&&x[d];if(v){var N=_(v.cx,i.cx),b=_(v.cy,i.cy),g=_(v.size,i.size);return T(T({},i),{},{cx:N(y),cy:b(y),size:g(y)})}var w=_(0,i.size);return T(T({},i),{},{size:w(y)})});return D.createElement(K,null,r.renderSymbolsStatically(h))})}},{key:"renderSymbols",value:function(){var r=this.props,l=r.points,o=r.isAnimationActive,u=this.state.prevPoints;return o&&l&&l.length&&(!u||!Le(u,l))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(l)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,u=l.xAxis,c=l.yAxis,p=l.children,f=tt(p,Dt);return f?f.map(function(m,x){var n=m.props,y=n.direction,h=n.dataKey;return D.cloneElement(m,{key:"".concat(y,"-").concat(h,"-").concat(o[x]),data:o,xAxis:u,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(d,v){return{x:d.cx,y:d.cy,value:y==="x"?+d.node.x:+d.node.y,errorVal:de(d,v)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,l=r.points,o=r.line,u=r.lineType,c=r.lineJointType,p=W(this.props,!1),f=W(o,!1),m,x;if(u==="joint")m=l.map(function(b){return{x:b.cx,y:b.cy}});else if(u==="fitting"){var n=Pt(l),y=n.xmin,h=n.xmax,i=n.a,d=n.b,v=function(g){return i*g+d};m=[{x:y,y:v(y)},{x:h,y:v(h)}]}var N=T(T(T({},p),{},{fill:"none",stroke:p&&p.fill},f),{},{points:m});return D.isValidElement(o)?x=D.cloneElement(o,N):we(o)?x=o(N):x=D.createElement(Ne,xe({},N,{type:c})),D.createElement(K,{className:"recharts-scatter-line",key:"recharts-scatter-line"},x)}},{key:"render",value:function(){var r=this.props,l=r.hide,o=r.points,u=r.line,c=r.className,p=r.xAxis,f=r.yAxis,m=r.left,x=r.top,n=r.width,y=r.height,h=r.id,i=r.isAnimationActive;if(l||!o||!o.length)return null;var d=this.state.isAnimationFinished,v=Ge("recharts-scatter",c),N=p&&p.allowDataOverflow,b=f&&f.allowDataOverflow,g=N||b,w=X(h)?this.id:h;return D.createElement(K,{className:v,clipPath:g?"url(#clipPath-".concat(w,")"):null},N||b?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(w)},D.createElement("rect",{x:N?m:m-n/2,y:b?x:x-y/2,width:N?n:n*2,height:b?y:y*2}))):null,u&&this.renderLine(),this.renderErrorBar(),D.createElement(K,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!i||d)&&M.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.animationId!==l.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:l.curPoints}:r.points!==l.curPoints?{curPoints:r.points}:null}}])}(j.PureComponent);Z(ke,"displayName","Scatter");Z(ke,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!et.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Z(ke,"getComposedData",function(a){var t=a.xAxis,s=a.yAxis,r=a.zAxis,l=a.item,o=a.displayedData,u=a.xAxisTicks,c=a.yAxisTicks,p=a.offset,f=l.props.tooltipType,m=tt(l.props.children,at),x=X(t.dataKey)?l.props.dataKey:t.dataKey,n=X(s.dataKey)?l.props.dataKey:s.dataKey,y=r&&r.dataKey,h=r?r.range:Te.defaultProps.range,i=h&&h[0],d=t.scale.bandwidth?t.scale.bandwidth():0,v=s.scale.bandwidth?s.scale.bandwidth():0,N=o.map(function(b,g){var w=de(b,x),C=de(b,n),A=!X(y)&&de(b,y)||"-",P=[{name:X(t.dataKey)?l.props.name:t.name||t.dataKey,unit:t.unit||"",value:w,payload:b,dataKey:x,type:f},{name:X(s.dataKey)?l.props.name:s.name||s.dataKey,unit:s.unit||"",value:C,payload:b,dataKey:n,type:f}];A!=="-"&&P.push({name:r.name||r.dataKey,unit:r.unit||"",value:A,payload:b,dataKey:y,type:f});var E=Ce({axis:t,ticks:u,bandSize:d,entry:b,index:g,dataKey:x}),S=Ce({axis:s,ticks:c,bandSize:v,entry:b,index:g,dataKey:n}),R=A!=="-"?r.scale(A):i,O=Math.sqrt(Math.max(R,0)/Math.PI);return T(T({},b),{},{cx:E,cy:S,x:E-O,y:S-O,xAxis:t,yAxis:s,zAxis:r,width:2*O,height:2*O,size:R,node:{x:w,y:C,z:A},tooltipPayload:P,tooltipPosition:{x:E,y:S},payload:b},m&&m[g]&&m[g].props)});return T({points:N},p)});var fe=rt({chartName:"BarChart",GraphicalChild:z,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:F},{axisType:"yAxis",AxisComp:G}],formatAxisMap:st}),ft=rt({chartName:"ComposedChart",GraphicalChild:[Be,ie,z,ke],axisComponents:[{axisType:"xAxis",AxisComp:F},{axisType:"yAxis",AxisComp:G},{axisType:"zAxis",AxisComp:Te}],formatAxisMap:st});function ua({data:a=[]}){const t=j.useMemo(()=>{const s={generados:0,visualizados:0,cerrados:0};return a.forEach(r=>{switch(r.estadoReporte){case"Generado":s.generados++;break;case"Visualizado":s.visualizados++;break;case"Cerrado":s.cerrados++;break}}),s},[a]);return e.jsxs("div",{className:"flex flex-col gap-3 h-[200px]",children:[e.jsx(k,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Generados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.generados})]})})}),e.jsx(k,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Visualizados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.visualizados})]})})}),e.jsx(k,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Cerrados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.cerrados})]})})})]})}const Xe={count:{label:"Reportes"},cumulative:{label:"Línea",color:"#dc2626"},generado:{label:"GENERADO",color:"hsl(var(--chart-1))"},visualizado:{label:"VISUALIZADO",color:"hsl(var(--chart-2))"},cerrado:{label:"CERRADO",color:"hsl(var(--chart-3))"}};function ma({data:a=[]}){const t=j.useMemo(()=>{const o={generado:0,visualizado:0,cerrado:0};a.forEach(c=>{var f;const p=(f=c.estadoReporte)==null?void 0:f.toLowerCase();p==="generado"?o.generado++:p==="visualizado"?o.visualizado++:p==="cerrado"&&o.cerrado++});const u=o.generado+o.visualizado+o.cerrado;return[{status:"generado",count:o.generado,cumulative:o.generado,label:u>0?`${o.generado} (${(o.generado/u*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-generado)"},{status:"visualizado",count:o.visualizado,cumulative:o.visualizado,label:u>0?`${o.visualizado} (${(o.visualizado/u*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-visualizado)"},{status:"cerrado",count:o.cerrado,cumulative:o.cerrado,label:u>0?`${o.cerrado} (${(o.cerrado/u*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-cerrado)"}]},[a]),s=j.useMemo(()=>{let o=0,u=0;return t.forEach((c,p)=>{c.count>o&&(o=c.count,u=p)}),u},[t]),r=j.useMemo(()=>t.reduce((o,u)=>o+u.count,0),[t]),l=j.useMemo(()=>{var u;const o=t[s];return o?(u=Xe[o.status])==null?void 0:u.label:""},[t,s]);return e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(Y,{children:"Distribución de reportes por estado"})}),e.jsx($,{children:e.jsx(ee,{config:Xe,className:"h-[100px] w-full",children:e.jsxs(ft,{accessibilityLayer:!0,data:t,margin:{top:20},children:[e.jsx(te,{vertical:!0,horizontal:!1}),e.jsx(F,{dataKey:"status",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:o=>o.toUpperCase()}),e.jsx(G,{hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(Me,{})}),e.jsx(z,{dataKey:"count",strokeWidth:2,radius:8,activeIndex:s,activeBar:({...o})=>e.jsx(Fe,{...o,fillOpacity:.8,stroke:o.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})}),e.jsx(Be,{type:"linear",dataKey:"cumulative",stroke:"#dc2626",strokeWidth:3,dot:{r:6,fill:"#dc2626"},activeDot:{r:8,stroke:"#dc2626",strokeWidth:2,fill:"#dc2626"}})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[l," es el estado más común ",e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Mostrando ",r," reportes en total"]})]})]})}const ha={count:{label:"Reportes Cerrados"},percentage:{label:"Línea %",color:"#dc2626"},cerrados:{label:"CERRADOS",color:"hsl(var(--chart-3))"}};function fa({data:a=[]}){const[t,s]=j.useState("month"),[r,l]=j.useState("percentage"),o=j.useMemo(()=>{const f={};a.forEach(x=>{var h;const n=new Date(x.fechaEvento),y=t==="month"?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`:`${n.getFullYear()}`;f[y]||(f[y]={total:0,cerrados:0}),f[y].total++,((h=x.estadoReporte)==null?void 0:h.toLowerCase())==="cerrado"&&f[y].cerrados++});const m=[];if(a.length===0){const x=new Date;if(t==="month")for(let n=5;n>=0;n--){const y=new Date(x.getFullYear(),x.getMonth()-n,1),h=`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}`;m.push(h)}else for(let n=4;n>=0;n--){const y=x.getFullYear()-n;m.push(y.toString())}}else{const x=a.map(h=>new Date(h.fechaEvento)),n=new Date(Math.min(...x.map(h=>h.getTime()))),y=new Date(Math.max(...x.map(h=>h.getTime())));if(t==="month"){const h=new Date(n.getFullYear(),n.getMonth(),1),i=new Date(y.getFullYear(),y.getMonth(),1),d=new Date(h);for(;d<=i;){const v=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;m.push(v),d.setMonth(d.getMonth()+1)}}else for(let h=n.getFullYear();h<=y.getFullYear();h++)m.push(h.toString())}return m.map(x=>{const n=f[x]||{total:0,cerrados:0},y=n.total>0?n.cerrados/n.total*100:0;let h;if(t==="month"){const[i,d]=x.split("-");h=new Date(parseInt(i),parseInt(d)-1,1).toLocaleDateString("es-ES",{month:"short",year:"2-digit"})}else h=x;return{period:h,count:n.cerrados,percentage:y,label:`${n.cerrados}/${n.total} (${y.toFixed(1)}%)`,fill:"var(--color-cerrados)"}})},[a,t]),u=j.useMemo(()=>{let f=0,m=0;return o.forEach((x,n)=>{x.count>f&&(f=x.count,m=n)}),m},[o]),c=j.useMemo(()=>o.reduce((f,m)=>f+m.count,0),[o]),p=j.useMemo(()=>o.length===0?0:(o.reduce((m,x)=>m+x.percentage,0)/o.length).toFixed(1),[o]);return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsx(Q,{children:"Reportes Generados y Porcentaje de Cierre por Fecha"}),e.jsx(Y,{children:"Reportes generados y porcentaje de cierre por fecha"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ae,{value:t,onValueChange:f=>s(f),children:[e.jsx(De,{className:"w-32",children:e.jsx(Pe,{})}),e.jsxs(Se,{children:[e.jsx(se,{value:"month",children:"Por Meses"}),e.jsx(se,{value:"year",children:"Por Años"})]})]}),e.jsxs(Ae,{value:r,onValueChange:f=>l(f),children:[e.jsx(De,{className:"w-32",children:e.jsx(Pe,{})}),e.jsxs(Se,{children:[e.jsx(se,{value:"percentage",children:"Línea %"}),e.jsx(se,{value:"value",children:"Línea Valor"})]})]})]})]}),e.jsx($,{children:e.jsx(ee,{config:ha,className:"h-full w-full",children:e.jsxs(ft,{accessibilityLayer:!0,data:o,margin:{top:30},children:[e.jsx(te,{vertical:!0,horizontal:!1}),e.jsx(F,{dataKey:"period",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(G,{hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(Me,{})}),e.jsx(z,{dataKey:"count",strokeWidth:2,radius:8,activeIndex:u,activeBar:({...f})=>e.jsx(Fe,{...f,fillOpacity:.8,stroke:f.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})}),e.jsx(Be,{type:"linear",dataKey:r==="percentage"?"percentage":"count",stroke:"#dc2626",strokeWidth:3,dot:{r:6,fill:"#dc2626"},activeDot:{r:8,stroke:"#dc2626",strokeWidth:2,fill:"#dc2626"}})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:["Promedio de cierre: ",p,"% ",e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total de ",c," reportes cerrados"]})]})]})}const pa={cerrados:{label:"Reportes Cerrados",color:"#3b82f6"},label:{color:"var(--background)"}};function xa({data:a=[]}){const t=j.useMemo(()=>{const o={};a.forEach(c=>{var p;if(c.nombreGerencia){const f=c.nombreGerencia;o[f]||(o[f]={total:0,cerrados:0}),o[f].total++,((p=c.estadoReporte)==null?void 0:p.toLowerCase())==="cerrado"&&o[f].cerrados++}});const u=["#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"];return Object.entries(o).map(([c,p],f)=>({gerencia:(c.length>15,c),fullGerencia:c,cerrados:p.cerrados,total:p.total,ratio:`${p.cerrados}/${p.total}`,percentage:p.total>0?(p.cerrados/p.total*100).toFixed(1):"0",fill:u[f%u.length]})).sort((c,p)=>p.cerrados-c.cerrados).slice(0,8)},[a]),s=j.useMemo(()=>t.reduce((o,u)=>o+u.cerrados,0),[t]),r=j.useMemo(()=>t.reduce((o,u)=>o+u.total,0),[t]),l=j.useMemo(()=>t.length>0?t[0]:null,[t]);return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsx(Q,{children:"Reportes Cerrados por Gerencia"}),e.jsx(Y,{children:"Cantidad de reportes cerrados por cada gerencia"})]}),e.jsx($,{children:e.jsx(ee,{config:pa,className:"h-full w-full",children:e.jsxs(fe,{accessibilityLayer:!0,data:t,layout:"vertical",margin:{right:50},children:[e.jsx(te,{horizontal:!1}),e.jsx(G,{dataKey:"gerencia",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,hide:!0}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(Me,{indicator:"line"})}),e.jsxs(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:[e.jsx(M,{dataKey:"gerencia",position:"insideLeft",offset:8,className:"fill-white",fontSize:12,fontWeight:"bold"}),e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:12,fontWeight:"bold"})]})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[l&&`${l.fullGerencia} lidera: ${l.ratio} (${l.percentage}%)`," ",e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",s,"/",r," reportes cerrados (",r>0?(s/r*100).toFixed(1):0,"%)"]})]})]})}const ga={cerrados:{label:"Reportes Cerrados",color:"#10b981"},label:{color:"var(--background)"}};function va({data:a=[]}){const[t,s]=j.useState(0),[r,l]=j.useState(""),o=10;j.useEffect(()=>{s(0)},[r]);const u=j.useMemo(()=>{const i={};a.forEach(b=>{var A;const g=b.idUsuarioCierre||"sin-id",w=b.nombreUsuarioCierre||"Sin encargado de cierre",C=`${g}-${w}`;i[C]||(i[C]={cerrados:0,noCerrados:0,total:0,idUsuario:g,nombre:w}),i[C].total+=1,((A=b.estadoReporte)==null?void 0:A.toLowerCase())==="cerrado"?i[C].cerrados+=1:i[C].noCerrados+=1});const d=Object.entries(i).sort(([,b],[,g])=>g.cerrados-b.cerrados),v=d.length,N=(b,g)=>{const w=b/Math.max(g-1,1),C=127,A=29,P=29,E=254,S=242,R=242,O=Math.round(C+(E-C)*w),I=Math.round(A+(S-A)*w),le=Math.round(P+(R-P)*w);return`rgb(${O}, ${I}, ${le})`};return d.map(([b,g],w)=>({responsable:g.nombre.length>10?g.nombre.substring(0,10)+"...":g.nombre,fullResponsable:g.nombre,idUsuario:g.idUsuario,cerrados:g.cerrados,noCerrados:g.noCerrados,total:g.total,ratio:`${g.cerrados}/${g.total}`,porcentaje:g.total>0?Math.round(g.cerrados/g.total*100):0,fill:N(w,v),globalRank:w+1}))},[a]),c=j.useMemo(()=>r.trim()?u.filter(i=>i.fullResponsable.toLowerCase().includes(r.toLowerCase())):u,[u,r]),p=j.useMemo(()=>{const i=t*o;return c.slice(i,i+o).map(d=>({...d,fill:d.fill}))},[c,t]),f=Math.ceil(c.length/o),m=j.useMemo(()=>u.reduce((i,d)=>i+d.cerrados,0),[u]),x=j.useMemo(()=>u.reduce((i,d)=>i+d.total,0),[u]),n=j.useMemo(()=>u.length>0?u[0]:null,[u]),y=j.useMemo(()=>{const i=u.find(d=>d.idUsuario==="sin-id");return i?i.total:0},[u]),h=({active:i,payload:d,label:v})=>{if(i&&d&&d.length){const N=d[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:N.fullResponsable}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",N.idUsuario]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Cerrados: ",N.cerrados," de ",N.total," (",N.porcentaje,"%)"]})]})}return null};return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Responsable de Cierre"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," responsables • "]}):null,"Mostrando ",t*o+1,"-",Math.min((t+1)*o,c.length)," de"," ",c.length," responsables"]})]}),f>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(i=>Math.max(0,i-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:[t+1," / ",f]}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(i=>Math.min(f-1,i+1)),disabled:t===f-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(be,{className:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),e.jsx(oe,{placeholder:"Buscar responsable...",value:r,onChange:i=>l(i.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(ee,{config:ga,className:"h-full w-full",children:e.jsxs(fe,{data:p,layout:"vertical",margin:{left:0,right:80,top:0,bottom:0},children:[e.jsx(te,{horizontal:!1}),e.jsx(G,{dataKey:"responsable",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:75,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(h,{})}),e.jsx(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[n&&`${n.fullResponsable} lidera con ${n.ratio} reportes (${n.porcentaje}%)`,e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",m,"/",x," reportes cerrados (",Math.round(m/x*100),"%) • Sin encargado:"," ",y]})]})]})}const ba={promedioDias:{label:"Días Promedio",color:"#f59e0b"},alto:{label:"Alto",color:"#dc2626"},medio:{label:"Medio",color:"#f59e0b"},bajo:{label:"Bajo",color:"#16a34a"}};function ya({data:a=[]}){const t=j.useMemo(()=>{const c={};a.forEach(m=>{var x;if(((x=m.estadoReporte)==null?void 0:x.toLowerCase())==="cerrado"&&m.nivelGravedad&&m.fechaReporte&&m.reportClosedAt){const n=m.nivelGravedad.toLowerCase(),y=new Date(m.fechaReporte),i=new Date(m.reportClosedAt).getTime()-y.getTime(),d=Math.ceil(i/(1e3*60*60*24));c[n]||(c[n]={totalDias:0,cantidad:0}),c[n].totalDias+=d,c[n].cantidad+=1}});const p=["alto","medio","bajo"],f={alto:"#dc2626",medio:"#f59e0b",bajo:"#16a34a"};return p.filter(m=>c[m]).map(m=>{const x=c[m],n=x.cantidad>0?Math.round(x.totalDias/x.cantidad):0;return{gravedad:m.charAt(0).toUpperCase()+m.slice(1),promedioDias:n,cantidad:x.cantidad,fill:f[m],label:`${n} días (${x.cantidad} reportes)`}})},[a]),s=j.useMemo(()=>a.filter(c=>{var p;return((p=c.estadoReporte)==null?void 0:p.toLowerCase())==="cerrado"}).length,[a]),r=j.useMemo(()=>t.reduce((c,p)=>c+p.cantidad,0),[t]),l=j.useMemo(()=>{if(t.length===0)return 0;const c=t.reduce((p,f)=>p+f.promedioDias*f.cantidad,0);return Math.round(c/r)},[t,r]),o=j.useMemo(()=>{let c=0,p=0;return t.forEach((f,m)=>{f.promedioDias>c&&(c=f.promedioDias,p=m)}),p},[t]),u=j.useMemo(()=>t.reduce((c,p)=>p.promedioDias>c.promedioDias?p:c,t[0]||{gravedad:"",promedioDias:0}),[t]);return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsx(Q,{children:"Días de Cierre Promedio por Nivel de Gravedad"}),e.jsx(Y,{children:"Tiempo promedio de cierre según el nivel de gravedad del reporte"})]}),e.jsx($,{children:e.jsx(ee,{config:ba,className:"h-full w-full",children:e.jsxs(fe,{accessibilityLayer:!0,data:t,margin:{top:30,right:30,left:20,bottom:20},children:[e.jsx(te,{vertical:!1,horizontal:!0}),e.jsx(F,{dataKey:"gravedad",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(G,{hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(Me,{formatter:(c,p,f)=>[`${c} días promedio`,`${f.payload.cantidad} reportes`]})}),e.jsx(z,{dataKey:"promedioDias",strokeWidth:2,radius:8,activeIndex:o,activeBar:({...c})=>e.jsx(Fe,{...c,fillOpacity:.8,stroke:c.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[u.gravedad&&`Gravedad ${u.gravedad}: ${u.promedioDias} días promedio`," ",e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Promedio general: ",l," días • ",s," reportes cerrados (",r," con datos completos para análisis)"]})]})]})}const ja={cerrados:{label:"Reportes Cerrados",color:"#8b5cf6"},label:{color:"var(--background)"}};function Na({data:a=[]}){const[t,s]=j.useState(0),[r,l]=j.useState(""),o=10;j.useEffect(()=>{s(0)},[r]);const u=j.useMemo(()=>{const i={};a.forEach(b=>{var A;const g=b.idUsuarioReporta||"sin-id",w=b.nombreUsuarioReporta||"Sin usuario reportante",C=`${g}-${w}`;i[C]||(i[C]={total:0,cerrados:0,idUsuario:g,nombre:w}),i[C].total++,((A=b.estadoReporte)==null?void 0:A.toLowerCase())==="cerrado"&&i[C].cerrados++});const d=Object.entries(i).sort(([,b],[,g])=>g.total!==b.total?g.total-b.total:g.cerrados-b.cerrados),v=d.length,N=(b,g)=>{if(g===1)return"#8b5cf6";const w=b/Math.max(1,g-1),C=196,A=164,P=255,E=109,S=40,R=217,O=Math.round(C+(E-C)*w),I=Math.round(A+(S-A)*w),le=Math.round(P+(R-P)*w);return`rgb(${O}, ${I}, ${le})`};return d.map(([b,g],w)=>({reporter:g.nombre.length>10?g.nombre.substring(0,10)+"...":g.nombre,fullReporter:g.nombre,idUsuario:g.idUsuario,cerrados:g.cerrados,total:g.total,ratio:`${g.cerrados}/${g.total}`,porcentaje:g.total>0?Math.round(g.cerrados/g.total*100):0,fill:N(w,v),globalRank:w+1}))},[a]),c=j.useMemo(()=>r.trim()?u.filter(i=>i.fullReporter.toLowerCase().includes(r.toLowerCase())):u,[u,r]),p=j.useMemo(()=>{const i=t*o;return c.slice(i,i+o).map(d=>({...d,fill:d.fill}))},[c,t]),f=Math.ceil(c.length/o),m=j.useMemo(()=>u.reduce((i,d)=>i+d.cerrados,0),[u]),x=j.useMemo(()=>u.reduce((i,d)=>i+d.total,0),[u]),n=j.useMemo(()=>u.length>0?u[0]:null,[u]),y=j.useMemo(()=>{const i=u.find(d=>d.idUsuario==="sin-id");return i?i.total:0},[u]),h=({active:i,payload:d})=>{if(i&&d&&d.length){const v=d[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:v.fullReporter}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",v.idUsuario]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Reportados: ",v.total," • Cerrados: ",v.cerrados," (",v.porcentaje,"%)"]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Ranking: #",v.globalRank]})]})}return null};return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Usuario que Reporta"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," usuarios • "]}):null,"Mostrando ",t*o+1,"-",Math.min((t+1)*o,c.length)," de"," ",c.length," usuarios"]})]}),f>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(f-1,t+1)),disabled:t>=f-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Buscar usuario reportante...",value:r,onChange:i=>l(i.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(ee,{config:ja,className:"h-full w-full",children:e.jsxs(fe,{data:p,layout:"vertical",height:Math.max(p.length*80,400),margin:{left:0,right:80,top:0,bottom:0},children:[e.jsx(te,{horizontal:!1}),e.jsx(G,{dataKey:"reporter",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:75,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(h,{})}),e.jsx(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[n&&`${n.fullReporter} lidera con ${n.ratio} reportes (${n.porcentaje}%)`,e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total reportados: ",x," • Total cerrados: ",m,y>0&&` • Sin reportante: ${y}`]})]})]})}const wa={generado:{label:"Generado",color:"#ef4444"},visualizado:{label:"Visualizado",color:"#f59e0b"},cerrado:{label:"Cerrado",color:"#10b981"},label:{color:"var(--background)"}};function Ca({data:a=[]}){const[t,s]=j.useState(0),[r,l]=j.useState(""),o=10;j.useEffect(()=>{s(0)},[r]);const u=j.useMemo(()=>{const h={};return a.forEach(d=>{var w;const v=d.idUsuarioCierre||"sin-id",N=d.nombreUsuarioCierre||"Sin encargado de cierre",b=`${v}-${N}`,g=(w=d.estadoReporte)==null?void 0:w.toLowerCase();h[b]||(h[b]={generado:0,visualizado:0,cerrado:0,total:0,idUsuario:v,nombre:N}),h[b].total++,g==="generado"?h[b].generado++:g==="visualizado"?h[b].visualizado++:g==="cerrado"&&h[b].cerrado++}),Object.entries(h).sort(([,d],[,v])=>{const N=d.total>0?d.cerrado/d.total*100:0,b=v.total>0?v.cerrado/v.total*100:0;return b!==N?b-N:v.total-d.total}).map(([d,v],N)=>{const b=v.total>0?v.generado/v.total*100:0,g=v.total>0?v.visualizado/v.total*100:0,w=v.total>0?v.cerrado/v.total*100:0;let C=Math.round(b),A=Math.round(g),P=Math.round(w);const S=100-(C+A+P);if(S!==0&&v.total>0){const R=[{key:"generado",decimal:b-C,value:C},{key:"visualizado",decimal:g-A,value:A},{key:"cerrado",decimal:w-P,value:P}].sort((O,I)=>Math.abs(I.decimal)-Math.abs(O.decimal));R[0].key==="generado"?C+=S:R[0].key==="visualizado"?A+=S:P+=S}return{idResponsable:v.idUsuario,responsable:v.nombre.length>12?v.nombre.substring(0,12)+"...":v.nombre,fullResponsable:v.nombre,generado:v.generado,visualizado:v.visualizado,cerrado:v.cerrado,total:v.total,performance:v.total>0?Math.round(v.cerrado/v.total*100):0,generadoPercent:C,visualizadoPercent:A,cerradoPercent:P,generadoPercentRounded:C,visualizadoPercentRounded:A,cerradoPercentRounded:P,globalRank:N+1}})},[a]),c=j.useMemo(()=>r.trim()?u.filter(h=>h.fullResponsable.toLowerCase().includes(r.toLowerCase())):u,[u,r]),p=j.useMemo(()=>{const h=t*o;return c.slice(h,h+o)},[c,t]),f=Math.ceil(c.length/o),m=j.useMemo(()=>u.reduce((h,i)=>h+i.total,0),[u]),x=j.useMemo(()=>u.reduce((h,i)=>({generado:h.generado+i.generado,visualizado:h.visualizado+i.visualizado,cerrado:h.cerrado+i.cerrado}),{generado:0,visualizado:0,cerrado:0}),[u]),n=j.useMemo(()=>u.length>0?u[0]:null,[u]),y=({active:h,payload:i})=>{if(h&&i&&i.length){const d=i[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:d.fullResponsable}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",d.idResponsable]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Total asignados: ",d.total," • Performance: ",d.performance,"%"]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-red-500 rounded mr-2"}),"Generado: ",d.generado," (",d.generadoPercentRounded,"%)"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-amber-500 rounded mr-2"}),"Visualizado: ",d.visualizado," (",d.visualizadoPercentRounded,"%)"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-green-500 rounded mr-2"}),"Cerrado: ",d.cerrado," (",d.cerradoPercentRounded,"%)"]})]}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-2",children:["Ranking: #",d.globalRank]})]})}return null};return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Distribución de Estados por Responsable de Cierre"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," responsables • "]}):null,"Mostrando ",t*o+1,"-",Math.min((t+1)*o,c.length)," de"," ",c.length," responsables"]})]}),f>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(f-1,t+1)),disabled:t>=f-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Buscar responsable...",value:r,onChange:h=>l(h.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(ee,{config:wa,className:"h-full w-full",children:e.jsxs(fe,{data:p,layout:"vertical",margin:{left:0,right:30,top:0,bottom:0},children:[e.jsx(te,{horizontal:!1}),e.jsx(G,{dataKey:"responsable",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:100,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{type:"number",hide:!0,domain:[0,100]}),e.jsx(ae,{cursor:!1,content:e.jsx(y,{})}),e.jsx(z,{dataKey:"generadoPercent",stackId:"status",fill:"var(--color-generado)",radius:[4,0,0,4],children:e.jsx(M,{dataKey:"generadoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:h=>h>5?`${h}%`:""})}),e.jsx(z,{dataKey:"visualizadoPercent",stackId:"status",fill:"var(--color-visualizado)",children:e.jsx(M,{dataKey:"visualizadoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:h=>h>5?`${h}%`:""})}),e.jsxs(z,{dataKey:"cerradoPercent",stackId:"status",fill:"var(--color-cerrado)",radius:[0,4,4,0],children:[e.jsx(M,{dataKey:"cerradoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:h=>h>5?`${h}%`:""}),e.jsx(M,{dataKey:"total",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})]})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:["                ",e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[n&&`${n.fullResponsable} lidera con ${n.performance}% de cierre (${n.total} reportes)`,e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total asignados: ",m," • Generados: ",x.generado," • Visualizados: ",x.visualizado," • Cerrados: ",x.cerrado]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{children:"Generado"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded"}),e.jsx("span",{children:"Visualizado"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Cerrado"})]})]})]})]})}const Aa={actos:{label:"Actos",color:"#3b82f6"},condiciones:{label:"Condiciones",color:"#f59e0b"},incidentes:{label:"Incidentes",color:"#10b981"},label:{color:"var(--background)"}};function Da({data:a=[]}){const[t,s]=j.useState(0),[r,l]=j.useState(""),o=10;j.useEffect(()=>{s(0)},[r]);const u=i=>{switch(i==null?void 0:i.toLowerCase()){case"actos":return"Actos Subestándar";case"condiciones":return"Condiciones Subestándar";case"incidentes":return"Incidentes";default:return i||"N/A"}},c=j.useMemo(()=>{const i=a.filter(N=>N.idCausa&&N.tipoReporte&&N.causaReporte&&["actos","condiciones","incidentes"].includes(N.tipoReporte.toLowerCase())),d={};return i.forEach(N=>{const b=N.idCausa.toString(),g=N.tipoReporte.toLowerCase(),w=N.causaReporte,C=`${b}-${g}`;d[C]||(d[C]={nombre:w,total:0,tipo:g}),d[C].total++}),Object.entries(d).sort(([,N],[,b])=>b.total-N.total).map(([N,b],g)=>{const w=N.split("-")[0];let C="",A="";switch(b.tipo){case"actos":C="ASE",A="#3b82f6";break;case"condiciones":C="CSE",A="#f59e0b";break;case"incidentes":C="I",A="#10b981";break}const P=`${C} - ${b.nombre}`,E=P.length>15?P.substring(0,15)+"...":P;return{key:N,causa:E,fullCausa:P,idCausa:w,total:b.total,tipo:b.tipo,tipoLabel:u(b.tipo),color:A,globalRank:g+1}})},[a]),p=j.useMemo(()=>r.trim()?c.filter(i=>i.fullCausa.toLowerCase().includes(r.toLowerCase())):c,[c,r]),f=j.useMemo(()=>{const i=t*o;return p.slice(i,i+o)},[p,t]),m=Math.ceil(p.length/o),x=j.useMemo(()=>c.reduce((i,d)=>i+d.total,0),[c]),n=j.useMemo(()=>c.reduce((i,d)=>{switch(d.tipo){case"actos":i.actos+=d.total;break;case"condiciones":i.condiciones+=d.total;break;case"incidentes":i.incidentes+=d.total;break}return i},{actos:0,condiciones:0,incidentes:0}),[c]),y=j.useMemo(()=>c.length>0?c[0]:null,[c]),h=({active:i,payload:d})=>{if(i&&d&&d.length){const v=d[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg max-w-xs",children:[e.jsx("p",{className:"text-foreground font-semibold w-[300px] break-words leading-tight mb-2",children:v.fullCausa}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID Causa: ",v.idCausa]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Total reportes: ",v.total]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Tipo: ",v.tipoLabel]}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-2",children:["Ranking: #",v.globalRank]})]})}return null};return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Distribución de Causas por Tipo de Reporte"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontradas ",p.length," causas • "]}):null,"Mostrando ",t*o+1,"-",Math.min((t+1)*o,p.length)," de"," ",p.length," causas"]})]}),m>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(m-1,t+1)),disabled:t>=m-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Buscar causa...",value:r,onChange:i=>l(i.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(ee,{config:Aa,className:"h-full w-full",children:e.jsxs(fe,{data:f,layout:"vertical",height:Math.max(f.length*60,400),margin:{left:0,right:60,top:0,bottom:0},children:[e.jsx(te,{horizontal:!1}),e.jsx(G,{dataKey:"causa",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:120,tick:{fontSize:10,fill:"var(--foreground)"}}),e.jsx(F,{type:"number",hide:!0}),e.jsx(ae,{cursor:!1,content:e.jsx(h,{})}),e.jsxs(z,{dataKey:"total",radius:[0,4,4,0],children:[f.map((i,d)=>e.jsx(at,{fill:i.color},`cell-${d}`)),e.jsx(M,{dataKey:"total",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})]})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[y&&`${y.fullCausa} lidera con ${y.total} reportes`,e.jsx(re,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total reportes: ",x," • Actos Subestándar: ",n.actos," • Condiciones Subestándar: ",n.condiciones," • Incidentes: ",n.incidentes]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Actos Subestándar (ASE)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),e.jsx("span",{children:"Condiciones Subestándar (CSE)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Incidentes (I)"})]})]})]})]})}const Pa=a=>{switch(a==null?void 0:a.toLowerCase()){case"generado":return"bg-red-100 text-red-800 hover:bg-red-200";case"visualizado":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"cerrado":return"bg-green-100 text-green-800 hover:bg-green-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Sa=a=>{switch(a==null?void 0:a.toLowerCase()){case"alto":case"alta":return"bg-red-100 text-red-800 hover:bg-red-200";case"medio":case"media":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"bajo":case"baja":return"bg-green-100 text-green-800 hover:bg-green-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Ra=a=>{switch(a==null?void 0:a.toLowerCase()){case"actos":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"condiciones":return"bg-orange-100 text-orange-800 hover:bg-orange-200";case"incidentes":return"bg-purple-100 text-purple-800 hover:bg-purple-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Ze=a=>{switch(a==null?void 0:a.toLowerCase()){case"actos":return"Actos Subestándar";case"condiciones":return"Condiciones Subestándar";case"incidentes":return"Incidentes";default:return a||"N/A"}};function Ea({data:a=[]}){const[t,s]=j.useState(0),[r,l]=j.useState(""),o=8;j.useEffect(()=>{s(0)},[r]);const u=n=>new Date(n).toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),c=(n,y)=>{const h=new Date(n),i=y?new Date(y):new Date,d=Math.abs(i.getTime()-h.getTime()),v=Math.floor(d/(1e3*60*60*24)),N=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(d%(1e3*60*60)/(1e3*60));let g="";return v>0&&(g+=`${v}d `),(v>0||N>0)&&(g+=`${N}h `),g+=`${b}m`,g.trim()},p=n=>(n==null?void 0:n.toLowerCase())==="finalizado"||(n==null?void 0:n.toLowerCase())==="cerrado",f=j.useMemo(()=>r.trim()?a.filter(n=>{var y,h,i,d,v;return((y=n.id)==null?void 0:y.toString().includes(r))||((h=n.tipoReporte)==null?void 0:h.toLowerCase().includes(r.toLowerCase()))||((i=n.descripcionEvento)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((d=n.estadoReporte)==null?void 0:d.toLowerCase().includes(r.toLowerCase()))||((v=n.nivelGravedad)==null?void 0:v.toLowerCase().includes(r.toLowerCase()))}):a,[a,r]),m=j.useMemo(()=>{const n=t*o;return f.slice(n,n+o)},[f,t]),x=Math.ceil(f.length/o);return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Q,{children:"Detalle de Reportes"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",f.length," reportes • "]}):null,"Mostrando ",t*o+1,"-",Math.min((t+1)*o,f.length)," de"," ",f.length," reportes"]})]}),x>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(x-1,t+1)),disabled:t>=x-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(oe,{placeholder:"Buscar por ID, tipo, descripción, estado o gravedad...",value:r,onChange:n=>l(n.target.value),className:"pl-8"})]})]})}),e.jsx($,{className:"overflow-auto",children:e.jsx(Ot,{children:e.jsxs(St,{children:[e.jsx(Rt,{children:e.jsxs(ze,{children:[e.jsx(H,{className:"w-16",children:"ID"}),e.jsx(H,{className:"w-32",children:"Tipo"}),e.jsx(H,{className:"w-40",children:"Descripción"}),e.jsx(H,{className:"w-32",children:"Gravedad"}),e.jsx(H,{className:"w-32",children:"Estado"}),e.jsx(H,{className:"w-32",children:"Fecha Evento"}),e.jsx(H,{className:"w-40",children:"Fecha Cierre"}),e.jsx(H,{className:"w-32",children:"Duración"})]})}),e.jsxs(Et,{children:[m.map(n=>e.jsxs(Mt,{delayDuration:300,children:[e.jsx(Tt,{asChild:!0,children:e.jsxs(ze,{className:"cursor-help",children:[e.jsx(U,{className:"font-medium",children:n.id}),e.jsx(U,{children:e.jsx($e,{className:Ra(n.tipoReporte||""),children:Ze(n.tipoReporte||"")})}),e.jsx(U,{className:"max-w-40",children:e.jsx("div",{className:"truncate",children:n.descripcionEvento||"Sin descripción"})}),e.jsx(U,{children:e.jsx($e,{className:Sa(n.nivelGravedad||""),children:n.nivelGravedad||"N/A"})}),e.jsx(U,{children:e.jsx($e,{className:Pa(n.estadoReporte||""),children:n.estadoReporte||"N/A"})}),e.jsx(U,{className:"text-muted-foreground text-xs",children:n.fechaEvento?u(n.fechaEvento):"N/A"}),e.jsx(U,{className:"text-muted-foreground text-xs",children:p(n.estadoReporte||"")&&n.reportClosedAt?u(n.reportClosedAt):"-"}),e.jsx(U,{className:"text-muted-foreground text-xs",children:n.fechaEvento?c(n.fechaEvento,n.reportClosedAt):"-"})]})}),e.jsx(kt,{className:"max-w-md p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ID del Reporte:"})," ",n.id||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tipo de Reporte:"})," ",Ze(n.tipoReporte||"")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Descripción del Evento:"})," ",n.descripcionEvento||"Sin descripción"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Nivel de Gravedad:"})," ",n.nivelGravedad||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estado del Reporte:"})," ",n.estadoReporte||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Fecha del Evento:"})," ",n.fechaEvento?u(n.fechaEvento):"N/A"]}),p(n.estadoReporte||"")&&n.reportClosedAt&&e.jsxs("div",{children:[e.jsx("strong",{children:"Fecha de Cierre:"})," ",u(n.reportClosedAt)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tiempo de Resolución:"})," ",n.fechaEvento?c(n.fechaEvento,n.reportClosedAt):"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Causa del Reporte:"})," ",n.causaReporte||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Empresa que Reporta:"})," ",n.nombreEmpresaReporta||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Empresa Reportada:"})," ",n.nombreEmpresaReportada||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gerencia Responsable:"})," ",n.nombreGerencia||"N/A"]}),n.areaInvolucrada&&e.jsxs("div",{children:[e.jsx("strong",{children:"Área Involucrada:"})," ",n.areaInvolucrada]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Usuario que Reporta:"})," ",n.nombreUsuarioReporta||"N/A"]}),n.nombreUsuarioCierre&&e.jsxs("div",{children:[e.jsx("strong",{children:"Usuario Encargado de Cierre:"})," ",n.nombreUsuarioCierre]}),n.nombreUsuarioReasignado&&n.nombreUsuarioReasignado.trim()&&e.jsxs("div",{children:[e.jsx("strong",{children:"Usuario Reasignado:"})," ",n.nombreUsuarioReasignado]}),n.motivoReasignacion&&e.jsxs("div",{children:[e.jsx("strong",{children:"Motivo de Reasignación:"})," ",n.motivoReasignacion]})]})})]},n.id)),m.length===0&&e.jsx(ze,{children:e.jsx(U,{colSpan:9,className:"py-8 text-center",children:"No se encontraron reportes"})})]})]})})})]})}function Oa({companies:a,titles:t,onFiltersChange:s}){const[r,l]=j.useState({status:"Todos",company:"",reportType:"Todos",startDate:"",endDate:""});j.useEffect(()=>{const m=new Date,x=new Date(m.getFullYear()-1,m.getMonth(),m.getDate());l(n=>{var y;return{...n,company:a.length===1&&((y=a[0].id)==null?void 0:y.toString())||"",startDate:x.toISOString().split("T")[0],endDate:m.toISOString().split("T")[0]}})},[a]);const o=(m,x)=>{l(n=>({...n,[m]:x}))},u=()=>{console.log("Applied filters:",r),s(r)},c=()=>{const m=new Date,n={status:"Todos",company:"",reportType:"Todos",startDate:new Date(m.getFullYear()-1,m.getMonth(),m.getDate()).toISOString().split("T")[0],endDate:m.toISOString().split("T")[0]};l(n),s(n)},p=[{label:"Todos",value:"Todos"},{label:"Generado",value:"Generado"},{label:"Visualizado",value:"Visualizado"},{label:"Cerrado",value:"Cerrado"}],f=a.map(m=>{var x;return{label:m.name||m.nombre||"Empresa",value:((x=m.id)==null?void 0:x.toString())||""}});return e.jsxs("div",{className:"sticky top-10 z-10 bg-white p-3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Filtros"}),e.jsxs("form",{onSubmit:m=>{m.preventDefault(),u()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Estado"}),e.jsxs(Ae,{value:r.status,onValueChange:m=>o("status",m),children:[e.jsx(De,{children:e.jsx(Pe,{placeholder:"Seleccionar estado"})}),e.jsx(Se,{children:p.map((m,x)=>e.jsx(se,{value:m.value,children:m.label},x))})]})]}),"                    ",e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa"}),a.length===1?e.jsx("div",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",children:a[0].name||a[0].nombre||"Empresa"}):e.jsx($t,{data:f,value:r.company,onChange:m=>o("company",m),placeholder:"Seleccionar empresa",className:"w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tipo de reporte"}),e.jsxs(Ae,{value:r.reportType,onValueChange:m=>o("reportType",m),children:[e.jsx(De,{children:e.jsx(Pe,{placeholder:"Seleccionar tipo"})}),e.jsxs(Se,{children:[e.jsx(se,{value:"Todos",children:"Todos"}),Object.entries(t).map(([m,x])=>e.jsx(se,{value:m,children:x},m))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fecha Desde"}),e.jsx(oe,{type:"date",value:r.startDate,onChange:m=>o("startDate",m.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fecha Hasta"}),e.jsx(oe,{type:"date",value:r.endDate,onChange:m=>o("endDate",m.target.value),className:"w-full"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"submit",children:"Aplicar Filtros"}),e.jsx(L,{type:"button",variant:"outline",onClick:c,children:"Limpiar Filtros"})]})]})]})}const Ma=[{title:"Dashboard",href:"/dashboard"}];function ur({companies:a,entities:t,titles:s}){const[r,l]=j.useState({status:"",company:"",reportType:"",startDate:"",endDate:""}),[o,u]=j.useState({}),[c,p]=j.useState([]),[f,m]=j.useState(!1),x=(h,i)=>!h||!Array.isArray(h)?[]:h.filter(d=>{if(i.status&&i.status!=="Todos"){if(i.status==="Generado"){if(d.estadoReporte!=="Generado"&&d.estadoReporte!==null&&d.estadoReporte!==void 0&&d.estadoReporte!=="")return!1}else if(d.estadoReporte!==i.status)return!1}return!(i.company&&d.idEmpresaReportada!==i.company||i.reportType&&i.reportType!=="Todos"&&d.tipoReporte!==i.reportType)}),n=async h=>{var i;try{m(!0),console.log("🔍 Aplicando filtros a la API:",h);const{company:d,...v}=h,N={...v,...d&&{companyId:d}};console.log("📤 Parámetros enviados a la API:",N);const b=await xt.get(route("api.dashboard.index"),{params:N});console.log("📥 Respuesta de la API:",b.data),console.log("📊 Cantidad de reportes recibidos:",((i=b.data.data)==null?void 0:i.length)||0),u(b.data);const g=x(b.data.data||[],h);p(g),console.log("✅ Data actualizada en el estado principal:",b.data),console.log("🎯 Data filtrada localmente (cantidad):",g.length),console.log("🎯 Data filtrada localmente (contenido):",g)}catch(d){console.error("Error al obtener datos del dashboard:",d),p([])}finally{m(!1)}};j.useEffect(()=>{var v;const h=new Date,i=new Date(h.getFullYear()-1,h.getMonth(),h.getDate()),d={status:"",company:a.length===1&&((v=a[0].id)==null?void 0:v.toString())||"",reportType:"",startDate:i.toISOString().split("T")[0],endDate:h.toISOString().split("T")[0]};console.log("🚀 Inicializando Dashboard con filtros por defecto:",d),console.log("🏢 Empresas disponibles:",a.length,a.length===1?"(solo una empresa, seleccionada automáticamente)":""),l(d),n(d)},[a]);const y=h=>{var v;const i=r;if(l(h),console.log("🔄 Filtros actualizados en Dashboard:",h),console.log("🔄 Filtros anteriores:",i),i.startDate!==h.startDate||i.endDate!==h.endDate)console.log("📅 Las fechas cambiaron, consultando API..."),console.log("📅 Fecha anterior: startDate =",i.startDate,", endDate =",i.endDate),console.log("📅 Fecha nueva: startDate =",h.startDate,", endDate =",h.endDate),n(h);else{console.log("🏠 Solo cambiaron filtros locales, aplicando filtrado..."),console.log("🏠 Filtros que cambiaron (sin fechas):",{status:i.status!==h.status?{anterior:i.status,nuevo:h.status}:"sin cambio",company:i.company!==h.company?{anterior:i.company,nuevo:h.company}:"sin cambio",reportType:i.reportType!==h.reportType?{anterior:i.reportType,nuevo:h.reportType}:"sin cambio"}),console.log("🏠 Data disponible para filtrar (cantidad):",((v=o.data)==null?void 0:v.length)||0);const N=x(o.data||[],h);p(N),console.log("🏠 Data filtrada localmente (cantidad):",N.length),console.log("🏠 Data filtrada localmente (contenido):",N)}};return e.jsxs(vt,{breadcrumbs:Ma,children:[e.jsx(pt,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 pt-0",children:[e.jsx(Oa,{companies:a,titles:s,onFiltersChange:y}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx(ua,{data:c}),e.jsx("div",{className:"col-span-1 lg:col-span-3",children:e.jsx(ma,{data:c})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(fa,{data:c}),e.jsx(xa,{data:c}),e.jsx(va,{data:c}),e.jsx(ya,{data:c}),e.jsx(Ca,{data:c}),e.jsx(Na,{data:c}),e.jsx(Da,{data:c}),e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsx(Ea,{data:c})})]})]})]})}export{ur as default};
