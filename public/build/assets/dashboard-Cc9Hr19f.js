import{U as D,r as y,j as e,L as pt,b as xt}from"./app-Ddcqu9Ht.js";import{F as gt,A as vt}from"./app-layout-CCTzAZ1e.js";import{C as T,d as $,a as V,c as Y,e as q,b as Z}from"./card-DdPdyxdV.js";import{E as bt}from"./eye-phEITgqV.js";import{C as yt}from"./circle-check-big-CzD7Tl3W.js";import{d as W,e as K,m as je,i as ce,h as Ne,A as Je,j as I,k as H,l as jt,n as Le,o as Nt,p as M,u as Qe,q as we,G as et,r as de,s as Ce,D as wt,S as Ve,t as Ct,v as At,w as tt,E as Dt,x as Pt,y as at,g as rt,B as z,X as F,Y as G,f as st,c as Be,C as J,a as Q,z as ee,b as Me,R as Fe}from"./chart-CHVrUkik.js";import{e as Ge}from"./utils-CISCwvQU.js";import{T as te}from"./trending-up-DBtbghu5.js";import{S as Ae,a as De,b as Pe,c as Se,f as re}from"./select-DwMrAAaa.js";import{B as L}from"./button-DFseu0bS.js";import{I as ne}from"./input-BibXpI86.js";import{C as ge}from"./chevron-left-PXcg0o53.js";import{C as ve}from"./chevron-right-B3EmVKDL.js";import{S as be}from"./search-CmTETkZ0.js";import{B as $e}from"./badge-C2pWd5Fx.js";import{T as St,a as Rt,b as ze,c as le,d as Ot,e as ae}from"./table-Q7JB9eR1.js";import{T as Et,a as Mt,b as kt,c as Tt}from"./tooltip-CRvFQYDY.js";import{C as $t}from"./combobox-C1IPglMP.js";import"./index-C9eBNZeY.js";import"./index-B47_RzR7.js";import"./index-CsEDmnMu.js";import"./createLucideIcon-B_VegEn1.js";import"./index-DdP9pJ0S.js";import"./index-CfWIkaAn.js";import"./index-BN1ZmC6w.js";import"./check-C4akX3zh.js";import"./chevrons-up-down-BnNn8MVJ.js";import"./truck-uv_OgjZk.js";import"./index-Dgb2Bu3v.js";import"./index-Chjiymov.js";import"./index-DeF0cS-w.js";import"./trash-2-CblPgHTS.js";var zt=["layout","type","stroke","connectNulls","isRange","ref"],Lt=["key"],nt;function ue(a){"@babel/helpers - typeof";return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(a)}function ot(a,t){if(a==null)return{};var s=_t(a,t),r,l;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);for(l=0;l<n.length;l++)r=n[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function _t(a,t){if(a==null)return{};var s={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(t.indexOf(r)>=0)continue;s[r]=a[r]}return s}function se(){return se=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},se.apply(this,arguments)}function Ye(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,r)}return s}function U(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(s),!0).forEach(function(r){B(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Ye(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function It(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,lt(r.key),r)}}function Kt(a,t,s){return t&&Ue(a.prototype,t),s&&Ue(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function Bt(a,t,s){return t=Re(t),Ft(a,it()?Reflect.construct(t,s||[],Re(a).constructor):t.apply(a,s))}function Ft(a,t){if(t&&(ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gt(a)}function Gt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function it(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(it=function(){return!!a})()}function Re(a){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Re(a)}function Wt(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&_e(a,t)}function _e(a,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},_e(a,t)}function B(a,t,s){return t=lt(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function lt(a){var t=Vt(a,"string");return ue(t)=="symbol"?t:t+""}function Vt(a,t){if(ue(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(ue(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var oe=function(a){function t(){var s;It(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return s=Bt(this,t,[].concat(l)),B(s,"state",{isAnimationFinished:!0}),B(s,"id",Qe("recharts-area-")),B(s,"handleAnimationEnd",function(){var d=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),we(d)&&d()}),B(s,"handleAnimationStart",function(){var d=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),we(d)&&d()}),s}return Wt(t,a),Kt(t,[{key:"renderDots",value:function(r,l,n){var d=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(d&&!c)return null;var h=this.props,i=h.dot,u=h.points,p=h.dataKey,x=W(this.props,!1),j=W(i,!0),f=u.map(function(m,v){var N=U(U(U({key:"dot-".concat(v),r:3},x),j),{},{index:v,cx:m.x,cy:m.y,dataKey:p,value:m.value,payload:m.payload,points:u});return t.renderDotItem(i,N)}),o={clipPath:r?"url(#clipPath-".concat(l?"":"dots-").concat(n,")"):null};return D.createElement(K,se({className:"recharts-area-dots"},o),f)}},{key:"renderHorizontalRect",value:function(r){var l=this.props,n=l.baseLine,d=l.points,c=l.strokeWidth,h=d[0].x,i=d[d.length-1].x,u=r*Math.abs(h-i),p=je(d.map(function(x){return x.y||0}));return ce(n)&&typeof n=="number"?p=Math.max(n,p):n&&Array.isArray(n)&&n.length&&(p=Math.max(je(n.map(function(x){return x.y||0})),p)),ce(p)?D.createElement("rect",{x:h<i?h:h-u,y:0,width:u,height:Math.floor(p+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var l=this.props,n=l.baseLine,d=l.points,c=l.strokeWidth,h=d[0].y,i=d[d.length-1].y,u=r*Math.abs(h-i),p=je(d.map(function(x){return x.x||0}));return ce(n)&&typeof n=="number"?p=Math.max(n,p):n&&Array.isArray(n)&&n.length&&(p=Math.max(je(n.map(function(x){return x.x||0})),p)),ce(p)?D.createElement("rect",{x:0,y:h<i?h:h-u,width:p+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var l=this.props.layout;return l==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,l,n,d){var c=this.props,h=c.layout,i=c.type,u=c.stroke,p=c.connectNulls,x=c.isRange;c.ref;var j=ot(c,zt);return D.createElement(K,{clipPath:n?"url(#clipPath-".concat(d,")"):null},D.createElement(Ne,se({},W(j,!0),{points:r,connectNulls:p,type:i,baseLine:l,layout:h,stroke:"none",className:"recharts-area-area"})),u!=="none"&&D.createElement(Ne,se({},W(this.props,!1),{className:"recharts-area-curve",layout:h,type:i,connectNulls:p,fill:"none",points:r})),u!=="none"&&x&&D.createElement(Ne,se({},W(this.props,!1),{className:"recharts-area-curve",layout:h,type:i,connectNulls:p,fill:"none",points:l})))}},{key:"renderAreaWithAnimation",value:function(r,l){var n=this,d=this.props,c=d.points,h=d.baseLine,i=d.isAnimationActive,u=d.animationBegin,p=d.animationDuration,x=d.animationEasing,j=d.animationId,f=this.state,o=f.prevPoints,m=f.prevBaseLine;return D.createElement(Je,{begin:u,duration:p,isActive:i,easing:x,from:{t:0},to:{t:1},key:"area-".concat(j),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var N=v.t;if(o){var b=o.length/c.length,g=c.map(function(P,O){var S=Math.floor(O*b);if(o[S]){var R=o[S],E=I(R.x,P.x),_=I(R.y,P.y);return U(U({},P),{},{x:E(N),y:_(N)})}return P}),w;if(ce(h)&&typeof h=="number"){var C=I(m,h);w=C(N)}else if(H(h)||jt(h)){var A=I(m,0);w=A(N)}else w=h.map(function(P,O){var S=Math.floor(O*b);if(m[S]){var R=m[S],E=I(R.x,P.x),_=I(R.y,P.y);return U(U({},P),{},{x:E(N),y:_(N)})}return P});return n.renderAreaStatically(g,w,r,l)}return D.createElement(K,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(l)},n.renderClipRect(N))),D.createElement(K,{clipPath:"url(#animationClipPath-".concat(l,")")},n.renderAreaStatically(c,h,r,l)))})}},{key:"renderArea",value:function(r,l){var n=this.props,d=n.points,c=n.baseLine,h=n.isAnimationActive,i=this.state,u=i.prevPoints,p=i.prevBaseLine,x=i.totalLength;return h&&d&&d.length&&(!u&&x>0||!Le(u,d)||!Le(p,c))?this.renderAreaWithAnimation(r,l):this.renderAreaStatically(d,c,r,l)}},{key:"render",value:function(){var r,l=this.props,n=l.hide,d=l.dot,c=l.points,h=l.className,i=l.top,u=l.left,p=l.xAxis,x=l.yAxis,j=l.width,f=l.height,o=l.isAnimationActive,m=l.id;if(n||!c||!c.length)return null;var v=this.state.isAnimationFinished,N=c.length===1,b=Ge("recharts-area",h),g=p&&p.allowDataOverflow,w=x&&x.allowDataOverflow,C=g||w,A=H(m)?this.id:m,P=(r=W(d,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=P.r,S=O===void 0?3:O,R=P.strokeWidth,E=R===void 0?2:R,_=Nt(d)?d:{},ie=_.clipDot,We=ie===void 0?!0:ie,ye=S*2+E;return D.createElement(K,{className:b},g||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(A)},D.createElement("rect",{x:g?u:u-j/2,y:w?i:i-f/2,width:g?j:j*2,height:w?f:f*2})),!We&&D.createElement("clipPath",{id:"clipPath-dots-".concat(A)},D.createElement("rect",{x:u-ye/2,y:i-ye/2,width:j+ye,height:f+ye}))):null,N?null:this.renderArea(C,A),(d||N)&&this.renderDots(C,We,A),(!o||v)&&M.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.animationId!==l.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:l.curPoints,prevBaseLine:l.curBaseLine}:r.points!==l.curPoints||r.baseLine!==l.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(y.PureComponent);nt=oe;B(oe,"displayName","Area");B(oe,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!et.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});B(oe,"getBaseValue",function(a,t,s,r){var l=a.layout,n=a.baseValue,d=t.props.baseValue,c=d??n;if(ce(c)&&typeof c=="number")return c;var h=l==="horizontal"?r:s,i=h.scale.domain();if(h.type==="number"){var u=Math.max(i[0],i[1]),p=Math.min(i[0],i[1]);return c==="dataMin"?p:c==="dataMax"||u<0?u:Math.max(Math.min(i[0],i[1]),0)}return c==="dataMin"?i[0]:c==="dataMax"?i[1]:i[0]});B(oe,"getComposedData",function(a){var t=a.props,s=a.item,r=a.xAxis,l=a.yAxis,n=a.xAxisTicks,d=a.yAxisTicks,c=a.bandSize,h=a.dataKey,i=a.stackedData,u=a.dataStartIndex,p=a.displayedData,x=a.offset,j=t.layout,f=i&&i.length,o=nt.getBaseValue(t,s,r,l),m=j==="horizontal",v=!1,N=p.map(function(g,w){var C;f?C=i[u+w]:(C=de(g,h),Array.isArray(C)?v=!0:C=[o,C]);var A=C[1]==null||f&&de(g,h)==null;return m?{x:Ce({axis:r,ticks:n,bandSize:c,entry:g,index:w}),y:A?null:l.scale(C[1]),value:C,payload:g}:{x:A?null:r.scale(C[1]),y:Ce({axis:l,ticks:d,bandSize:c,entry:g,index:w}),value:C,payload:g}}),b;return f||v?b=N.map(function(g){var w=Array.isArray(g.value)?g.value[0]:null;return m?{x:g.x,y:w!=null&&g.y!=null?l.scale(w):null}:{x:w!=null?r.scale(w):null,y:g.y}}):b=m?l.scale(o):r.scale(o),U({points:N,baseLine:b,layout:j,isRange:v},x)});B(oe,"renderDotItem",function(a,t){var s;if(D.isValidElement(a))s=D.cloneElement(a,t);else if(we(a))s=a(t);else{var r=Ge("recharts-area-dot",typeof a!="boolean"?a.className:""),l=t.key,n=ot(t,Lt);s=D.createElement(wt,se({},n,{key:l,className:r}))}return s});function me(a){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(a)}function Yt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,ut(r.key),r)}}function Ht(a,t,s){return t&&Ut(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function Xt(a,t,s){return t=Oe(t),qt(a,ct()?Reflect.construct(t,s||[],Oe(a).constructor):t.apply(a,s))}function qt(a,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zt(a)}function Zt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ct(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ct=function(){return!!a})()}function Oe(a){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Oe(a)}function Jt(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ie(a,t)}function Ie(a,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Ie(a,t)}function dt(a,t,s){return t=ut(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function ut(a){var t=Qt(a,"string");return me(t)=="symbol"?t:t+""}function Qt(a,t){if(me(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(me(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var ke=function(a){function t(){return Yt(this,t),Xt(this,t,arguments)}return Jt(t,a),Ht(t,[{key:"render",value:function(){return null}}])}(D.Component);dt(ke,"displayName","ZAxis");dt(ke,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ea=["option","isActive"];function pe(){return pe=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},pe.apply(this,arguments)}function ta(a,t){if(a==null)return{};var s=aa(a,t),r,l;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);for(l=0;l<n.length;l++)r=n[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(s[r]=a[r])}return s}function aa(a,t){if(a==null)return{};var s={};for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){if(t.indexOf(r)>=0)continue;s[r]=a[r]}return s}function ra(a){var t=a.option,s=a.isActive,r=ta(a,ea);return typeof t=="string"?D.createElement(Ve,pe({option:D.createElement(Ct,pe({type:t},r)),isActive:s,shapeType:"symbols"},r)):D.createElement(Ve,pe({option:t,isActive:s,shapeType:"symbols"},r))}function fe(a){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(a)}function xe(){return xe=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},xe.apply(this,arguments)}function He(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),s.push.apply(s,r)}return s}function k(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?He(Object(s),!0).forEach(function(r){X(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):He(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function sa(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(a,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,ft(r.key),r)}}function na(a,t,s){return t&&Xe(a.prototype,t),s&&Xe(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a}function oa(a,t,s){return t=Ee(t),ia(a,mt()?Reflect.construct(t,s||[],Ee(a).constructor):t.apply(a,s))}function ia(a,t){if(t&&(fe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return la(a)}function la(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function mt(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mt=function(){return!!a})()}function Ee(a){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ee(a)}function ca(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ke(a,t)}function Ke(a,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Ke(a,t)}function X(a,t,s){return t=ft(t),t in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function ft(a){var t=da(a,"string");return fe(t)=="symbol"?t:t+""}function da(a,t){if(fe(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(fe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var Te=function(a){function t(){var s;sa(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return s=oa(this,t,[].concat(l)),X(s,"state",{isAnimationFinished:!1}),X(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),X(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),X(s,"id",Qe("recharts-scatter-")),s}return ca(t,a),na(t,[{key:"renderSymbolsStatically",value:function(r){var l=this,n=this.props,d=n.shape,c=n.activeShape,h=n.activeIndex,i=W(this.props,!1);return r.map(function(u,p){var x=h===p,j=x?c:d,f=k(k({},i),u);return D.createElement(K,xe({className:"recharts-scatter-symbol",key:"symbol-".concat(u==null?void 0:u.cx,"-").concat(u==null?void 0:u.cy,"-").concat(u==null?void 0:u.size,"-").concat(p)},At(l.props,u,p),{role:"img"}),D.createElement(ra,xe({option:j,isActive:x,key:"symbol-".concat(p)},f)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,l=this.props,n=l.points,d=l.isAnimationActive,c=l.animationBegin,h=l.animationDuration,i=l.animationEasing,u=l.animationId,p=this.state.prevPoints;return D.createElement(Je,{begin:c,duration:h,isActive:d,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var j=x.t,f=n.map(function(o,m){var v=p&&p[m];if(v){var N=I(v.cx,o.cx),b=I(v.cy,o.cy),g=I(v.size,o.size);return k(k({},o),{},{cx:N(j),cy:b(j),size:g(j)})}var w=I(0,o.size);return k(k({},o),{},{size:w(j)})});return D.createElement(K,null,r.renderSymbolsStatically(f))})}},{key:"renderSymbols",value:function(){var r=this.props,l=r.points,n=r.isAnimationActive,d=this.state.prevPoints;return n&&l&&l.length&&(!d||!Le(d,l))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(l)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var l=this.props,n=l.points,d=l.xAxis,c=l.yAxis,h=l.children,i=tt(h,Dt);return i?i.map(function(u,p){var x=u.props,j=x.direction,f=x.dataKey;return D.cloneElement(u,{key:"".concat(j,"-").concat(f,"-").concat(n[p]),data:n,xAxis:d,yAxis:c,layout:j==="x"?"vertical":"horizontal",dataPointFormatter:function(m,v){return{x:m.cx,y:m.cy,value:j==="x"?+m.node.x:+m.node.y,errorVal:de(m,v)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,l=r.points,n=r.line,d=r.lineType,c=r.lineJointType,h=W(this.props,!1),i=W(n,!1),u,p;if(d==="joint")u=l.map(function(b){return{x:b.cx,y:b.cy}});else if(d==="fitting"){var x=Pt(l),j=x.xmin,f=x.xmax,o=x.a,m=x.b,v=function(g){return o*g+m};u=[{x:j,y:v(j)},{x:f,y:v(f)}]}var N=k(k(k({},h),{},{fill:"none",stroke:h&&h.fill},i),{},{points:u});return D.isValidElement(n)?p=D.cloneElement(n,N):we(n)?p=n(N):p=D.createElement(Ne,xe({},N,{type:c})),D.createElement(K,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var r=this.props,l=r.hide,n=r.points,d=r.line,c=r.className,h=r.xAxis,i=r.yAxis,u=r.left,p=r.top,x=r.width,j=r.height,f=r.id,o=r.isAnimationActive;if(l||!n||!n.length)return null;var m=this.state.isAnimationFinished,v=Ge("recharts-scatter",c),N=h&&h.allowDataOverflow,b=i&&i.allowDataOverflow,g=N||b,w=H(f)?this.id:f;return D.createElement(K,{className:v,clipPath:g?"url(#clipPath-".concat(w,")"):null},N||b?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(w)},D.createElement("rect",{x:N?u:u-x/2,y:b?p:p-j/2,width:N?x:x*2,height:b?j:j*2}))):null,d&&this.renderLine(),this.renderErrorBar(),D.createElement(K,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!o||m)&&M.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.animationId!==l.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:l.curPoints}:r.points!==l.curPoints?{curPoints:r.points}:null}}])}(y.PureComponent);X(Te,"displayName","Scatter");X(Te,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!et.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});X(Te,"getComposedData",function(a){var t=a.xAxis,s=a.yAxis,r=a.zAxis,l=a.item,n=a.displayedData,d=a.xAxisTicks,c=a.yAxisTicks,h=a.offset,i=l.props.tooltipType,u=tt(l.props.children,at),p=H(t.dataKey)?l.props.dataKey:t.dataKey,x=H(s.dataKey)?l.props.dataKey:s.dataKey,j=r&&r.dataKey,f=r?r.range:ke.defaultProps.range,o=f&&f[0],m=t.scale.bandwidth?t.scale.bandwidth():0,v=s.scale.bandwidth?s.scale.bandwidth():0,N=n.map(function(b,g){var w=de(b,p),C=de(b,x),A=!H(j)&&de(b,j)||"-",P=[{name:H(t.dataKey)?l.props.name:t.name||t.dataKey,unit:t.unit||"",value:w,payload:b,dataKey:p,type:i},{name:H(s.dataKey)?l.props.name:s.name||s.dataKey,unit:s.unit||"",value:C,payload:b,dataKey:x,type:i}];A!=="-"&&P.push({name:r.name||r.dataKey,unit:r.unit||"",value:A,payload:b,dataKey:j,type:i});var O=Ce({axis:t,ticks:d,bandSize:m,entry:b,index:g,dataKey:p}),S=Ce({axis:s,ticks:c,bandSize:v,entry:b,index:g,dataKey:x}),R=A!=="-"?r.scale(A):o,E=Math.sqrt(Math.max(R,0)/Math.PI);return k(k({},b),{},{cx:O,cy:S,x:O-E,y:S-E,xAxis:t,yAxis:s,zAxis:r,width:2*E,height:2*E,size:R,node:{x:w,y:C,z:A},tooltipPayload:P,tooltipPosition:{x:O,y:S},payload:b},u&&u[g]&&u[g].props)});return k({points:N},h)});var he=rt({chartName:"BarChart",GraphicalChild:z,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:F},{axisType:"yAxis",AxisComp:G}],formatAxisMap:st}),ht=rt({chartName:"ComposedChart",GraphicalChild:[Be,oe,z,Te],axisComponents:[{axisType:"xAxis",AxisComp:F},{axisType:"yAxis",AxisComp:G},{axisType:"zAxis",AxisComp:ke}],formatAxisMap:st});function ua({data:a=[]}){const t=y.useMemo(()=>{const s={generados:0,visualizados:0,cerrados:0};return a.forEach(r=>{switch(r.estadoReporte){case"Generado":s.generados++;break;case"Visualizado":s.visualizados++;break;case"Cerrado":s.cerrados++;break}}),s},[a]);return e.jsxs("div",{className:"flex flex-col gap-3 h-[200px]",children:[e.jsx(T,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Generados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.generados})]})})}),e.jsx(T,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Visualizados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.visualizados})]})})}),e.jsx(T,{className:"flex-1 flex flex-col justify-center",children:e.jsx($,{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Cerrados"})]}),e.jsx("div",{className:"text-lg font-bold",children:t.cerrados})]})})})]})}const qe={count:{label:"Reportes"},cumulative:{label:"Línea",color:"#dc2626"},generado:{label:"GENERADO",color:"hsl(var(--chart-1))"},visualizado:{label:"VISUALIZADO",color:"hsl(var(--chart-2))"},cerrado:{label:"CERRADO",color:"hsl(var(--chart-3))"}};function ma({data:a=[]}){const t=y.useMemo(()=>{const n={generado:0,visualizado:0,cerrado:0};a.forEach(c=>{var i;const h=(i=c.estadoReporte)==null?void 0:i.toLowerCase();h==="generado"?n.generado++:h==="visualizado"?n.visualizado++:h==="cerrado"&&n.cerrado++});const d=n.generado+n.visualizado+n.cerrado;return[{status:"generado",count:n.generado,cumulative:n.generado,label:d>0?`${n.generado} (${(n.generado/d*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-generado)"},{status:"visualizado",count:n.visualizado,cumulative:n.visualizado,label:d>0?`${n.visualizado} (${(n.visualizado/d*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-visualizado)"},{status:"cerrado",count:n.cerrado,cumulative:n.cerrado,label:d>0?`${n.cerrado} (${(n.cerrado/d*100).toFixed(1)}%)`:"0 (0%)",fill:"var(--color-cerrado)"}]},[a]),s=y.useMemo(()=>{let n=0,d=0;return t.forEach((c,h)=>{c.count>n&&(n=c.count,d=h)}),d},[t]),r=y.useMemo(()=>t.reduce((n,d)=>n+d.count,0),[t]),l=y.useMemo(()=>{var d;const n=t[s];return n?(d=qe[n.status])==null?void 0:d.label:""},[t,s]);return e.jsxs(T,{children:[e.jsx(V,{children:e.jsx(Y,{children:"Distribución de reportes por estado"})}),e.jsx($,{children:e.jsx(J,{config:qe,className:"h-[100px] w-full",children:e.jsxs(ht,{accessibilityLayer:!0,data:t,margin:{top:20},children:[e.jsx(Q,{vertical:!0,horizontal:!1}),e.jsx(F,{dataKey:"status",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:n=>n.toUpperCase()}),e.jsx(G,{hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(Me,{})}),e.jsx(z,{dataKey:"count",strokeWidth:2,radius:8,activeIndex:s,activeBar:({...n})=>e.jsx(Fe,{...n,fillOpacity:.8,stroke:n.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})}),e.jsx(Be,{type:"linear",dataKey:"cumulative",stroke:"#dc2626",strokeWidth:3,dot:{r:6,fill:"#dc2626"},activeDot:{r:8,stroke:"#dc2626",strokeWidth:2,fill:"#dc2626"}})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[l," es el estado más común ",e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Mostrando ",r," reportes en total"]})]})]})}const fa={count:{label:"Reportes Cerrados"},percentage:{label:"Línea %",color:"#dc2626"},cerrados:{label:"CERRADOS",color:"hsl(var(--chart-3))"}};function ha({data:a=[]}){const[t,s]=y.useState("month"),[r,l]=y.useState("percentage"),n=y.useMemo(()=>{const i={};a.forEach(p=>{var f;const x=new Date(p.fechaEvento),j=t==="month"?`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}`:`${x.getFullYear()}`;i[j]||(i[j]={total:0,cerrados:0}),i[j].total++,((f=p.estadoReporte)==null?void 0:f.toLowerCase())==="cerrado"&&i[j].cerrados++});const u=[];if(a.length===0){const p=new Date;if(t==="month")for(let x=5;x>=0;x--){const j=new Date(p.getFullYear(),p.getMonth()-x,1),f=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}`;u.push(f)}else for(let x=4;x>=0;x--){const j=p.getFullYear()-x;u.push(j.toString())}}else{const p=a.map(f=>new Date(f.fechaEvento)),x=new Date(Math.min(...p.map(f=>f.getTime()))),j=new Date(Math.max(...p.map(f=>f.getTime())));if(t==="month"){const f=new Date(x.getFullYear(),x.getMonth(),1),o=new Date(j.getFullYear(),j.getMonth(),1),m=new Date(f);for(;m<=o;){const v=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`;u.push(v),m.setMonth(m.getMonth()+1)}}else for(let f=x.getFullYear();f<=j.getFullYear();f++)u.push(f.toString())}return u.map(p=>{const x=i[p]||{total:0,cerrados:0},j=x.total>0?x.cerrados/x.total*100:0;let f;if(t==="month"){const[o,m]=p.split("-");f=new Date(parseInt(o),parseInt(m)-1,1).toLocaleDateString("es-ES",{month:"short",year:"2-digit"})}else f=p;return{period:f,count:x.cerrados,percentage:j,label:`${x.cerrados}/${x.total} (${j.toFixed(1)}%)`,fill:"var(--color-cerrados)"}})},[a,t]),d=y.useMemo(()=>{let i=0,u=0;return n.forEach((p,x)=>{p.count>i&&(i=p.count,u=x)}),u},[n]),c=y.useMemo(()=>n.reduce((i,u)=>i+u.count,0),[n]),h=y.useMemo(()=>n.length===0?0:(n.reduce((u,p)=>u+p.percentage,0)/n.length).toFixed(1),[n]);return e.jsxs(T,{children:[e.jsxs(V,{children:[e.jsx(Z,{children:"Reportes Generados y Porcentaje de Cierre por Fecha"}),e.jsx(Y,{children:"Reportes generados y porcentaje de cierre por fecha"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ae,{value:t,onValueChange:i=>s(i),children:[e.jsx(De,{className:"w-32",children:e.jsx(Pe,{})}),e.jsxs(Se,{children:[e.jsx(re,{value:"month",children:"Por Meses"}),e.jsx(re,{value:"year",children:"Por Años"})]})]}),e.jsxs(Ae,{value:r,onValueChange:i=>l(i),children:[e.jsx(De,{className:"w-32",children:e.jsx(Pe,{})}),e.jsxs(Se,{children:[e.jsx(re,{value:"percentage",children:"Línea %"}),e.jsx(re,{value:"value",children:"Línea Valor"})]})]})]})]}),e.jsx($,{children:e.jsx(J,{config:fa,className:"h-full w-full",children:e.jsxs(ht,{accessibilityLayer:!0,data:n,margin:{top:30},children:[e.jsx(Q,{vertical:!0,horizontal:!1}),e.jsx(F,{dataKey:"period",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(G,{hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(Me,{})}),e.jsx(z,{dataKey:"count",strokeWidth:2,radius:8,activeIndex:d,activeBar:({...i})=>e.jsx(Fe,{...i,fillOpacity:.8,stroke:i.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})}),e.jsx(Be,{type:"linear",dataKey:r==="percentage"?"percentage":"count",stroke:"#dc2626",strokeWidth:3,dot:{r:6,fill:"#dc2626"},activeDot:{r:8,stroke:"#dc2626",strokeWidth:2,fill:"#dc2626"}})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:["Promedio de cierre: ",h,"% ",e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total de ",c," reportes cerrados"]})]})]})}const pa={cerrados:{label:"Reportes Cerrados",color:"#3b82f6"},label:{color:"var(--background)"}};function xa({data:a=[]}){const t=y.useMemo(()=>{const n={};a.forEach(c=>{var h;if(c.nombreGerencia){const i=c.nombreGerencia;n[i]||(n[i]={total:0,cerrados:0}),n[i].total++,((h=c.estadoReporte)==null?void 0:h.toLowerCase())==="cerrado"&&n[i].cerrados++}});const d=["#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"];return Object.entries(n).map(([c,h],i)=>({gerencia:(c.length>15,c),fullGerencia:c,cerrados:h.cerrados,total:h.total,ratio:`${h.cerrados}/${h.total}`,percentage:h.total>0?(h.cerrados/h.total*100).toFixed(1):"0",fill:d[i%d.length]})).sort((c,h)=>h.cerrados-c.cerrados).slice(0,8)},[a]),s=y.useMemo(()=>t.reduce((n,d)=>n+d.cerrados,0),[t]),r=y.useMemo(()=>t.reduce((n,d)=>n+d.total,0),[t]),l=y.useMemo(()=>t.length>0?t[0]:null,[t]);return e.jsxs(T,{children:[e.jsxs(V,{children:[e.jsx(Z,{children:"Reportes Cerrados por Gerencia"}),e.jsx(Y,{children:"Cantidad de reportes cerrados por cada gerencia"})]}),e.jsx($,{children:e.jsx(J,{config:pa,className:"h-full w-full",children:e.jsxs(he,{accessibilityLayer:!0,data:t,layout:"vertical",margin:{right:50},children:[e.jsx(Q,{horizontal:!1}),e.jsx(G,{dataKey:"gerencia",type:"category",tickLine:!1,tickMargin:10,axisLine:!1,hide:!0}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(Me,{indicator:"line"})}),e.jsxs(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:[e.jsx(M,{dataKey:"gerencia",position:"insideLeft",offset:8,className:"fill-white",fontSize:12,fontWeight:"bold"}),e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:12,fontWeight:"bold"})]})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[l&&`${l.fullGerencia} lidera: ${l.ratio} (${l.percentage}%)`," ",e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",s,"/",r," reportes cerrados (",r>0?(s/r*100).toFixed(1):0,"%)"]})]})]})}const ga={cerrados:{label:"Reportes Cerrados",color:"#10b981"},label:{color:"var(--background)"}};function va({data:a=[]}){const[t,s]=y.useState(0),[r,l]=y.useState(""),n=10;y.useEffect(()=>{s(0)},[r]);const d=y.useMemo(()=>{const o={};a.forEach(b=>{var A;const g=b.idUsuarioCierre||"sin-id",w=b.nombreUsuarioCierre||"Sin encargado de cierre",C=`${g}-${w}`;o[C]||(o[C]={cerrados:0,noCerrados:0,total:0,idUsuario:g,nombre:w}),o[C].total+=1,((A=b.estadoReporte)==null?void 0:A.toLowerCase())==="cerrado"?o[C].cerrados+=1:o[C].noCerrados+=1});const m=Object.entries(o).sort(([,b],[,g])=>g.cerrados-b.cerrados),v=m.length,N=(b,g)=>{const w=b/Math.max(g-1,1),C=127,A=29,P=29,O=254,S=242,R=242,E=Math.round(C+(O-C)*w),_=Math.round(A+(S-A)*w),ie=Math.round(P+(R-P)*w);return`rgb(${E}, ${_}, ${ie})`};return m.map(([b,g],w)=>({responsable:g.nombre.length>10?g.nombre.substring(0,10)+"...":g.nombre,fullResponsable:g.nombre,idUsuario:g.idUsuario,cerrados:g.cerrados,noCerrados:g.noCerrados,total:g.total,ratio:`${g.cerrados}/${g.total}`,porcentaje:g.total>0?Math.round(g.cerrados/g.total*100):0,fill:N(w,v),globalRank:w+1}))},[a]),c=y.useMemo(()=>r.trim()?d.filter(o=>o.fullResponsable.toLowerCase().includes(r.toLowerCase())):d,[d,r]),h=y.useMemo(()=>{const o=t*n;return c.slice(o,o+n).map(m=>({...m,fill:m.fill}))},[c,t]),i=Math.ceil(c.length/n),u=y.useMemo(()=>d.reduce((o,m)=>o+m.cerrados,0),[d]),p=y.useMemo(()=>d.reduce((o,m)=>o+m.total,0),[d]),x=y.useMemo(()=>d.length>0?d[0]:null,[d]),j=y.useMemo(()=>{const o=d.find(m=>m.idUsuario==="sin-id");return o?o.total:0},[d]),f=({active:o,payload:m,label:v})=>{if(o&&m&&m.length){const N=m[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:N.fullResponsable}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",N.idUsuario]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Cerrados: ",N.cerrados," de ",N.total," (",N.porcentaje,"%)"]})]})}return null};return e.jsxs(T,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Responsable de Cierre"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," responsables • "]}):null,"Mostrando ",t*n+1,"-",Math.min((t+1)*n,c.length)," de"," ",c.length," responsables"]})]}),i>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(o=>Math.max(0,o-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs("span",{className:"flex items-center px-2 text-sm",children:[t+1," / ",i]}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(o=>Math.min(i-1,o+1)),disabled:t===i-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(be,{className:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),e.jsx(ne,{placeholder:"Buscar responsable...",value:r,onChange:o=>l(o.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(J,{config:ga,className:"h-full w-full",children:e.jsxs(he,{data:h,layout:"vertical",margin:{left:0,right:80,top:0,bottom:0},children:[e.jsx(Q,{horizontal:!1}),e.jsx(G,{dataKey:"responsable",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:75,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(f,{})}),e.jsx(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[x&&`${x.fullResponsable} lidera con ${x.ratio} reportes (${x.porcentaje}%)`,e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",u,"/",p," reportes cerrados (",Math.round(u/p*100),"%) • Sin encargado:"," ",j]})]})]})}const ba={promedioDias:{label:"Días Promedio",color:"#f59e0b"},alto:{label:"Alto",color:"#dc2626"},medio:{label:"Medio",color:"#f59e0b"},bajo:{label:"Bajo",color:"#16a34a"}};function ya({data:a=[]}){const t=y.useMemo(()=>{const c={};a.forEach(u=>{var p;if(((p=u.estadoReporte)==null?void 0:p.toLowerCase())==="cerrado"&&u.nivelGravedad&&u.fechaReporte&&u.reportClosedAt){const x=u.nivelGravedad.toLowerCase(),j=new Date(u.fechaReporte),o=new Date(u.reportClosedAt).getTime()-j.getTime(),m=Math.ceil(o/(1e3*60*60*24));c[x]||(c[x]={totalDias:0,cantidad:0}),c[x].totalDias+=m,c[x].cantidad+=1}});const h=["alto","medio","bajo"],i={alto:"#dc2626",medio:"#f59e0b",bajo:"#16a34a"};return h.filter(u=>c[u]).map(u=>{const p=c[u],x=p.cantidad>0?Math.round(p.totalDias/p.cantidad):0;return{gravedad:u.charAt(0).toUpperCase()+u.slice(1),promedioDias:x,cantidad:p.cantidad,fill:i[u],label:`${x} días (${p.cantidad} reportes)`}})},[a]),s=y.useMemo(()=>a.filter(c=>{var h;return((h=c.estadoReporte)==null?void 0:h.toLowerCase())==="cerrado"}).length,[a]),r=y.useMemo(()=>t.reduce((c,h)=>c+h.cantidad,0),[t]),l=y.useMemo(()=>{if(t.length===0)return 0;const c=t.reduce((h,i)=>h+i.promedioDias*i.cantidad,0);return Math.round(c/r)},[t,r]),n=y.useMemo(()=>{let c=0,h=0;return t.forEach((i,u)=>{i.promedioDias>c&&(c=i.promedioDias,h=u)}),h},[t]),d=y.useMemo(()=>t.reduce((c,h)=>h.promedioDias>c.promedioDias?h:c,t[0]||{gravedad:"",promedioDias:0}),[t]);return e.jsxs(T,{children:[e.jsxs(V,{children:[e.jsx(Z,{children:"Días de Cierre Promedio por Nivel de Gravedad"}),e.jsx(Y,{children:"Tiempo promedio de cierre según el nivel de gravedad del reporte"})]}),e.jsx($,{children:e.jsx(J,{config:ba,className:"h-full w-full",children:e.jsxs(he,{accessibilityLayer:!0,data:t,margin:{top:30,right:30,left:20,bottom:20},children:[e.jsx(Q,{vertical:!1,horizontal:!0}),e.jsx(F,{dataKey:"gravedad",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(G,{hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(Me,{formatter:(c,h,i)=>[`${c} días promedio`,`${i.payload.cantidad} reportes`]})}),e.jsx(z,{dataKey:"promedioDias",strokeWidth:2,radius:8,activeIndex:n,activeBar:({...c})=>e.jsx(Fe,{...c,fillOpacity:.8,stroke:c.payload.fill,strokeDasharray:4,strokeDashoffset:4}),children:e.jsx(M,{dataKey:"label",position:"top",offset:12,className:"fill-foreground",fontSize:11})})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[d.gravedad&&`Gravedad ${d.gravedad}: ${d.promedioDias} días promedio`," ",e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Promedio general: ",l," días • ",s," reportes cerrados (",r," con datos completos para análisis)"]})]})]})}const ja={cerrados:{label:"Reportes Cerrados",color:"#8b5cf6"},label:{color:"var(--background)"}};function Na({data:a=[]}){const[t,s]=y.useState(0),[r,l]=y.useState(""),n=10;y.useEffect(()=>{s(0)},[r]);const d=y.useMemo(()=>{const o={};a.forEach(b=>{var A;const g=b.idUsuarioReporta||"sin-id",w=b.nombreUsuarioReporta||"Sin usuario reportante",C=`${g}-${w}`;o[C]||(o[C]={total:0,cerrados:0,idUsuario:g,nombre:w}),o[C].total++,((A=b.estadoReporte)==null?void 0:A.toLowerCase())==="cerrado"&&o[C].cerrados++});const m=Object.entries(o).sort(([,b],[,g])=>g.total!==b.total?g.total-b.total:g.cerrados-b.cerrados),v=m.length,N=(b,g)=>{if(g===1)return"#8b5cf6";const w=b/Math.max(1,g-1),C=196,A=164,P=255,O=109,S=40,R=217,E=Math.round(C+(O-C)*w),_=Math.round(A+(S-A)*w),ie=Math.round(P+(R-P)*w);return`rgb(${E}, ${_}, ${ie})`};return m.map(([b,g],w)=>({reporter:g.nombre.length>10?g.nombre.substring(0,10)+"...":g.nombre,fullReporter:g.nombre,idUsuario:g.idUsuario,cerrados:g.cerrados,total:g.total,ratio:`${g.cerrados}/${g.total}`,porcentaje:g.total>0?Math.round(g.cerrados/g.total*100):0,fill:N(w,v),globalRank:w+1}))},[a]),c=y.useMemo(()=>r.trim()?d.filter(o=>o.fullReporter.toLowerCase().includes(r.toLowerCase())):d,[d,r]),h=y.useMemo(()=>{const o=t*n;return c.slice(o,o+n).map(m=>({...m,fill:m.fill}))},[c,t]),i=Math.ceil(c.length/n),u=y.useMemo(()=>d.reduce((o,m)=>o+m.cerrados,0),[d]),p=y.useMemo(()=>d.reduce((o,m)=>o+m.total,0),[d]),x=y.useMemo(()=>d.length>0?d[0]:null,[d]),j=y.useMemo(()=>{const o=d.find(m=>m.idUsuario==="sin-id");return o?o.total:0},[d]),f=({active:o,payload:m})=>{if(o&&m&&m.length){const v=m[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:v.fullReporter}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",v.idUsuario]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Reportados: ",v.total," • Cerrados: ",v.cerrados," (",v.porcentaje,"%)"]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Ranking: #",v.globalRank]})]})}return null};return e.jsxs(T,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Usuario que Reporta"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," usuarios • "]}):null,"Mostrando ",t*n+1,"-",Math.min((t+1)*n,c.length)," de"," ",c.length," usuarios"]})]}),i>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(i-1,t+1)),disabled:t>=i-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"Buscar usuario reportante...",value:r,onChange:o=>l(o.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(J,{config:ja,className:"h-full w-full",children:e.jsxs(he,{data:h,layout:"vertical",height:Math.max(h.length*80,400),margin:{left:0,right:80,top:0,bottom:0},children:[e.jsx(Q,{horizontal:!1}),e.jsx(G,{dataKey:"reporter",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:75,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{dataKey:"cerrados",type:"number",hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(f,{})}),e.jsx(z,{dataKey:"cerrados",layout:"vertical",radius:4,children:e.jsx(M,{dataKey:"ratio",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[x&&`${x.fullReporter} lidera con ${x.ratio} reportes (${x.porcentaje}%)`,e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total reportados: ",p," • Total cerrados: ",u,j>0&&` • Sin reportante: ${j}`]})]})]})}const wa={generado:{label:"Generado",color:"#ef4444"},visualizado:{label:"Visualizado",color:"#f59e0b"},cerrado:{label:"Cerrado",color:"#10b981"},label:{color:"var(--background)"}};function Ca({data:a=[]}){const[t,s]=y.useState(0),[r,l]=y.useState(""),n=10;y.useEffect(()=>{s(0)},[r]);const d=y.useMemo(()=>{const f={};return a.forEach(m=>{var w;const v=m.idUsuarioCierre||"sin-id",N=m.nombreUsuarioCierre||"Sin encargado de cierre",b=`${v}-${N}`,g=(w=m.estadoReporte)==null?void 0:w.toLowerCase();f[b]||(f[b]={generado:0,visualizado:0,cerrado:0,total:0,idUsuario:v,nombre:N}),f[b].total++,g==="generado"?f[b].generado++:g==="visualizado"?f[b].visualizado++:g==="cerrado"&&f[b].cerrado++}),Object.entries(f).sort(([,m],[,v])=>{const N=m.total>0?m.cerrado/m.total*100:0,b=v.total>0?v.cerrado/v.total*100:0;return b!==N?b-N:v.total-m.total}).map(([m,v],N)=>{const b=v.total>0?v.generado/v.total*100:0,g=v.total>0?v.visualizado/v.total*100:0,w=v.total>0?v.cerrado/v.total*100:0;let C=Math.round(b),A=Math.round(g),P=Math.round(w);const S=100-(C+A+P);if(S!==0&&v.total>0){const R=[{key:"generado",decimal:b-C,value:C},{key:"visualizado",decimal:g-A,value:A},{key:"cerrado",decimal:w-P,value:P}].sort((E,_)=>Math.abs(_.decimal)-Math.abs(E.decimal));R[0].key==="generado"?C+=S:R[0].key==="visualizado"?A+=S:P+=S}return{idResponsable:v.idUsuario,responsable:v.nombre.length>12?v.nombre.substring(0,12)+"...":v.nombre,fullResponsable:v.nombre,generado:v.generado,visualizado:v.visualizado,cerrado:v.cerrado,total:v.total,performance:v.total>0?Math.round(v.cerrado/v.total*100):0,generadoPercent:C,visualizadoPercent:A,cerradoPercent:P,generadoPercentRounded:C,visualizadoPercentRounded:A,cerradoPercentRounded:P,globalRank:N+1}})},[a]),c=y.useMemo(()=>r.trim()?d.filter(f=>f.fullResponsable.toLowerCase().includes(r.toLowerCase())):d,[d,r]),h=y.useMemo(()=>{const f=t*n;return c.slice(f,f+n)},[c,t]),i=Math.ceil(c.length/n),u=y.useMemo(()=>d.reduce((f,o)=>f+o.total,0),[d]),p=y.useMemo(()=>d.reduce((f,o)=>({generado:f.generado+o.generado,visualizado:f.visualizado+o.visualizado,cerrado:f.cerrado+o.cerrado}),{generado:0,visualizado:0,cerrado:0}),[d]),x=y.useMemo(()=>d.length>0?d[0]:null,[d]),j=({active:f,payload:o})=>{if(f&&o&&o.length){const m=o[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg",children:[e.jsx("p",{className:"text-foreground font-semibold",children:m.fullResponsable}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID: ",m.idResponsable]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Total asignados: ",m.total," • Performance: ",m.performance,"%"]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-red-500 rounded mr-2"}),"Generado: ",m.generado," (",m.generadoPercentRounded,"%)"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-amber-500 rounded mr-2"}),"Visualizado: ",m.visualizado," (",m.visualizadoPercentRounded,"%)"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"inline-block w-3 h-3 bg-green-500 rounded mr-2"}),"Cerrado: ",m.cerrado," (",m.cerradoPercentRounded,"%)"]})]}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-2",children:["Ranking: #",m.globalRank]})]})}return null};return e.jsxs(T,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Distribución de Estados por Responsable de Cierre"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",c.length," responsables • "]}):null,"Mostrando ",t*n+1,"-",Math.min((t+1)*n,c.length)," de"," ",c.length," responsables"]})]}),i>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(i-1,t+1)),disabled:t>=i-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"Buscar responsable...",value:r,onChange:f=>l(f.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(J,{config:wa,className:"h-full w-full",children:e.jsxs(he,{data:h,layout:"vertical",margin:{left:0,right:30,top:0,bottom:0},children:[e.jsx(Q,{horizontal:!1}),e.jsx(G,{dataKey:"responsable",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:100,tick:{fontSize:11,fill:"var(--foreground)"}}),e.jsx(F,{type:"number",hide:!0,domain:[0,100]}),e.jsx(ee,{cursor:!1,content:e.jsx(j,{})}),e.jsx(z,{dataKey:"generadoPercent",stackId:"status",fill:"var(--color-generado)",radius:[4,0,0,4],children:e.jsx(M,{dataKey:"generadoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:f=>f>5?`${f}%`:""})}),e.jsx(z,{dataKey:"visualizadoPercent",stackId:"status",fill:"var(--color-visualizado)",children:e.jsx(M,{dataKey:"visualizadoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:f=>f>5?`${f}%`:""})}),e.jsxs(z,{dataKey:"cerradoPercent",stackId:"status",fill:"var(--color-cerrado)",radius:[0,4,4,0],children:[e.jsx(M,{dataKey:"cerradoPercentRounded",position:"center",className:"fill-white text-xs font-medium",formatter:f=>f>5?`${f}%`:""}),e.jsx(M,{dataKey:"total",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})]})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:["                ",e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[x&&`${x.fullResponsable} lidera con ${x.performance}% de cierre (${x.total} reportes)`,e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total asignados: ",u," • Generados: ",p.generado," • Visualizados: ",p.visualizado," • Cerrados: ",p.cerrado]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{children:"Generado"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded"}),e.jsx("span",{children:"Visualizado"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Cerrado"})]})]})]})]})}const Aa={actos:{label:"Actos",color:"#3b82f6"},condiciones:{label:"Condiciones",color:"#f59e0b"},incidentes:{label:"Incidentes",color:"#10b981"},label:{color:"var(--background)"}};function Da({data:a=[]}){const[t,s]=y.useState(0),[r,l]=y.useState(""),n=10;y.useEffect(()=>{s(0)},[r]);const d=o=>{switch(o==null?void 0:o.toLowerCase()){case"actos":return"Actos Subestándar";case"condiciones":return"Condiciones Subestándar";case"incidentes":return"Incidentes";default:return o||"N/A"}},c=y.useMemo(()=>{const o=a.filter(N=>N.idCausa&&N.tipoReporte&&N.causaReporte&&["actos","condiciones","incidentes"].includes(N.tipoReporte.toLowerCase())),m={};return o.forEach(N=>{const b=N.idCausa.toString(),g=N.tipoReporte.toLowerCase(),w=N.causaReporte,C=`${b}-${g}`;m[C]||(m[C]={nombre:w,total:0,tipo:g}),m[C].total++}),Object.entries(m).sort(([,N],[,b])=>b.total-N.total).map(([N,b],g)=>{const w=N.split("-")[0];let C="",A="";switch(b.tipo){case"actos":C="ASE",A="#3b82f6";break;case"condiciones":C="CSE",A="#f59e0b";break;case"incidentes":C="I",A="#10b981";break}const P=`${C} - ${b.nombre}`,O=P.length>15?P.substring(0,15)+"...":P;return{key:N,causa:O,fullCausa:P,idCausa:w,total:b.total,tipo:b.tipo,tipoLabel:d(b.tipo),color:A,globalRank:g+1}})},[a]),h=y.useMemo(()=>r.trim()?c.filter(o=>o.fullCausa.toLowerCase().includes(r.toLowerCase())):c,[c,r]),i=y.useMemo(()=>{const o=t*n;return h.slice(o,o+n)},[h,t]),u=Math.ceil(h.length/n),p=y.useMemo(()=>c.reduce((o,m)=>o+m.total,0),[c]),x=y.useMemo(()=>c.reduce((o,m)=>{switch(m.tipo){case"actos":o.actos+=m.total;break;case"condiciones":o.condiciones+=m.total;break;case"incidentes":o.incidentes+=m.total;break}return o},{actos:0,condiciones:0,incidentes:0}),[c]),j=y.useMemo(()=>c.length>0?c[0]:null,[c]),f=({active:o,payload:m})=>{if(o&&m&&m.length){const v=m[0].payload;return e.jsxs("div",{className:"bg-background border-border rounded-lg border p-3 shadow-lg max-w-xs",children:[e.jsx("p",{className:"text-foreground font-semibold w-[300px] break-words leading-tight mb-2",children:v.fullCausa}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["ID Causa: ",v.idCausa]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Total reportes: ",v.total]}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Tipo: ",v.tipoLabel]}),e.jsxs("p",{className:"text-muted-foreground text-sm mt-2",children:["Ranking: #",v.globalRank]})]})}return null};return e.jsxs(T,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Distribución de Causas por Tipo de Reporte"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontradas ",h.length," causas • "]}):null,"Mostrando ",t*n+1,"-",Math.min((t+1)*n,h.length)," de"," ",h.length," causas"]})]}),u>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(u-1,t+1)),disabled:t>=u-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"Buscar causa...",value:r,onChange:o=>l(o.target.value),className:"pl-8"})]})]})}),e.jsx($,{children:e.jsx(J,{config:Aa,className:"h-full w-full",children:e.jsxs(he,{data:i,layout:"vertical",height:Math.max(i.length*60,400),margin:{left:0,right:60,top:0,bottom:0},children:[e.jsx(Q,{horizontal:!1}),e.jsx(G,{dataKey:"causa",type:"category",tickLine:!1,tickMargin:0,axisLine:!1,width:120,tick:{fontSize:10,fill:"var(--foreground)"}}),e.jsx(F,{type:"number",hide:!0}),e.jsx(ee,{cursor:!1,content:e.jsx(f,{})}),e.jsxs(z,{dataKey:"total",radius:[0,4,4,0],children:[i.map((o,m)=>e.jsx(at,{fill:o.color},`cell-${m}`)),e.jsx(M,{dataKey:"total",position:"right",offset:8,className:"fill-foreground",fontSize:11,fontWeight:"bold"})]})]})})}),e.jsxs(q,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:[j&&`${j.fullCausa} lidera con ${j.total} reportes`,e.jsx(te,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"leading-none text-muted-foreground",children:["Total reportes: ",p," • Actos Subestándar: ",x.actos," • Condiciones Subestándar: ",x.condiciones," • Incidentes: ",x.incidentes]}),e.jsxs("div",{className:"flex gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Actos Subestándar (ASE)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),e.jsx("span",{children:"Condiciones Subestándar (CSE)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Incidentes (I)"})]})]})]})]})}const Pa=a=>{switch(a==null?void 0:a.toLowerCase()){case"generado":return"bg-red-100 text-red-800 hover:bg-red-200";case"visualizado":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"cerrado":return"bg-green-100 text-green-800 hover:bg-green-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Sa=a=>{switch(a==null?void 0:a.toLowerCase()){case"alto":case"alta":return"bg-red-100 text-red-800 hover:bg-red-200";case"medio":case"media":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"bajo":case"baja":return"bg-green-100 text-green-800 hover:bg-green-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Ra=a=>{switch(a==null?void 0:a.toLowerCase()){case"actos":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"condiciones":return"bg-orange-100 text-orange-800 hover:bg-orange-200";case"incidentes":return"bg-purple-100 text-purple-800 hover:bg-purple-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},Ze=a=>{switch(a==null?void 0:a.toLowerCase()){case"actos":return"Actos Subestándar";case"condiciones":return"Condiciones Subestándar";case"incidentes":return"Incidentes";default:return a||"N/A"}};function Oa({data:a=[]}){const[t,s]=y.useState(0),[r,l]=y.useState(""),n=8;y.useEffect(()=>{s(0)},[r]);const d=y.useMemo(()=>r.trim()?a.filter(i=>{var u,p,x,j,f;return((u=i.id)==null?void 0:u.toString().includes(r))||((p=i.tipoReporte)==null?void 0:p.toLowerCase().includes(r.toLowerCase()))||((x=i.descripcionEvento)==null?void 0:x.toLowerCase().includes(r.toLowerCase()))||((j=i.estadoReporte)==null?void 0:j.toLowerCase().includes(r.toLowerCase()))||((f=i.nivelGravedad)==null?void 0:f.toLowerCase().includes(r.toLowerCase()))}):a,[a,r]),c=y.useMemo(()=>{const i=t*n;return d.slice(i,i+n)},[d,t]),h=Math.ceil(d.length/n);return e.jsxs(T,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Detalle de Reportes"}),e.jsxs(Y,{children:[r?e.jsxs(e.Fragment,{children:["Encontrados ",d.length," reportes • "]}):null,"Mostrando ",t*n+1,"-",Math.min((t+1)*n,d.length)," de"," ",d.length," reportes"]})]}),h>1&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.max(0,t-1)),disabled:t===0,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(L,{variant:"outline",size:"sm",onClick:()=>s(Math.min(h-1,t+1)),disabled:t>=h-1,children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"text-muted-foreground absolute top-2.5 left-2.5 h-4 w-4"}),e.jsx(ne,{placeholder:"Buscar por ID, tipo, descripción, estado o gravedad...",value:r,onChange:i=>l(i.target.value),className:"pl-8"})]})]})}),e.jsx($,{className:"overflow-auto",children:e.jsx(Et,{children:e.jsxs(St,{children:[e.jsx(Rt,{children:e.jsxs(ze,{children:[e.jsx(le,{className:"w-16",children:"ID"}),e.jsx(le,{className:"w-32",children:"Tipo"}),e.jsx(le,{className:"w-40",children:"Descripción"}),e.jsx(le,{className:"w-32",children:"Gravedad"}),e.jsx(le,{className:"w-32",children:"Estado"}),e.jsx(le,{className:"w-32",children:"Fecha Evento"})]})}),e.jsxs(Ot,{children:[c.map(i=>e.jsxs(Mt,{delayDuration:300,children:[e.jsx(kt,{asChild:!0,children:e.jsxs(ze,{className:"cursor-help",children:[e.jsx(ae,{className:"font-medium",children:i.id}),e.jsx(ae,{children:e.jsx($e,{className:Ra(i.tipoReporte||""),children:Ze(i.tipoReporte||"")})}),e.jsx(ae,{className:"max-w-40",children:e.jsx("div",{className:"truncate",children:i.descripcionEvento||"Sin descripción"})}),e.jsx(ae,{children:e.jsx($e,{className:Sa(i.nivelGravedad||""),children:i.nivelGravedad||"N/A"})}),e.jsx(ae,{children:e.jsx($e,{className:Pa(i.estadoReporte||""),children:i.estadoReporte||"N/A"})}),e.jsx(ae,{className:"text-muted-foreground text-sm",children:i.fechaEvento?new Date(i.fechaEvento).toLocaleDateString("es-PE"):"N/A"})]})}),e.jsx(Tt,{className:"max-w-sm p-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"ID:"})," ",i.id||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tipo:"})," ",Ze(i.tipoReporte||"")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Descripción:"})," ",i.descripcionEvento||"Sin descripción"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gravedad:"})," ",i.nivelGravedad||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Estado:"})," ",i.estadoReporte||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Fecha:"})," ",i.fechaEvento?new Date(i.fechaEvento).toLocaleDateString("es-PE"):"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Causa:"})," ",i.causaReporte||"N/A"]})]})})]},i.id)),c.length===0&&e.jsx(ze,{children:e.jsx(ae,{colSpan:6,className:"py-8 text-center",children:"No se encontraron reportes"})})]})]})})})]})}function Ea({companies:a,titles:t,onFiltersChange:s}){const[r,l]=y.useState({status:"Todos",company:"",reportType:"Todos",startDate:"",endDate:""});y.useEffect(()=>{const u=new Date,p=new Date(u.getFullYear()-1,u.getMonth(),u.getDate());l(x=>({...x,startDate:p.toISOString().split("T")[0],endDate:u.toISOString().split("T")[0]}))},[]);const n=(u,p)=>{l(x=>({...x,[u]:p}))},d=()=>{console.log("Applied filters:",r),s(r)},c=()=>{const u=new Date,x={status:"Todos",company:"",reportType:"Todos",startDate:new Date(u.getFullYear()-1,u.getMonth(),u.getDate()).toISOString().split("T")[0],endDate:u.toISOString().split("T")[0]};l(x),s(x)},h=[{label:"Todos",value:"Todos"},{label:"Generado",value:"Generado"},{label:"Visualizado",value:"Visualizado"},{label:"Cerrado",value:"Cerrado"}],i=a.map(u=>{var p;return{label:u.name||u.nombre||"Empresa",value:((p=u.id)==null?void 0:p.toString())||""}});return e.jsxs("div",{className:"sticky top-10 z-10 bg-white p-3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Filtros"}),e.jsxs("form",{onSubmit:u=>{u.preventDefault(),d()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3 mb-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Estado"}),e.jsxs(Ae,{value:r.status,onValueChange:u=>n("status",u),children:[e.jsx(De,{children:e.jsx(Pe,{placeholder:"Seleccionar estado"})}),e.jsx(Se,{children:h.map((u,p)=>e.jsx(re,{value:u.value,children:u.label},p))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Empresa"}),e.jsx($t,{data:i,value:r.company,onChange:u=>n("company",u),placeholder:"Seleccionar empresa",className:"w-full"})]}),"                    ",e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tipo de reporte"}),e.jsxs(Ae,{value:r.reportType,onValueChange:u=>n("reportType",u),children:[e.jsx(De,{children:e.jsx(Pe,{placeholder:"Seleccionar tipo"})}),e.jsxs(Se,{children:[e.jsx(re,{value:"Todos",children:"Todos"}),Object.entries(t).map(([u,p])=>e.jsx(re,{value:u,children:p},u))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fecha Desde"}),e.jsx(ne,{type:"date",value:r.startDate,onChange:u=>n("startDate",u.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fecha Hasta"}),e.jsx(ne,{type:"date",value:r.endDate,onChange:u=>n("endDate",u.target.value),className:"w-full"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"submit",children:"Aplicar Filtros"}),e.jsx(L,{type:"button",variant:"outline",onClick:c,children:"Limpiar Filtros"})]})]})]})}const Ma=[{title:"Dashboard",href:"/dashboard"}];function ur({companies:a,entities:t,titles:s}){const[r,l]=y.useState({status:"",company:"",reportType:"",startDate:"",endDate:""}),[n,d]=y.useState({}),[c,h]=y.useState([]),[i,u]=y.useState(!1),p=(f,o)=>!f||!Array.isArray(f)?[]:f.filter(m=>{if(o.status&&o.status!=="Todos"){if(o.status==="Generado"){if(m.estadoReporte!=="Generado"&&m.estadoReporte!==null&&m.estadoReporte!==void 0&&m.estadoReporte!=="")return!1}else if(m.estadoReporte!==o.status)return!1}return!(o.company&&m.idEmpresaReportada!==o.company||o.reportType&&o.reportType!=="Todos"&&m.tipoReporte!==o.reportType)}),x=async f=>{var o;try{u(!0),console.log("🔍 Aplicando filtros a la API:",f);const m=await xt.get(route("api.dashboard.index"),{params:f});console.log("📥 Respuesta de la API:",m.data),console.log("📊 Cantidad de reportes recibidos:",((o=m.data.data)==null?void 0:o.length)||0),d(m.data);const v=p(m.data.data||[],f);h(v),console.log("✅ Data actualizada en el estado principal:",m.data),console.log("🎯 Data filtrada localmente (cantidad):",v.length),console.log("🎯 Data filtrada localmente (contenido):",v)}catch(m){console.error("Error al obtener datos del dashboard:",m),h([])}finally{u(!1)}};y.useEffect(()=>{const f=new Date,m={status:"",company:"",reportType:"",startDate:new Date(f.getFullYear()-1,f.getMonth(),f.getDate()).toISOString().split("T")[0],endDate:f.toISOString().split("T")[0]};console.log("🚀 Inicializando Dashboard con filtros por defecto:",m),l(m),x(m)},[]);const j=f=>{var v;const o=r;if(l(f),console.log("🔄 Filtros actualizados en Dashboard:",f),console.log("🔄 Filtros anteriores:",o),o.startDate!==f.startDate||o.endDate!==f.endDate)console.log("📅 Las fechas cambiaron, consultando API..."),console.log("📅 Fecha anterior: startDate =",o.startDate,", endDate =",o.endDate),console.log("📅 Fecha nueva: startDate =",f.startDate,", endDate =",f.endDate),x(f);else{console.log("🏠 Solo cambiaron filtros locales, aplicando filtrado..."),console.log("🏠 Filtros que cambiaron (sin fechas):",{status:o.status!==f.status?{anterior:o.status,nuevo:f.status}:"sin cambio",company:o.company!==f.company?{anterior:o.company,nuevo:f.company}:"sin cambio",reportType:o.reportType!==f.reportType?{anterior:o.reportType,nuevo:f.reportType}:"sin cambio"}),console.log("🏠 Data disponible para filtrar (cantidad):",((v=n.data)==null?void 0:v.length)||0);const N=p(n.data||[],f);h(N),console.log("🏠 Data filtrada localmente (cantidad):",N.length),console.log("🏠 Data filtrada localmente (contenido):",N)}};return e.jsxs(vt,{breadcrumbs:Ma,children:[e.jsx(pt,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 pt-0",children:[e.jsx(Ea,{companies:a,titles:s,onFiltersChange:j}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx(ua,{data:c}),e.jsx("div",{className:"col-span-1 lg:col-span-3",children:e.jsx(ma,{data:c})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(ha,{data:c}),e.jsx(xa,{data:c}),e.jsx(va,{data:c}),e.jsx(ya,{data:c}),e.jsx(Ca,{data:c}),e.jsx(Na,{data:c}),e.jsx(Da,{data:c}),e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsx(Oa,{data:c})})]})]})]})}export{ur as default};
