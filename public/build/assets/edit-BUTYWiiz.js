import{m as F,r as m,j as a}from"./app-BrE_DW6v.js";import{I as r}from"./input-error-BqJUiAGN.js";import{B as I}from"./button-DRinBeoB.js";import{D as _,b as L,c as V,d as p,e as y}from"./dialog-CUyr9pRU.js";import{I as d}from"./input-CrQhGnBg.js";import{L as o}from"./label-BE0lwKFF.js";import{S as T,a as w,b as z,c as A,f as B}from"./select-BYzAORup.js";import{t as h}from"./index-Dkfpp0nt.js";import{L as P}from"./loader-circle-n4Ue4q5C.js";import"./utils-CISCwvQU.js";import"./index-BepoNP-L.js";import"./createLucideIcon-CgrwBIBF.js";import"./index-17Co9tRC.js";import"./index-CM047A5K.js";import"./index-CTWSnWBA.js";import"./index-DM7GVMTz.js";import"./index-BYBiqWIa.js";import"./check-DrBqCDzO.js";function ia({isOpen:u=!1,onOpenChange:c,person:e,roles:n}){const{data:l,setData:s,put:v,processing:j,errors:t,clearErrors:b}=F({id:(e==null?void 0:e.id)||0,doi:(e==null?void 0:e.doi)||"",email:(e==null?void 0:e.email)||"",nombres:(e==null?void 0:e.nombres)||"",apellidos:(e==null?void 0:e.apellidos)||"",telefono:(e==null?void 0:e.telefono)||"",cargo:(e==null?void 0:e.cargo)||"",role_id:(e==null?void 0:e.role_id)||0}),[D,g]=m.useState(u),[N,S]=m.useState(!1);m.useEffect(()=>{g(u)},[u]),m.useEffect(()=>{e&&s({id:e.id,doi:e.doi,email:e.email,nombres:e.nombres,apellidos:e.apellidos,telefono:e.telefono,cargo:e.cargo,role_id:e.role_id||0})},[e,s]),m.useEffect(()=>{S(l.doi.trim()!==""&&l.nombres.trim()!==""&&l.apellidos.trim()!=="")},[l.doi,l.nombres,l.apellidos]);const C=i=>{i.preventDefault(),v(route("contrata.personal.update",e==null?void 0:e.id),{onSuccess:f=>{const x=f.props.flash;x.success&&(h.success(x.success),g(!1),c&&c(!1)),x.error&&h.error(x.error)},onError:f=>{g(!0),h.error("Ocurrió un error al intentar actualizar la persona.")}})},E=i=>{g(i),c&&c(i),i||b()};return a.jsx("div",{children:a.jsx(_,{open:D,onOpenChange:E,children:a.jsxs(L,{className:"sm:max-w-[425px]",children:[a.jsxs(V,{children:[a.jsx(p,{children:"Editar Persona"}),a.jsx(y,{children:"Complete los campos para editar la persona."})]}),a.jsxs("form",{onSubmit:C,className:"space-y-3",method:"post",action:route("contrata.personal.update",e==null?void 0:e.id),children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"doi",children:"DOI"}),a.jsx(d,{id:"doi",value:l.doi,onChange:i=>s("doi",i.target.value)}),a.jsx(r,{message:t.doi})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"email",children:"Email"}),a.jsx(d,{id:"email",type:"email",value:l.email,onChange:i=>s("email",i.target.value)}),a.jsx(r,{message:t.email})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"nombres",children:"Nombres"}),a.jsx(d,{id:"nombres",value:l.nombres,onChange:i=>s("nombres",i.target.value)}),a.jsx(r,{message:t.nombres})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"apellidos",children:"Apellidos"}),a.jsx(d,{id:"apellidos",value:l.apellidos,onChange:i=>s("apellidos",i.target.value)}),a.jsx(r,{message:t.apellidos})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"telefono",children:"Teléfono"}),a.jsx(d,{id:"telefono",value:l.telefono,onChange:i=>s("telefono",i.target.value)}),a.jsx(r,{message:t.telefono})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"cargo",children:"Cargo"}),a.jsx(d,{id:"cargo",value:l.cargo,onChange:i=>s("cargo",i.target.value)}),a.jsx(r,{message:t.cargo})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(o,{htmlFor:"role_id",children:"Rol"}),a.jsxs(T,{value:l.role_id,onValueChange:i=>s("role_id",i),children:[a.jsx(w,{children:a.jsx(z,{placeholder:"Seleccionar rol"})}),a.jsx(A,{children:n.map(i=>a.jsxs(B,{value:i.id.toString(),children:[i.nombre," (",i.code,")"]},i.id))})]}),a.jsx(r,{message:t.role_id})]}),a.jsxs(I,{type:"submit",className:"mt-2",disabled:j||!N,children:[j&&a.jsx(P,{className:"h-4 w-4 animate-spin"}),"Actualizar"]})]})]})})})}export{ia as default};
