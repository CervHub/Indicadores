import{j as a,K as $,L as S,U as G}from"./app-CgNGoX1T.js";import{T as j,a as g,b as V,c as K,A as F}from"./app-layout-Cyb6ZZhk.js";import{b as y}from"./utils-U4jazdRL.js";import{B as q}from"./badge-CcqUiYB5.js";import{B as w}from"./button-kaTXcZii.js";import{A as B}from"./arrow-up-down-CBc07TzT.js";import{T as z}from"./trash-2-BkbSOv5k.js";import{T as W,a as J,b as P,c as Q,D as t}from"./tabs-BDKUBS_C.js";import{C as b,a as _,b as A,c as k,d as D}from"./card-B2os1Hz1.js";import{I as p}from"./input-BaOlmdqF.js";import{L as x}from"./label-45C58I4J.js";import X from"./chart-GJKVRWg1.js";import"./index-B22GprOE.js";import"./index-DJE-FRJd.js";import"./index-l0oIqbCP.js";import"./index-bp9c4tc-.js";import"./index-CO15HDNe.js";import"./index-CIWOqMap.js";import"./index-Cv5k7vAC.js";import"./chevrons-up-down-Bqua1p9y.js";import"./app-logo-icon-CvOeMlWY.js";import"./table-p-072SSg.js";import"./chart-BLByW2mj.js";const r=(e,l)=>a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(V,{children:a.jsx("span",{children:l})}),a.jsx(K,{children:a.jsxs("p",{children:[e,": ",l]})})]})}),T=()=>[{accessorKey:"uea",header:"UEA",cell:e=>r("UEA",e.getValue())},{accessorKey:"type",header:"Tipo",cell:e=>r("Tipo",e.getValue())},{accessorKey:"company",header:"Contrata",cell:e=>r("Compañía",e.getValue())},{accessorKey:"empl",header:"Empl"},{accessorKey:"obr",header:"Obr"},{accessorKey:"day1",header:"D. 1",cell:e=>r("D. 1",e.getValue())},{accessorKey:"day2",header:"D. 2",cell:e=>r("D. 2",e.getValue())},{accessorKey:"day3",header:"D. 3",cell:e=>r("D. 3",e.getValue())},{accessorKey:"day4",header:"D. 4",cell:e=>r("D. 4",e.getValue())},{accessorKey:"day5",header:"D. 5",cell:e=>r("D. 5",e.getValue())},{accessorKey:"day6",header:"D. 6",cell:e=>r("D. 6",e.getValue())},{accessorKey:"day7",header:"D. 7",cell:e=>r("D. 7",e.getValue())},{accessorKey:"day8",header:"D. 8",cell:e=>r("D. 8",e.getValue())},{accessorKey:"day9",header:"D. 9",cell:e=>r("D. 9",e.getValue())},{accessorKey:"day10",header:"D. 10",cell:e=>r("D. 10",e.getValue())},{accessorKey:"day11",header:"D. 11",cell:e=>r("D. 11",e.getValue())},{accessorKey:"day12",header:"D. 12",cell:e=>r("D. 12",e.getValue())},{accessorKey:"day13",header:"D. 13",cell:e=>r("D. 13",e.getValue())},{accessorKey:"day14",header:"D. 14",cell:e=>r("D. 14",e.getValue())},{accessorKey:"day15",header:"D. 15",cell:e=>r("D. 15",e.getValue())},{accessorKey:"day16",header:"D. 16",cell:e=>r("D. 16",e.getValue())},{accessorKey:"day17",header:"D. 17",cell:e=>r("D. 17",e.getValue())},{accessorKey:"day18",header:"D. 18",cell:e=>r("D. 18",e.getValue())},{accessorKey:"day19",header:"D. 19",cell:e=>r("D. 19",e.getValue())},{accessorKey:"day20",header:"D. 20",cell:e=>r("D. 20",e.getValue())},{accessorKey:"day21",header:"D. 21",cell:e=>r("D. 21",e.getValue())},{accessorKey:"day22",header:"D. 22",cell:e=>r("D. 22",e.getValue())}],o=(e,l)=>a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(V,{children:a.jsx("span",{children:l})}),a.jsx(K,{children:a.jsx("p",{children:e})})]})}),Y=()=>[{accessorKey:"uea",header:"UEA",cell:e=>o("UEA",e.getValue())},{accessorKey:"type",header:"Tipo",cell:e=>o("Tipo",e.getValue())},{accessorKey:"company",header:"Contrata",cell:e=>o("Compañía",e.getValue())},{accessorKey:"situation",header:()=>o("Situación","Situación"),cell:e=>o(e.getValue(),e.getValue())},{accessorKey:"employees",header:()=>o("Empleados","Empleados"),cell:e=>a.jsx("span",{children:e.getValue()}),size:200},{accessorKey:"workers",header:()=>o("Obreros","Obreros"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"incidents",header:()=>o("Incidentes","Incidentes"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"dangerous_incidents",header:()=>o("Incidentes peligrosos","Inc. peligrosos"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"minor_accidents",header:()=>o("Accidentes menores","Acc. menores"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"disability",header:()=>o("Incapacidad","Incapacidad"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"mortality",header:()=>o("Mortal","Mortal"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"lost_days",header:()=>o("Días perdidos","Días perdidos"),cell:e=>a.jsx("span",{children:y(e.getValue())})},{accessorKey:"man_hours_worked",header:()=>o("Horas hombre trabajadas","H.H.T."),cell:e=>a.jsx("span",{children:y(e.getValue())})},{accessorKey:"frequency_index",header:()=>o("Índice de frecuencia","Índ. frecuencia"),cell:e=>a.jsx("span",{children:y(e.getValue())})},{accessorKey:"severity_index",header:()=>o("Índice de severidad","Índ. severidad"),cell:e=>a.jsx("span",{children:y(e.getValue())})},{accessorKey:"accident_rate",header:()=>o("Tasa de accidentes","Tasa de acc."),cell:e=>a.jsx("span",{children:y(e.getValue())})}],s=(e,l)=>a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(V,{children:a.jsx("span",{children:l})}),a.jsx(K,{children:a.jsx("p",{children:e})})]})}),Z=()=>[{accessorKey:"uea",header:"UEA",cell:e=>s("UEA",e.getValue())},{accessorKey:"type",header:"Tipo",cell:e=>s("Tipo",e.getValue())},{accessorKey:"company",header:"Contrata",cell:e=>s("Compañía",e.getValue())},{accessorKey:"accident_type",header:()=>s("Tipo De Accidente (Tabla 10 De Anexo N° 31)","T.A."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"injury_nature",header:()=>s("Naturaleza De La Lesión (Tabla 11 De Anexo N° 31)","N.L."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"age",header:()=>s("Edad","Edad"),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"marital_status",header:()=>s("Estado Civil","E.C."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"education_level",header:()=>s("Nivel De Educación","N.E."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"years_experience",header:()=>s("Años De Experiencia","A.E."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"time",header:()=>s("Tiempo","T."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"day",header:()=>s("Día","Día"),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"month_name",header:()=>s("Mes","Mes"),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"partial_temporary",header:()=>s("Parcial Temporal","P.T."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"permanent_temporary",header:()=>s("Permanente Temporal","P.T."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"partial_permanent",header:()=>s("Parcial Permanente","P.P."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"total_permanent",header:()=>s("Total Permanente","T.P."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"disability",header:()=>s("Incapacidad","I."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"occupation",header:()=>s("Ocupación","O."),cell:e=>s(e.getValue(),e.getValue())},{accessorKey:"remuneration",header:()=>s("Remuneración","R."),cell:e=>a.jsx("span",{children:e.getValue()})}],I=e=>[{accessorKey:"nombre",header:({column:l})=>a.jsxs(w,{variant:"ghost",onClick:()=>l.toggleSorting(l.getIsSorted()==="asc"),children:["Nombre",a.jsx(B,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"ruc",header:"RUC",cell:({row:l})=>l.original.ruc||"N/A"},{accessorKey:"estado",header:"Estado",cell:({row:l})=>a.jsx(q,{variant:l.original.estado=="1"?"success":"destructive",children:l.original.estado=="1"?"Activa":"Inactiva"})},{id:"actions",header:"Acciones",cell:({row:l})=>{const h=l.original;return a.jsx("div",{className:"flex gap-2",children:a.jsx(w,{"aria-label":"Eliminar",className:"h-7 bg-red-700 p-2 text-xs text-white hover:bg-red-900 dark:bg-red-600 dark:hover:bg-red-800",onClick:()=>e(h.id,"eliminar"),children:a.jsx(z,{className:"h-3 w-3"})})})}}],n=(e,l)=>a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(V,{children:a.jsx("span",{children:l})}),a.jsx(K,{children:a.jsx("p",{children:e})})]})}),ee=()=>[{accessorKey:"uea",header:"UEA",cell:e=>n("UEA",e.getValue())},{accessorKey:"type",header:"Tipo",cell:e=>n("Tipo",e.getValue())},{accessorKey:"company",header:"Contrata",cell:e=>n("Compañía",e.getValue())},{accessorKey:"concession_code",header:()=>n("Codigo de la Concesion","Concesión"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"local_male_workers",header:()=>n("Obrero Hombre Trabajador Local","O.H.T.L"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"regional_male_workers",header:()=>n("Obrero Hombre Trabajador Regional","O.H.T.R"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"national_male_workers",header:()=>n("Obrero Hombre Trabajador Nacional","O.H.T.N"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"foreign_male_workers",header:()=>n("Obrero Hombre Trabajador Extranjero","O.H.T.E"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"local_female_workers",header:()=>n("Obrero Mujer Trabajadora Local","O.M.T.L"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"regional_female_workers",header:()=>n("Obrero Mujer Trabajadora Regional","O.M.T.R"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"national_female_workers",header:()=>n("Obrero Mujer Trabajadora Nacional","O.M.T.N"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"foreign_female_workers",header:()=>n("Obrero Mujer Trabajadora Extranjera","O.M.T.E"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"local_male_employees",header:()=>n("Empleado Hombre Trabajador Local","E.H.T.L"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"regional_male_employees",header:()=>n("Empleado Hombre Trabajador Regional","E.H.T.R"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"national_male_employees",header:()=>n("Empleado Hombre Trabajador Nacional","E.H.T.N"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"foreign_male_employees",header:()=>n("Empleado Hombre Trabajador Extranjero","E.H.T.E"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"local_female_employees",header:()=>n("Empleado Mujer Trabajadora Local","E.M.T.L"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"regional_female_employees",header:()=>n("Empleado Mujer Trabajadora Regional","E.M.T.R"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"national_female_employees",header:()=>n("Empleado Mujer Trabajadora Nacional","E.M.T.N"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"foreign_female_employees",header:()=>n("Empleado Mujer Trabajadora Extranjera","E.M.T.E"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"total_employees",header:()=>n("Total de Trabajadores","Trabajadores"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"total_hours_employees",header:()=>n("Total de Horas de Trabajo","Horas de Trabajo"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"mining_activities",header:()=>n("Actividades Mineras","Actividades Mineras"),cell:e=>a.jsx("span",{children:e.getValue()})}],d=(e,l)=>a.jsx(j,{children:a.jsxs(g,{children:[a.jsx(V,{children:a.jsx("span",{children:l})}),a.jsx(K,{children:a.jsx("p",{children:e})})]})}),ae=()=>[{accessorKey:"uea",header:"UEA",cell:e=>d("UEA",e.getValue())},{accessorKey:"type",header:"Tipo",cell:e=>d("Tipo",e.getValue())},{accessorKey:"company",header:"Contrata",cell:e=>d("Compañía",e.getValue())},{accessorKey:"concession_code",header:()=>d("Codigo de la Concesion","Código de la Concesión"),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"male_managers",header:()=>d("Gerentes Hombres","Gerentes H."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"male_administrative",header:()=>d("Administrativos Hombres","Administrativos H."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"male_general_operations",header:()=>d("Operaciones Generales Hombres","Operaciones Generales H."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"male_plant_staff",header:()=>d("Personal de Planta Hombres","Personal de Planta H."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"female_managers",header:()=>d("Gerentes Mujeres","Gerentes M."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"female_administrative",header:()=>d("Administrativos Mujeres","Administrativos M."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"female_plant_staff",header:()=>d("Personal de Planta Mujeres","Personal de Planta M."),cell:e=>a.jsx("span",{children:e.getValue()})},{accessorKey:"female_general_operations",header:()=>d("Operaciones Generales Mujeres","Operaciones Generales M."),cell:e=>a.jsx("span",{children:e.getValue()})}],L=[{value:"anexo24",title:"Anexo 24",description:"Detalles del Anexo 24.",abbreviation:"A24"},{value:"anexo25",title:"Anexo 25",description:"Detalles del Anexo 25.",abbreviation:"A25"},{value:"anexo26",title:"Anexo 26",description:"Detalles del Anexo 26.",abbreviation:"A26"},{value:"anexo27",title:"Anexo 27",description:"Detalles del Anexo 27.",abbreviation:"A27"},{value:"anexo28",title:"Anexo 28",description:"Detalles del Anexo 28.",abbreviation:"A28"},{value:"anexo30",title:"Anexo 30",description:"Detalles del Anexo 30.",abbreviation:"A30"},{value:"minem1",title:"Minem 1",description:"Detalles del Minem 1.",abbreviation:"M1"},{value:"minem2",title:"Minem 2",description:"Detalles del Minem 2.",abbreviation:"M2"}],le=[{title:"Consolidados",href:"/consolidated"},{title:"Detalle del Consolidado",href:"/consolidated/show"}];function se({data:e}){return a.jsxs(b,{className:"h-full w-full",children:[a.jsxs(_,{children:[a.jsx(A,{children:"Información del Cliente"}),a.jsx(k,{children:"Detalles del cliente."})]}),a.jsx(D,{children:a.jsxs("div",{className:"grid w-full grid-cols-1 items-center gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"col-span-2 flex flex-col space-y-1.5",children:[a.jsx(x,{children:"UEA:"}),a.jsx(p,{value:e.uea||"N/A",readOnly:!0})]}),a.jsxs("div",{className:"span flex flex-col space-y-1.5",children:[a.jsx(x,{children:"TIPO DE CLIENTE:"}),a.jsx(p,{value:e.contractorCompanyType||"N/A",readOnly:!0})]}),a.jsxs("div",{className:"flex flex-col space-y-1.5",children:[a.jsx(x,{children:"FECHA DE CREACION:"}),a.jsx(p,{value:e.creationDate||"N/A",readOnly:!0})]}),a.jsxs("div",{className:"flex flex-col space-y-1.5",children:[a.jsx(x,{children:"MES:"}),a.jsx(p,{value:e.month||"N/A",readOnly:!0})]}),a.jsxs("div",{className:"flex flex-col space-y-1.5",children:[a.jsx(x,{children:"AÑO:"}),a.jsx(p,{value:e.year||"N/A",readOnly:!0})]})]})})]})}function m(e,l){const h=[];return e.forEach(i=>{i[l]&&i[l].forEach(u=>{u.company=i.company.nombre,u.uea=i.uea.name,u.type=i.contractor_company_type.name,h.push(u)})}),h}function Ee(){const{consolidated:e,fileStatuses:l,companyConsolidateds:h}=$().props,i=Array.from(new Set(l.map(c=>c.contractor_company_id))),u=h.filter(c=>i.includes(c.company_id)).map(c=>c.company),U=h.filter(c=>!i.includes(c.company_id)).map(c=>c.company),v=m(l,"annex24"),E=m(l,"annex25"),f=m(l,"annex26"),C=m(l,"annex27"),N=m(l,"annex28"),M=m(l,"annex30"),O=m(l,"minem_template1"),H=m(l,"minem_template2"),R={annex24:v,annex25:E,annex26:f,annex27:C,annex28:N,annex30:M,minem_template_1:O,minem_template_2:H};return console.log("File Statuses",l),a.jsxs(F,{breadcrumbs:le,children:[a.jsx(S,{title:"Detalle del Consolidado"}),a.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsx("div",{className:"col-span-12 md:col-span-6 lg:col-span-4",children:a.jsx(se,{data:e})}),a.jsx("div",{className:"col-span-12 md:col-span-12 lg:col-span-8",children:a.jsx(X,{data:R})}),a.jsx("div",{className:"col-span-12",children:a.jsxs(W,{defaultValue:"anexo24",className:"w-full",children:[a.jsx(J,{className:"grid w-full grid-cols-8",children:L.map(c=>a.jsxs(G.Fragment,{children:[a.jsx(P,{value:c.value,className:"sm:hidden",children:c.abbreviation}),a.jsx(P,{value:c.value,className:"hidden sm:block",children:c.title})]},c.value))}),L.map(c=>a.jsx(Q,{value:c.value,children:a.jsxs(b,{children:[a.jsxs(_,{children:[a.jsx(A,{children:c.title}),a.jsx(k,{children:c.description})]}),a.jsx(D,{className:"space-y-2",children:(()=>{switch(c.value){case"anexo24":return a.jsx(t,{columns:T(),data:Array.isArray(v)?v:[]});case"anexo25":return a.jsx(t,{columns:T(),data:Array.isArray(E)?E:[]});case"anexo26":return a.jsx(t,{columns:T(),data:Array.isArray(f)?f:[]});case"anexo27":return a.jsx(t,{columns:T(),data:Array.isArray(C)?C:[]});case"anexo28":return a.jsx(t,{columns:Y(),data:Array.isArray(N)?N:[]});case"anexo30":return a.jsx(t,{columns:Z(),data:Array.isArray(M)?M:[]});case"minem1":return a.jsx(t,{columns:ee(),data:Array.isArray(O)?O:[]});case"minem2":return a.jsx(t,{columns:ae(),data:Array.isArray(H)?H:[]});default:return a.jsxs("div",{className:"space-y-1",children:[a.jsx(x,{htmlFor:`${c.value}-name`,children:"Nombre"}),a.jsx(p,{id:`${c.value}-name`})]})}})()})]})},c.value))]})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsxs(b,{children:[a.jsx(_,{children:a.jsx(A,{children:"Contratas que subieron sus Excel"})}),a.jsx(D,{children:a.jsx(t,{columns:I(),data:u})})]}),a.jsxs(b,{children:[a.jsx(_,{children:a.jsx(A,{children:"Contratas que no subieron sus Excel"})}),a.jsx(D,{children:a.jsx(t,{columns:I(),data:U})})]})]})]})]})}export{Ee as default};
