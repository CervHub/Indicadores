import{K as F,r as _,m as T,j as e}from"./app-CTL5S9iY.js";import{I as n}from"./input-error-eBVurzc1.js";import{B as y}from"./button-CXUJ0U03.js";import{D as I,a as V,b as L,c as w,d as M,e as O}from"./dialog-Bow5bgQW.js";import{I as U}from"./input-BhJySYgm.js";import{L as o}from"./label-DL_p19np.js";import{S as t,a as c,b as d,c as m,d as h,e as x,f as p}from"./select-DqDnb1_4.js";import{m as q}from"./utils-2YzkRP5P.js";import{L as B}from"./loader-circle-C52BI5FE.js";import"./index-BCT-lbNC.js";import"./index-D0mu6X-q.js";import"./index-BnBYLySk.js";import"./index-D1sDU56J.js";function $(){const{contractorCompanyTypes:v,ueas:S,flash:u}=F().props;_.useEffect(()=>{console.log("Mensajes flash al iniciar:",u)},[u]);const{data:r,setData:i,post:C,processing:g,errors:l,reset:D}=T({contractor_company_type_id:"",uea_id:"",year:"",month:"",file:null}),[A,j]=_.useState(!1),N=s=>{s.preventDefault(),C(route("annexes.store"),{onSuccess:a=>{var f;D(),j(!1),console.log("Solicitud de creación exitosa:",(f=a==null?void 0:a.props)==null?void 0:f.flash)},onError:a=>{j(!0),console.log("Errores en la solicitud de creación:",a)}})},b=()=>r.contractor_company_type_id&&r.uea_id&&r.year&&r.month&&r.file,E=Array.from({length:10},(s,a)=>new Date().getFullYear()-a);return e.jsx("div",{children:e.jsxs(I,{open:A,onOpenChange:j,children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(V,{asChild:!0,children:e.jsx(y,{className:"inline-block px-4 py-2",children:"Agregar Anexos"})})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(M,{children:"Agregar Contratista"}),e.jsx(O,{children:"Complete los campos para agregar un nuevo contratista."})]}),e.jsxs("form",{onSubmit:N,className:"space-y-3",method:"post",action:route("contractor.store"),encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"contractor_company_type_id",children:"Tipo de Cliente"}),e.jsxs(t,{required:!0,onValueChange:s=>i("contractor_company_type_id",s),value:r.contractor_company_type_id,children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Seleccione un tipo de cliente"})}),e.jsx(m,{children:e.jsxs(h,{children:[e.jsx(x,{children:"Tipos de Cliente"}),v.map(s=>e.jsx(p,{value:String(s.id),children:s.name},s.id))]})})]}),e.jsx(n,{message:l.contractor_company_type_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"uea_id",children:"UEA"}),e.jsxs(t,{onValueChange:s=>i("uea_id",s),value:r.uea_id,children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Seleccione una UEA"})}),e.jsx(m,{children:e.jsxs(h,{children:[e.jsx(x,{children:"UEAs"}),S.map(s=>e.jsx(p,{value:String(s.id),children:s.name},s.id))]})})]}),e.jsx(n,{message:l.uea_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"year",children:"Año"}),e.jsxs(t,{onValueChange:s=>i("year",s),value:r.year,children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Seleccione un año"})}),e.jsx(m,{children:e.jsxs(h,{children:[e.jsx(x,{children:"Años"}),E.map(s=>e.jsx(p,{value:String(s),children:s},s))]})})]}),e.jsx(n,{message:l.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"month",children:"Mes"}),e.jsxs(t,{onValueChange:s=>i("month",s),value:r.month,children:[e.jsx(c,{children:e.jsx(d,{placeholder:"Seleccione un mes"})}),e.jsx(m,{children:e.jsxs(h,{children:[e.jsx(x,{children:"Meses"}),q.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))]})})]}),e.jsx(n,{message:l.month})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"file",children:"Archivo"}),e.jsx(U,{type:"file",id:"file",required:!0,accept:".xlsx,.xls",onChange:s=>i("file",s.target.files?s.target.files[0]:null)}),e.jsx(n,{message:l.file})]}),e.jsxs(y,{type:"submit",className:"mt-2",disabled:!b()||g,children:[g&&e.jsx(B,{className:"h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})})}export{$ as default};
