import{K as E,r,j as e,L as R}from"./app-CkX-sCCf.js";import{C as x,a as h,b as u,d as l}from"./card-Alk4mtLg.js";import{I as s}from"./input-MjwaqtbJ.js";import{L as a}from"./label-B68sH3c7.js";import{A as S}from"./app-layout-NwK8qtki.js";import{f}from"./utils-Co_qxGNv.js";import L from"./closed-DIZ585i5.js";import"./index-ItJPPwpU.js";import"./index-uPTyyJTB.js";import"./button-Bw2Xdp6E.js";import"./index-C0Urlq2e.js";import"./createLucideIcon-Cux2gun-.js";import"./index-BbjDzo9d.js";import"./tooltip-CeYhT-Ve.js";import"./index-RgIy1NKL.js";import"./index-DiuJ2rgF.js";import"./index-BeeyGmDn.js";import"./check-DYdSJAZQ.js";import"./chevrons-up-down-BuW2oQV_.js";import"./truck-CJs_TKyA.js";import"./file-text-BQQHQTRf.js";import"./chevron-right-D5H3JAm1.js";import"./index-CNC3jUVX.js";import"./index-CswDWhBD.js";import"./index-Chjiymov.js";import"./dialog-CQ0eMQJ3.js";import"./loader-circle-B0rPJdrL.js";const D=[{title:"Reportabilidad",href:"/admin/reportability"},{title:"Detalle",href:"/admin/reportability/detalle"}];function ie(){const{reportability_id:d,reportability:t,isSecurityEngineer:w,companyNombre:j}=E().props,[p,n]=r.useState(!0),[o,c]=r.useState(null),[y,b]=r.useState(!1),[v,g]=r.useState(0),[I,_]=r.useState(m(t.estado)),N=route("inspection.download",{reportability_id:d}),C=()=>{n(!1),c(null)},F=()=>{n(!1),c("No se pudo cargar el PDF")};r.useEffect(()=>{g(i=>i+1),_(m(t.estado))},[t.estado]);function m(i){switch(i){case"Generado":return 0;case"Revisado":return 1;case"Finalizado":return 2;default:return 0}}return e.jsxs(S,{breadcrumbs:D,children:[e.jsx(R,{title:"Reportabilidad"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("div",{className:"grid h-full grid-cols-12 gap-4",children:[e.jsxs(x,{className:"col-span-12 h-full md:col-span-8",children:[e.jsx(h,{children:e.jsx(u,{children:"Reporte"})}),e.jsxs(l,{children:[p&&e.jsx("p",{children:"Cargando PDF..."}),o&&e.jsx("p",{children:o}),e.jsx("iframe",{src:N,width:"100%",height:"759",onLoad:C,onError:F,style:{display:p||o?"none":"block"}},v)]})]}),e.jsxs(x,{className:"col-span-12 flex h-full flex-col justify-between md:col-span-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:e.jsx(u,{children:"Detalles del reporte"})}),e.jsx("br",{}),e.jsxs(l,{className:"flex flex-col gap-2 space-y-2",children:[e.jsxs("div",{className:"space-y-2 d-none",children:[e.jsx(a,{htmlFor:"estado",children:"Estado"}),e.jsx(s,{id:"estado",type:"text",value:t.estado,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"tipo_reporte",children:"Tipo de Reporte"}),e.jsx(s,{id:"tipo_reporte",type:"text",value:t.tipo_reporte,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"company_name",children:"Compañía"}),e.jsx(s,{id:"company_name",type:"text",value:j??"",disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"fecha_reporte",children:"Fecha de Reporte"}),e.jsx(s,{id:"fecha_reporte",type:"text",value:f(t.fecha_reporte),disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"fecha_evento",children:"Fecha de Evento"}),e.jsx(s,{id:"fecha_evento",type:"text",value:f(t.fecha_evento),disabled:!0})]})]})]}),e.jsx(l,{})]})]})}),e.jsx(L,{report_id:d,isDialogOpen:y,setIsDialogOpen:b})]})}export{ie as default};
