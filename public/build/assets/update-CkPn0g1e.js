import{m as g,r as t,j as r}from"./app-Bmcdr3rY.js";import{I as D}from"./input-error-BlgkwXPh.js";import{B as b}from"./button-DTKbtbr3.js";import{D as v,b as E,c as N,d as _,e as I}from"./dialog-DRTvkdgv.js";import{L as d}from"./label-CxH93Fcg.js";import{C as R}from"./combobox-BUvbTNPo.js";import{I as S}from"./input-iTO7QCEj.js";import{h as y,a as C}from"./handleFlashMessages-Dbk2wcAx.js";import{L}from"./loader-circle-C5lOWTxt.js";import"./utils-CISCwvQU.js";import"./index-F1UbrP38.js";import"./index-CxZfpC1a.js";import"./createLucideIcon-BS7UES9g.js";import"./index-CKnKVnvB.js";import"./index-3hBHLDdS.js";import"./search-B7JmLQoT.js";import"./popover-DztnhRT-.js";import"./index-CtQ0aJ3B.js";import"./chevrons-up-down-BMrNvCaf.js";import"./trash-2-DNpxwq21.js";import"./check-DxJ6GiVG.js";import"./index-C5uH-olr.js";function O({isOpen:i=!1,onOpenChange:a,selectedItem:s,roles:m}){const{data:n,setData:l,put:u,processing:c,errors:x,reset:f}=g({roleId:null}),[p,e]=t.useState(i);t.useEffect(()=>{e(i)},[i]),t.useEffect(()=>{console.log("Selected item:",s),console.log("Roles:",m),l("roleId",s.role_id)},[p,l]);const h=o=>{o.preventDefault(),u(route("contrata.roles.update",{id:s.user_id}),{onSuccess:j=>{C(j.props.flash),f(),e(!1),a&&a(!1)},onError:()=>{y(),e(!0)}})};return r.jsx("div",{children:r.jsx(v,{open:p,onOpenChange:o=>{e(o),a&&a(o)},children:r.jsxs(E,{className:"sm:max-w-[425px]",children:[r.jsxs(N,{children:[r.jsx(_,{children:"Actualizar Rol"}),r.jsxs(I,{children:["Seleccione un nuevo rol para ",r.jsx("strong",{children:s.user_name}),"."]})]}),r.jsxs("form",{onSubmit:h,className:"space-y-3",method:"post",action:route("contrata.roles.update",{id:s.user_id}),children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(d,{htmlFor:"user_name",children:"Usuario"}),r.jsx(S,{id:"user_name",type:"text",value:s.user_name,readOnly:!0})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(d,{htmlFor:"role",children:"Rol"}),r.jsx(R,{data:m,value:n.roleId,onChange:o=>{l("roleId",o)},placeholder:"Seleccione un rol...",className:"w-full"}),r.jsx(D,{message:x.roleId})]}),r.jsxs(b,{type:"submit",className:"mt-2",disabled:c||n.roleId===null,children:[c&&r.jsx(L,{className:"h-4 w-4 animate-spin"}),"Actualizar Rol"]})]})]})})})}export{O as default};
