import{j as e,K as b,m as y,r as E}from"./app-CkX-sCCf.js";import{c as C,B as u}from"./button-Bw2Xdp6E.js";import{D as w,b as _,c as R,d as T,e as A}from"./dialog-CQ0eMQJ3.js";import{L as B}from"./label-B68sH3c7.js";import{T as q}from"./textarea-C-cigTeO.js";import{d as f}from"./utils-Co_qxGNv.js";import{B as n}from"./badge-BoWuBp5k.js";import{t as d}from"./index-uPTyyJTB.js";import{C as z}from"./circle-x-B9c8PN4K.js";import{T as D}from"./triangle-alert-B9U2DJjl.js";import{L}from"./loader-circle-B0rPJdrL.js";import"./index-C0Urlq2e.js";import"./createLucideIcon-Cux2gun-.js";import"./index-BbjDzo9d.js";import"./index-ItJPPwpU.js";const F=C("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function S({className:a,variant:s,...o}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:f(F({variant:s}),a),...o})}function V({className:a,...s}){return e.jsx("div",{"data-slot":"alert-description",className:f("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...s})}function ee({report_id:a,reportData:s,isDialogOpen:o,setIsDialogOpen:t}){const{flash:k}=b().props,{data:l,setData:g,post:h,processing:c,reset:v}=y({motivo:""}),[m,x]=E.useState(null),j=r=>{if(r.preventDefault(),!l.motivo.trim()){x("Debe indicar el motivo para eliminar el reporte.");return}x(null),h(route("admin.reportability.delete",{reportability_id:a}),{onSuccess:p=>{const i=p.props.flash;i.success&&(d.success(i.success),t(!1),v()),i.error&&d.error(i.error)},onError:p=>{t(!0),d.error("Ocurrió un error al eliminar el reporte.")}})},N=r=>{switch(r){case"Generado":case"Abierto":return e.jsx(n,{variant:"destructive",children:"Abierto"});case"Visualizado":case"Revisado":return e.jsx(n,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Revisado"});case"Finalizado":case"Cerrado":return e.jsx(n,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Cerrado"});default:return e.jsx(n,{variant:"outline",children:r})}};return e.jsx(w,{open:o,onOpenChange:t,children:e.jsxs(_,{className:"sm:max-w-[450px]",children:[e.jsx(R,{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-red-100",children:e.jsx(z,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx(T,{children:"Eliminar Reporte"}),e.jsx(A,{children:"Esta acción no se puede deshacer."})]})]})}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Reporte #",s.id]}),N(s.estado)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium",children:"Tipo:"})," ",s.tipo_reporte]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium",children:"Empresa que reporta:"})," ",s.company_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Empresa que cierra:"})," ",s.company_report_name]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{htmlFor:"motivo",className:"text-sm font-medium",children:["Motivo de eliminación ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(q,{id:"motivo",placeholder:"Indique el motivo...",value:l.motivo,onChange:r=>g("motivo",r.target.value),className:"min-h-[80px] resize-none",required:!0})]}),m&&e.jsxs(S,{className:"border-red-200 bg-red-50 py-2",children:[e.jsx(D,{className:"h-4 w-4 text-red-600"}),e.jsx(V,{className:"text-sm text-red-800",children:m})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(u,{type:"button",variant:"outline",className:"flex-1",onClick:()=>t(!1),disabled:c,children:"Cancelar"}),e.jsx(u,{type:"submit",variant:"destructive",className:"flex-1",disabled:c||!l.motivo.trim(),children:c?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 animate-spin mr-2"}),"Eliminando..."]}):"Eliminar"})]})]})]})]})})}export{ee as default};
