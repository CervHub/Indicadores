import{m as F,r as l,j as s}from"./app-PNb_JBj4.js";import{I as g}from"./input-error-WvKf56iJ.js";import{B as f}from"./button-HZk2Zof5.js";import{D as I,a as L,b as A,c as B,d as T,e as V}from"./dialog-D0YsQINH.js";import{L as j}from"./label-3mDSrfFs.js";import{C as h}from"./combobox-BIvN-K9R.js";import{t as m}from"./index-DgNyXlWA.js";import{L as $}from"./loader-circle-DMmFKltu.js";import"./utils-Co_qxGNv.js";import"./index-DyMDJnG2.js";import"./createLucideIcon-D9N2Bwd3.js";import"./index-CgoFvU8A.js";import"./index-DONz0f-x.js";import"./search-CqaqAVmC.js";import"./index-CNA_1WXc.js";import"./chevrons-up-down-CFkQFrV5.js";import"./trash-2-DhJ3Ity9.js";import"./check-BEg9CPPe.js";function rs({users:b,companies:_,isOpen:c=!1,onOpenChange:i}){const{data:a,setData:n,post:D,processing:o,errors:d,reset:p,clearErrors:u}=F({user_id:"",company_id:""}),[y,t]=l.useState(c),[C,v]=l.useState(!1);l.useEffect(()=>{t(c)},[c]),l.useEffect(()=>{v(a.user_id!==""&&a.company_id!=="")},[a.user_id,a.company_id]);const N=r=>{t(r),i&&i(r),r||(p(),u())},E=r=>{r.preventDefault(),D(route("assignments.store"),{onSuccess:x=>{const e=x.props.flash;e!=null&&e.success&&(m.success(e.success),p(),u(),t(!1),i&&i(!1)),e!=null&&e.error&&m.error(e.error)},onError:x=>{t(!0),m.error("Ocurrió un error al crear la asignación.")}})},S=b.map(r=>({label:`${r.nombre_completo} (${r.doi})`,value:String(r.id)})),w=_.map(r=>({label:r.nombre,value:String(r.id)}));return s.jsx("div",{children:s.jsxs(I,{open:y,onOpenChange:N,children:[s.jsx("div",{className:"flex justify-start",children:s.jsx(L,{asChild:!0,children:s.jsx(f,{className:"inline-block px-4 py-2",children:"Crear Asignación"})})}),s.jsxs(A,{className:"sm:max-w-[425px]",children:[s.jsxs(B,{children:[s.jsx(T,{children:"Crear Asignación"}),s.jsx(V,{children:"Complete los campos para crear una nueva asignación."})]}),s.jsxs("form",{onSubmit:E,className:"space-y-3",method:"post",action:route("assignments.store"),children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(j,{htmlFor:"user_id",children:"Usuario *"}),s.jsx(h,{data:S,value:a.user_id,onChange:r=>n("user_id",r),placeholder:"Seleccionar usuario",className:"w-full",disabled:o}),s.jsx(g,{message:d.user_id})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(j,{htmlFor:"company_id",children:"Empresa *"}),s.jsx(h,{data:w,value:a.company_id,onChange:r=>n("company_id",r),placeholder:"Seleccionar empresa",className:"w-full",disabled:o}),s.jsx(g,{message:d.company_id})]}),s.jsxs(f,{type:"submit",className:"mt-2",disabled:o||!C,children:[o&&s.jsx($,{className:"h-4 w-4 animate-spin"}),"Crear"]})]})]})]})})}export{rs as default};
