import{K as b,m as v,r as h,j as e}from"./app-Cn-5C3ys.js";import{I as n}from"./input-error-BkfFglKD.js";import{B as f}from"./button-BfsQPnlH.js";import{D as C,b as N,c as w,d as E,e as D}from"./dialog-D3OTCAka.js";import{I as r}from"./input-Lnzueksd.js";import{L as m}from"./label-BzIOxSAd.js";import{L as y}from"./loader-circle-ubJ9Lzej.js";import"./utils-U4jazdRL.js";import"./index-DPkw7taS.js";import"./index-D9Yd4Kyp.js";import"./index-Brub5Wp-.js";function H({contractor:s,isDialogOpen:t,setIsDialogOpen:o}){const{flash:p}=b().props,{data:a,setData:d,put:c,processing:l,errors:u,reset:j}=v({id:(s==null?void 0:s.id)||"",ruc:(s==null?void 0:s.ruc)||"",nombre:(s==null?void 0:s.nombre)||"",descripcion:(s==null?void 0:s.descripcion)||"",email:(s==null?void 0:s.email)||"",password:""});h.useEffect(()=>{s&&d({id:s.id,ruc:s.ruc,nombre:s.nombre,descripcion:s.descripcion,email:s.email,password:""})},[s,d]),h.useEffect(()=>{d("email",`${a.ruc}@cerv.com.pe`)},[a.ruc]);const g=i=>{i.preventDefault(),s&&c(route("admin.contractor.update",{contrata:s.id}),{onSuccess:x=>{j(),o(!1),console.log("Solicitud de actualización exitosa:",x)},onError:x=>{o(!0),console.log("Errores en la solicitud de actualización:",x)}})};return e.jsxs("div",{children:[(p==null?void 0:p.success)&&e.jsx("div",{className:"mb-4 text-green-600",children:p.success}),e.jsx(C,{open:t,onOpenChange:o,children:e.jsxs(N,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(E,{children:"Editar Contratista"}),e.jsx(D,{children:"Complete los campos para editar el contratista."})]}),e.jsxs("form",{onSubmit:g,className:"space-y-3",method:"post",action:route("admin.contractor.update",{contrata:s==null?void 0:s.id}),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"ruc",children:"RUC"}),e.jsx(r,{id:"ruc",type:"text",required:!0,value:a.ruc||"",onChange:i=>d("ruc",i.target.value),disabled:l,placeholder:"RUC"}),e.jsx(n,{message:u.ruc})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"nombre",children:"Nombre"}),e.jsx(r,{id:"nombre",type:"text",required:!0,value:a.nombre||"",onChange:i=>d("nombre",i.target.value),disabled:l,placeholder:"Nombre"}),e.jsx(n,{message:u.nombre})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"descripcion",children:"Descripción"}),e.jsx(r,{id:"descripcion",type:"text",required:!0,value:a.descripcion||"",onChange:i=>d("descripcion",i.target.value),disabled:l,placeholder:"Descripción"}),e.jsx(n,{message:u.descripcion})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"text",required:!0,value:`${a.ruc}@cerv.com.pe`,disabled:!0,placeholder:"Email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password",children:"Contraseña"}),e.jsx(r,{id:"password",type:"password",value:a.password,onChange:i=>d("password",i.target.value),disabled:l,placeholder:"Contraseña"}),e.jsx(n,{message:u.password})]}),e.jsxs(f,{type:"submit",className:"mt-2 w-full",disabled:l,children:[l&&e.jsx(y,{className:"h-4 w-4 animate-spin"}),"Guardar"]})]})]})})]})}export{H as default};
