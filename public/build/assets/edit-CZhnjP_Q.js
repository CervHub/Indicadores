import{m as f,r as _,j as a}from"./app-9SkBCnxB.js";import{I as j}from"./input-error-CfnDUhM7.js";import{B as x}from"./button-BSymzP0_.js";import{D as C,b as S,c as h,d as E,e as F,f as N}from"./dialog-B4t1Njog.js";import{I as q}from"./input-DzwZ1ROS.js";import{L as V}from"./label-Bjc6p1q1.js";import{S as D,a as L,b as T,c as A,d as M,e as w,f as B}from"./select-DNMspdwF.js";import{t as y}from"./index-BYGN5s2_.js";import{L as G}from"./loader-circle-CuCTlk4_.js";import"./utils-DU6Hee-i.js";import"./index-CaTUMqUi.js";import"./index-BQJ99LjQ.js";import"./index-Di5oTgJ8.js";import"./index-CmNj4hS3.js";import"./index-DWz6o9NP.js";import"./index-PvkkbA5c.js";import"./index-SRZyBjgN.js";import"./check-dHt7Y97-.js";const I=({id:n,label:s,type:e="text",value:t,onChange:o,error:d,placeholder:i,disabled:m,required:u=!1,options:c})=>a.jsxs("div",{className:"grid gap-2",children:[a.jsxs(V,{htmlFor:n,children:[s," ",u&&a.jsx("span",{className:"text-red-500",children:"*"})]}),c?a.jsxs(D,{onValueChange:o,value:t,disabled:m,children:[a.jsx(L,{className:"w-full",children:a.jsx(T,{placeholder:i})}),a.jsx(A,{children:a.jsxs(M,{children:[a.jsx(w,{children:s}),c.map(l=>a.jsx(B,{value:l.value,children:l.label},l.value))]})})]}):a.jsx(q,{id:n,type:e,value:t,onChange:l=>o(l.target.value),disabled:m,placeholder:i,required:u}),a.jsx(j,{message:d})]}),z=[{value:"Camioneta",label:"Camioneta"},{value:"Combi",label:"Combi"},{value:"Ambulancia",label:"Ambulancia"},{value:"Bus",label:"Bus"},{value:"Camión",label:"Camión"},{value:"Camión Grúa",label:"Camión Grúa"},{value:"Otros",label:"Otros"}];function se({isDialogOpen:n,setIsDialogOpen:s,vehicle:e}){const{data:t,setData:o,put:d,processing:i,errors:m,reset:u}=f({code:e.code??"",license_plate:e.license_plate??"",brand:e.brand??"",model:e.model??"",color:e.color??"",year:e.year??"",engine_number:e.engine_number??"",chassis_number:e.chassis_number??"",type:e.type??"",fuel_type:e.fuel_type??"",seating_capacity:e.seating_capacity??"",mileage:e.mileage??"",is_active:e.is_active??!1,insurance_expiry_date:e.insurance_expiry_date??""});_.useEffect(()=>{o({code:e.code??"",license_plate:e.license_plate??"",brand:e.brand??"",model:e.model??"",color:e.color??"",year:e.year??"",engine_number:e.engine_number??"",chassis_number:e.chassis_number??"",type:e.type??"",fuel_type:e.fuel_type??"",seating_capacity:e.seating_capacity??"",mileage:e.mileage??"",is_active:e.is_active??!1,insurance_expiry_date:e.insurance_expiry_date??""})},[e,o]);const c=_.useMemo(()=>["type","code","brand","model","year"].every(p=>{var b;return(b=t[p])==null?void 0:b.toString().trim()}),[t]),l=_.useCallback(r=>{r.preventDefault(),d(route("vehicle.update",{vehicle:e.id}),{onSuccess:()=>{s(!1),y.success("Vehículo actualizado exitosamente.")},onError:()=>{y.error("Ocurrió un error al intentar actualizar el vehículo.")}})},[d,s,e.id,t]),g=[{id:"license_plate",label:"Placa",required:!0,disabled:!0},{id:"type",label:"Tipo",required:!0,options:z},{id:"code",label:"Código",required:!0},{id:"brand",label:"Marca",required:!0},{id:"model",label:"Modelo",required:!0},{id:"year",label:"Año",required:!0,type:"number"},{id:"color",label:"Color"},{id:"engine_number",label:"Número de Motor"},{id:"chassis_number",label:"Número de Chasis"},{id:"fuel_type",label:"Tipo de Combustible"},{id:"seating_capacity",label:"Capacidad de Asientos"},{id:"mileage",label:"Kilometraje",type:"number"},{id:"insurance_expiry_date",label:"Fecha de Vencimiento del Seguro",type:"date"}];return a.jsx("div",{children:a.jsx(C,{open:n,onOpenChange:s,children:a.jsxs(S,{className:"pb-3 sm:max-w-[800px]",children:[a.jsxs(h,{children:[a.jsx(E,{children:"Actualizar Vehículo"}),a.jsx(F,{children:"Modifique los campos permitidos y guarde los cambios."})]}),a.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:a.jsx("form",{id:"vehicleEditForm",onSubmit:l,className:"grid gap-4 sm:grid-cols-2",children:g.map(({id:r,...p})=>a.jsx(I,{id:r,value:t[r],onChange:b=>o(r,b),error:m[r],disabled:i||p.disabled,...p},r))})}),a.jsxs(N,{children:[a.jsxs(x,{type:"submit",form:"vehicleEditForm",disabled:i||!c,children:[i&&a.jsx(G,{className:"h-4 w-4 animate-spin"}),"Guardar"]}),a.jsx(x,{type:"button",variant:"secondary",onClick:()=>{u(),s(!1)},disabled:i,children:"Cancelar"})]})]})})})}export{se as default};
