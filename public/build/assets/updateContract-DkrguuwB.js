import{m as j,r as C,j as e}from"./app-Jkxlbawp.js";import{I as u}from"./input-error-eyKfC5Rx.js";import{B as g}from"./button-B4B9TstI.js";import{D as A,b as I,c as N,d as v,e as D}from"./dialog-C6fCstu1.js";import{I as E}from"./input-CK4xGbuF.js";import{L as d}from"./label-HHTb1gII.js";import{t as i}from"./index-DF3IFT55.js";import{S,a as U,b as L,c as b,d as O,e as R,f as o}from"./select-CDtEIfB0.js";import{L as F}from"./loader-circle-BLOFmYI8.js";import"./utils-Dxu7ruf7.js";import"./index-Bn6lqfqp.js";import"./index-CErYh_Q8.js";import"./index-BuaQXP4Z.js";import"./index-BhBNrGj_.js";import"./index-DSzzxumM.js";import"./check-9Wi4TWl0.js";function W({isDialogOpen:p,setIsDialogOpen:l}){const{data:r,setData:n,post:f,processing:c,errors:m,reset:x}=j({file:null,uea:""}),s=C.useRef(null),h=a=>{if(a.preventDefault(),!r.file||!r.uea){i.error("Por favor, seleccione un archivo y una UEA antes de enviar.");return}const t=new FormData;t.append("file",r.file),t.append("uea",r.uea),f(route("consolidated.updateFormatContract"),{data:t,onSuccess:()=>{l(!1),x(),s.current&&(s.current.value=""),i.success("El formato de contratistas se actualizó correctamente.")},onError:()=>{i.error("Ocurrió un error al intentar actualizar el formato.")}})};return e.jsx(A,{open:p,onOpenChange:a=>l(a),children:e.jsxs(I,{className:"sm:max-w-[425px]",children:[e.jsxs(N,{children:[e.jsx(v,{children:"Actualizar Formato de Contratistas"}),e.jsx(D,{children:"Seleccione un archivo y una UEA para actualizar el formato de contratistas."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"uea",children:"UEA"}),e.jsxs(S,{onValueChange:a=>n("uea",a),value:r.uea,children:[e.jsx(U,{children:e.jsx(L,{placeholder:"Seleccione una UEA"})}),e.jsx(b,{children:e.jsxs(O,{children:[e.jsx(R,{children:"UEA"}),e.jsx(o,{value:"ACUMULACION",children:"ACUMULACIÓN"}),e.jsx(o,{value:"CONCENTRADORA",children:"CONCENTRADORA"}),e.jsx(o,{value:"LIXIVIACION",children:"LIXIVIACIÓN"})]})})]}),e.jsx(u,{message:m.uea})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"file",children:"Archivo"}),e.jsx(E,{type:"file",id:"file",required:!0,accept:".xlsx,.xls",ref:s,onChange:a=>n("file",a.target.files?a.target.files[0]:null)}),e.jsx(u,{message:m.file})]}),e.jsxs(g,{ref:s,type:"submit",className:"mt-2",disabled:c||!r.file||!r.uea,children:[c&&e.jsx(F,{className:"h-4 w-4 animate-spin"}),"Actualizar"]})]})]})})}export{W as default};
