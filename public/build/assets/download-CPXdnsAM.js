import{r as l,j as e}from"./app-CDXy3SBE.js";import{B as A}from"./button-BWENKPYs.js";import{D as w,b as y,c as I,d as S,e as D}from"./dialog-B-5PyXvn.js";import{L}from"./label-CtGGAro0.js";import{S as E,a as U,b as O,c as R,d as P,e as k,f as n}from"./select-BQ4LeIfa.js";import{t as c}from"./index-BXJU_opb.js";import{C as T}from"./chevron-left-wb56M9jb.js";import{C as F}from"./chevron-right-CgmTr6df.js";import"./utils-CISCwvQU.js";import"./index-Gh2VXSfd.js";import"./createLucideIcon-Ck2WDkhH.js";import"./index-Dh1d63z8.js";import"./index-DkteYaeJ.js";import"./index-DrpITL_o.js";import"./index-gKMT4jhV.js";import"./index-B5PVc6Nf.js";import"./check-B0PbPaPs.js";function ae({isDialogOpen:h,setIsDialogOpen:x}){const[s,p]=l.useState(""),[i,d]=l.useState(!1),[m,u]=l.useState(0),o=[{image:"/examples/02.png",note:"Paso 1: Complete únicamente los campos resaltados en azul oscuro según el tipo de empresa."},{image:"/examples/03.png",note:"Paso 2: Al modificar los campos, los datos se actualizarán automáticamente en las demás hojas."},{image:"/examples/01.png",note:"Paso 3: Repita este proceso hasta completar todas las hojas del formato."}],g=async()=>{if(!s){c.error("Por favor, seleccione una UEA antes de descargar.");return}d(!0);const a={ACUMULACION:"SPCAT",CONCENTRADORA:"SPCCT",LIXIVIACION:"SPCLX"}[s];if(a)try{const t=await fetch(`/format/download/${a}`,{method:"GET"});if(!t.ok)throw new Error("Error al descargar el archivo.");const C=Date.now(),N=`${s}_${C}`,b=await t.blob(),v=window.URL.createObjectURL(b),r=document.createElement("a");r.href=v,r.download=N,document.body.appendChild(r),r.click(),r.remove(),c.success("Archivo descargado exitosamente.")}catch{c.error("Hubo un error al intentar descargar el archivo.")}finally{d(!1)}},f=()=>{u(a=>a>0?a-1:o.length-1)},j=()=>{u(a=>a<o.length-1?a+1:0)};return e.jsx(w,{open:h,onOpenChange:a=>x(a),children:e.jsxs(y,{className:"sm:max-w-[625px]",children:[e.jsxs(I,{children:[e.jsx(S,{children:"Descargar Formato de Contratistas"}),e.jsx(D,{children:"Seleccione una UEA para descargar el formato correspondiente."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(L,{htmlFor:"uea",children:"UEA"}),e.jsxs(E,{onValueChange:a=>p(a),value:s,children:[e.jsx(U,{children:e.jsx(O,{placeholder:"Seleccione una UEA"})}),e.jsx(R,{children:e.jsxs(P,{children:[e.jsx(k,{children:"UEA"}),e.jsx(n,{value:"ACUMULACION",children:"ACUMULACIÓN"}),e.jsx(n,{value:"CONCENTRADORA",children:"CONCENTRADORA"}),e.jsx(n,{value:"LIXIVIACION",children:"LIXIVIACIÓN"})]})})]})]}),s&&e.jsxs("div",{className:"relative mx-auto mt-0 w-full max-w-full",children:[e.jsx("div",{className:"relative overflow-hidden rounded-lg border",children:e.jsx("div",{className:"flex transition-transform duration-300",style:{transform:`translateX(-${m*100}%)`},children:o.map((a,t)=>e.jsxs("div",{className:"relative flex w-full flex-shrink-0 flex-col items-center justify-center bg-gray-100",children:[e.jsx("img",{src:a.image,alt:`Slide ${t+1}`,className:"h-auto w-full object-cover"}),e.jsx("p",{className:"bg-opacity-50 absolute top-0 right-0 left-0 bg-black py-2 text-center text-sm text-white",children:a.note})]},t))})}),e.jsxs("div",{className:"mt-2 flex justify-center gap-4",children:[e.jsx("button",{onClick:f,className:"flex items-center justify-center rounded-full bg-gray-200 p-2 hover:bg-gray-300",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("button",{onClick:j,className:"flex items-center justify-center rounded-full bg-gray-200 p-2 hover:bg-gray-300",children:e.jsx(F,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"text-muted-foreground py-2 text-center text-sm",children:["Paso ",m+1," de ",o.length]})]}),e.jsx(A,{onClick:g,disabled:!s||i,className:"w-auto",children:i?"Descargando...":"Descargar Formato"})]})]})})}export{ae as default};
