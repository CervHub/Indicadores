import{m as N,r as d,j as e}from"./app-CRatwQnn.js";import{I as l}from"./input-error-Mp3PxWJc.js";import{B as j}from"./button-IYTQ6fqB.js";import{D as F,a as E,b as I,c as y,d as L,e as S}from"./dialog-xGS_-RRy.js";import{I as i}from"./input-B9fa9TCI.js";import{L as t}from"./label-Dkdb8OHP.js";import{t as g}from"./index-wOLGeJc3.js";import{L as P}from"./loader-circle-BDfpH8lA.js";import"./utils-Dxu7ruf7.js";import"./index-CGsOreyc.js";import"./index-rrL4l45B.js";import"./index-AI2GBkp9.js";function K({isOpen:p=!1,onOpenChange:n}){const{data:a,setData:r,post:h,processing:x,errors:o,reset:f}=N({doi:"",email:"",nombres:"",apellidos:"",telefono:"",cargo:""}),[v,m]=d.useState(p),[b,C]=d.useState(!1);d.useEffect(()=>{m(p)},[p]),d.useEffect(()=>{C(a.doi.trim()!==""&&a.nombres.trim()!==""&&a.apellidos.trim()!=="")},[a.doi,a.nombres,a.apellidos]);const D=s=>{s.preventDefault(),h(route("contrata.personal.store"),{onSuccess:u=>{const c=u.props.flash;c.success&&(g.success(c.success),m(!1),f(),n&&n(!1)),c.error&&g.error(c.error)},onError:u=>{m(!0),g.error("Ocurrió un error al crear la persona.")}})};return e.jsx("div",{children:e.jsxs(F,{open:v,onOpenChange:s=>{m(s),n&&n(s)},children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(E,{asChild:!0,children:e.jsx(j,{className:"inline-block px-4 py-2",children:"Crear Persona"})})}),e.jsxs(I,{className:"sm:max-w-[425px]",children:[e.jsxs(y,{children:[e.jsx(L,{children:"Crear Persona"}),e.jsx(S,{children:"Complete los campos para crear una nueva persona."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("contrata.personal.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"doi",children:"DOI"}),e.jsx(i,{id:"doi",value:a.doi,onChange:s=>r("doi",s.target.value)}),e.jsx(l,{message:o.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",value:a.email,onChange:s=>r("email",s.target.value)}),e.jsx(l,{message:o.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"nombres",children:"Nombres"}),e.jsx(i,{id:"nombres",value:a.nombres,onChange:s=>r("nombres",s.target.value)}),e.jsx(l,{message:o.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"apellidos",children:"Apellidos"}),e.jsx(i,{id:"apellidos",value:a.apellidos,onChange:s=>r("apellidos",s.target.value)}),e.jsx(l,{message:o.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(i,{id:"telefono",value:a.telefono,onChange:s=>r("telefono",s.target.value)}),e.jsx(l,{message:o.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"cargo",children:"Cargo"}),e.jsx(i,{id:"cargo",value:a.cargo,onChange:s=>r("cargo",s.target.value)}),e.jsx(l,{message:o.cargo})]}),e.jsxs(j,{type:"submit",className:"mt-2",disabled:x||!b,children:[x&&e.jsx(P,{className:"h-4 w-4 animate-spin"}),"Crear"]})]})]})]})})}export{K as default};
