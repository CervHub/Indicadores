import{m as b,r as o,j as s}from"./app-Bmcdr3rY.js";import{B as g}from"./button-DTKbtbr3.js";import{D as E,b as y,c as N,d as v,e as C}from"./dialog-DRTvkdgv.js";import{b as S,m as B}from"./utils-CISCwvQU.js";import{t as d}from"./index-C5uH-olr.js";import{L as F}from"./loader-circle-C5lOWTxt.js";import"./index-F1UbrP38.js";import"./index-CxZfpC1a.js";import"./createLucideIcon-BS7UES9g.js";import"./index-CKnKVnvB.js";import"./index-3hBHLDdS.js";function J({isOpen:c=!1,onOpenChange:e,selectedItem:r}){const{data:i,setData:n,patch:u,processing:m,reset:p}=b({id:r.id}),[x,a]=o.useState(c),[h,j]=o.useState(!1);o.useEffect(()=>{j(i.id!=="0")},[i]),o.useEffect(()=>{a(c)},[c]),o.useEffect(()=>{n("id",r.id)},[r,n]);const D=t=>{t.preventDefault(),u(route("consolidated.close",{id:i.id}),{onSuccess:f=>{const l=f.props.flash;l.success&&(a(!1),p(),d.success(l.success),e&&e(!1)),l.error&&(a(!1),d.error(l.error))},onError:f=>{a(!0),d.error("Ocurrió un error al cerrar el consolidado")}})};return s.jsx("div",{children:s.jsx(E,{open:x,onOpenChange:t=>{a(t),e&&e(t)},children:s.jsxs(y,{className:"sm:max-w-[425px]",children:[s.jsxs(N,{children:[s.jsx(v,{children:"Cerrar Consolidado"}),s.jsxs(C,{children:["¿Está seguro de que desea cerrar el consolidado para el mes de"," ",S(B,"value",r.month,"label")," del año ",r.year,"? Las empresas contratistas ya no podrán subir información."]})]}),s.jsx("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("consolidated.close",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(g,{type:"submit",className:"mt-2",disabled:m||!h,children:[m&&s.jsx(F,{className:"h-4 w-4 animate-spin"}),"Aceptar"]})})})]})})})}export{J as default};
