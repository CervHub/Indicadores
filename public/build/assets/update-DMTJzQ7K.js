import{m as E,r as m,j as e}from"./app-PNb_JBj4.js";import{I as S}from"./input-error-WvKf56iJ.js";import{B as f}from"./button-HZk2Zof5.js";import{D as y,a as I,b as C,c as w,d as A,e as F}from"./dialog-D0YsQINH.js";import{I as L}from"./input-D0FRcbIi.js";import{L as R}from"./label-3mDSrfFs.js";import{t as o}from"./index-DgNyXlWA.js";import{U as M}from"./upload-DkJWI4S5.js";import{L as U}from"./loader-circle-DMmFKltu.js";import"./utils-Co_qxGNv.js";import"./index-DyMDJnG2.js";import"./createLucideIcon-D9N2Bwd3.js";import"./index-CgoFvU8A.js";import"./index-DONz0f-x.js";function Y({isOpen:l=!1,onOpenChange:i}){const{data:d,setData:h,post:j,processing:c,errors:g,reset:u,clearErrors:x}=E({file:null}),[v,t]=m.useState(l),[p,n]=m.useState("");m.useEffect(()=>{t(l)},[l]);const b=r=>{t(r),i&&i(r),r||(u(),x(),n(""))},N=r=>{var s;const a=((s=r.target.files)==null?void 0:s[0])||null;h("file",a),n(a?a.name:"")},D=r=>{if(r.preventDefault(),!d.file){o.error("Por favor seleccione un archivo.");return}j(route("contrata.personal.update.massive"),{forceFormData:!0,onSuccess:a=>{const s=a.props.flash;s!=null&&s.success&&(o.success(s.success),u(),x(),n(""),t(!1),i&&i(!1)),s!=null&&s.error&&o.error(s.error)},onError:a=>{t(!0),o.error("Ocurrió un error al procesar el archivo.")}})};return e.jsx("div",{children:e.jsxs(y,{open:v,onOpenChange:b,children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"inline-flex items-center gap-2 px-4 py-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Registro Masivo"]})})}),e.jsxs(C,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsx(A,{children:"Registro Masivo"}),e.jsx(F,{children:"Suba un archivo Excel para realizar una actualización masiva de personal."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",method:"post",action:route("contrata.personal.update.massive"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(R,{htmlFor:"file",children:"Archivo Excel"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(L,{id:"file",type:"file",accept:".xlsx,.xls,.csv",onChange:N,className:"cursor-pointer"})}),p&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Archivo seleccionado: ",p]}),e.jsx(S,{message:g.file})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Instrucciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"El archivo debe estar en formato Excel (.xlsx, .xls) o CSV"}),e.jsx("li",{children:"Asegúrese de que las columnas estén correctamente estructuradas"}),e.jsx("li",{children:"Revise los datos antes de procesar el archivo"})]})]}),e.jsxs(f,{type:"submit",className:"w-full",disabled:c||!d.file,children:[c&&e.jsx(U,{className:"h-4 w-4 animate-spin mr-2"}),c?"Procesando...":"Subir Archivo"]})]})]})]})})}export{Y as default};
