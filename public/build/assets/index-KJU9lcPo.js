import{j as e,r as d,K as v,L as w}from"./app-Ds4ZkRno.js";import{B as y}from"./badge-CZ-VVC91.js";import{a as j,B as r}from"./button-ea-hcMko.js";import{a as b,m as N}from"./utils-2YzkRP5P.js";import{A as R}from"./arrow-up-down-xENsxsrL.js";import{u as M,T as k,a as S,b as x,c as _,f as u,d as D,e as f,g as P,h as T,i as F,j as I}from"./table-BVedo3k-.js";import{I as A}from"./input-DWzbFbrx.js";import{A as L}from"./app-layout-ABtHJ7cF.js";import B from"./create-DC6KcKGt.js";import"./index-D6vIr2wZ.js";import"./index-CnDPcsdQ.js";import"./index-B9JGh-vd.js";import"./app-logo-icon-DaYa7nRA.js";import"./input-error-BcoPDrXT.js";import"./dialog-l-bMBve4.js";import"./label-sZ38Iebd.js";import"./select-BdjBKIQ9.js";import"./index-BeElj2dJ.js";import"./loader-circle-CXLebLuH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],g=j("Download",H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],K=j("RefreshCw",$),O=t=>[{accessorKey:"year",header:({column:o})=>e.jsxs(r,{variant:"ghost",onClick:()=>o.toggleSorting(o.getIsSorted()==="asc"),children:["Year",e.jsx(R,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"month",header:"Month",cell:({row:o})=>b(N,"value",o.original.month,"label")||"N/A"},{accessorKey:"is_closed",header:"Cerrado",cell:({row:o})=>e.jsx(y,{variant:o.original.is_closed?"destructive":"default",children:o.original.is_closed?"Yes":"No"})},{id:"actions",header:"Acciones",cell:({row:o})=>{const a=o.original;return e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(r,{onClick:()=>p(a.file_sx_ew),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Lixiviacion"]}),e.jsxs(r,{onClick:()=>p(a.file_accumulation),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Acumulacion"]}),e.jsxs(r,{onClick:()=>p(a.file_concentrator),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Concentradora"]}),e.jsxs(r,{variant:"secondary",onClick:()=>t(a.id),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Reconsolidar"]})]})}}],p=t=>{const a=`${window.location.origin}/${t}`;console.log(`Downloading file from: ${a}`);const n=document.createElement("a");n.href=a,n.download=t.split("/").pop()||"default_filename",document.body.appendChild(n),n.click(),document.body.removeChild(n)};function Y({columns:t,data:o}){var h;const[a,n]=d.useState([]),[c,m]=d.useState(""),i=M({data:o,columns:t,getCoreRowModel:I(),getPaginationRowModel:F(),onSortingChange:n,getSortedRowModel:T(),onGlobalFilterChange:m,getFilteredRowModel:P(),state:{sorting:a,globalFilter:c}});return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center py-4",children:e.jsx(A,{placeholder:"Filter by any column...",value:c,onChange:l=>m(l.target.value),className:"max-w-sm"})}),e.jsx("div",{className:"rounded-md border grid grid-cols-1",children:e.jsxs(k,{children:[e.jsx(S,{children:i.getHeaderGroups().map(l=>e.jsx(x,{children:l.headers.map(s=>e.jsx(_,{children:s.isPlaceholder?null:u(s.column.columnDef.header,s.getContext())},s.id))},l.id))}),e.jsx(D,{children:(h=i.getRowModel().rows)!=null&&h.length?i.getRowModel().rows.map(l=>e.jsx(x,{"data-state":l.getIsSelected()&&"selected",children:l.getVisibleCells().map(s=>e.jsx(f,{children:u(s.column.columnDef.cell,s.getContext())},s.id))},l.id)):e.jsx(x,{children:e.jsx(f,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:"Previous"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:"Next"})]})]})}const E=[{title:"Consolidados",href:"/consolidated"}];function de(){const{consolidateds:t=[]}=v().props,[o,a]=d.useState(!1),[n,c]=d.useState(0),[m,i]=d.useState(0),h=l=>{console.log(`Reconsolidar consolidado con ID: ${l}`);const s=t.find(C=>C.id===l);console.log("Reconsolidado:",s),s&&(c(s.year),i(s.month),a(!0))};return e.jsxs(L,{breadcrumbs:E,children:[e.jsx(w,{title:"Consolidados"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(B,{initialYear:n,initialMonth:m,isOpen:o,onOpenChange:a}),e.jsx("div",{className:"w-full max-w-full overflow-x-auto",children:e.jsx(Y,{columns:O(h),data:t})})]})]})}export{de as default};
