const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-CfPKUl70.js","assets/app-9SkBCnxB.js","assets/app-Blqp47ZX.css"])))=>i.map(i=>d[i]);
import{r as b,j as e,$ as q,_ as S}from"./app-9SkBCnxB.js";import{B as h}from"./button-BSymzP0_.js";import{C as _,a as P,b as z,d as D}from"./card-D_Qq2Hrm.js";import{I as E}from"./input-DzwZ1ROS.js";import{T as $,a as C,b as v,c as N}from"./tooltip-DfpUQjUn.js";import{Q as I}from"./index-8d8YyR6V.js";import{c as L}from"./index-CaTUMqUi.js";import{S as H}from"./square-pen-DW2LqGAq.js";import{C as M}from"./chevron-left-Ih4Wypwk.js";import{C as Q}from"./chevron-right-3mAzgvxi.js";import"./utils-DU6Hee-i.js";import"./index-Di5oTgJ8.js";import"./index-CmNj4hS3.js";import"./index-PvkkbA5c.js";import"./index-SRZyBjgN.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],A=L("Unlink",B);function y(o){return window.route?window.route("vehicle.show",o):`${window.location.origin}/vehicle/${o}`}const p=15;function U(o,x,a){const n=document.createElement("canvas");n.width=400,n.height=450;const t=n.getContext("2d");t&&(t.save(),t.beginPath(),t.moveTo(40,0),t.lineTo(360,0),t.quadraticCurveTo(400,0,400,40),t.lineTo(400,410),t.quadraticCurveTo(400,450,360,450),t.lineTo(40,450),t.quadraticCurveTo(0,450,0,410),t.lineTo(0,40),t.quadraticCurveTo(0,0,40,0),t.closePath(),t.clip(),t.fillStyle="#fff",t.fillRect(0,0,400,450),t.restore(),t.save(),t.beginPath(),t.moveTo(40,0),t.lineTo(360,0),t.quadraticCurveTo(400,0,400,40),t.lineTo(400,90),t.lineTo(0,90),t.lineTo(0,40),t.quadraticCurveTo(0,0,40,0),t.closePath(),t.clip(),t.fillStyle="#d7282f",t.fillRect(0,0,400,90),t.restore(),t.font="bold 2.4rem Arial",t.fillStyle="#fff",t.textAlign="center",t.textBaseline="middle",t.fillText(x,400/2,90/2),S(()=>import("./browser-CfPKUl70.js").then(d=>d.b),__vite__mapDeps([0,1,2])).then(d=>{const i=document.createElement("canvas");i.width=300,i.height=300,d.toCanvas(i,y(o),{width:300,margin:1},function(w){if(w){alert("No se pudo generar el QR para descargar.");return}t.drawImage(i,100/2,120,300,300);const c=document.createElement("a");c.download=a,c.href=n.toDataURL("image/png"),c.click()})}))}const ne=({data:o,onAction:x})=>{const[a,m]=b.useState(1),[g,T]=b.useState(""),[f,j]=b.useState(null),u=o.filter(r=>r.license_plate.toLowerCase().includes(g.toLowerCase())).sort((r,l)=>(l.is_linked==="1"?1:0)-(r.is_linked==="1"?1:0)),n=(a-1)*p,t=n+p,d=u.slice(n,t),i=Math.ceil(u.length/p),w=()=>{a>1&&m(a-1)},c=()=>{a<i&&m(a+1)},k=r=>{T(r.target.value),m(1)},R=(r,l)=>{j(l),new Promise(s=>{U(l,r,`qr_${r}.png`),s()}).finally(()=>{j(null)})};return e.jsx($,{children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(E,{type:"text",placeholder:"Search by license plate...",value:g,onChange:k,className:"w-full"})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4",children:d.map(r=>{const l=r.is_linked==="1";return e.jsx(q,{href:y(r.id),className:"block",style:{textDecoration:"none",color:"inherit"},target:"_blank",rel:"noopener noreferrer",children:e.jsxs(_,{className:`relative w-full rounded-lg border-2 cursor-pointer ${l?"border-green-500":"border-gray-300"}`,children:[e.jsx(P,{onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(z,{className:"truncate max-w-[65%] text-base font-semibold",title:`${r.license_plate} - ${r.brand}`,children:`${r.license_plate} - ${r.brand}`}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsx(h,{variant:"destructive",size:"icon",onClick:s=>{s.preventDefault(),x(r,"desvincular")},children:e.jsx(A,{className:"h-4 w-4"})})}),e.jsx(N,{children:e.jsx("p",{children:"Desvincular"})})]}),e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsx(h,{variant:"outline",size:"icon",onClick:s=>{s.preventDefault(),x(r,"actualizar")},children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsx(N,{children:e.jsx("p",{children:"Editar"})})]}),e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsx(h,{variant:"outline",size:"icon",onClick:s=>{s.preventDefault(),R(r.license_plate,r.id)},disabled:f===r.id,children:f===r.id?e.jsxs("svg",{className:"animate-spin h-4 w-4 text-gray-500",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"})})})}),e.jsx(N,{children:e.jsx("p",{children:"Descargar QR"})})]})]})]})}),e.jsxs(D,{onClick:s=>s.stopPropagation(),children:[e.jsxs("p",{className:"text-xs mt-1",children:[e.jsx("strong",{children:"Marca:"}),e.jsx("span",{className:"ml-1",children:r.brand})]}),e.jsxs("p",{className:"text-xs mt-1",children:[e.jsx("strong",{children:"Año:"}),e.jsx("span",{className:"ml-1",children:r.year})]}),e.jsxs("p",{className:"text-xs mt-1",children:[e.jsx("strong",{children:"Cód. de llamada:"}),e.jsx("span",{className:"ml-1",children:r.code})]}),e.jsxs("p",{className:"text-xs mt-1",children:[e.jsx("strong",{children:"Tipo:"}),e.jsx("span",{className:"ml-1",children:r.type})]}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-white p-1 rounded-full shadow",id:`qr-${r.id}`,children:e.jsx(I,{value:y(r.id),size:100,bgColor:"#fff"})})]})]})},r.id)})}),u.length>p&&e.jsxs("div",{className:"mt-4 flex items-center justify-start gap-4",children:[e.jsxs(h,{onClick:w,disabled:a===1,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("span",{children:["Page ",a," of ",i]}),e.jsxs(h,{onClick:c,disabled:a===i,variant:"outline",className:"flex items-center gap-2",children:["Next",e.jsx(Q,{className:"h-4 w-4"})]})]})]})})};export{ne as default};
