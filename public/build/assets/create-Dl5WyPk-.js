import{m as w,r as l,j as e}from"./app-C4NoR-vI.js";import{I as u}from"./input-error-NlGa4IpK.js";import{B as p}from"./button-CygEaaIX.js";import{D as M,a as O,b as A,c as B,d as R,e as T}from"./dialog-Dv24tdPc.js";import{L as h}from"./label-CAD0ooeP.js";import{S as x,a as j,b as f,c as g,d as S,e as C,f as D}from"./select-B4ha1F9H.js";import{m as k}from"./utils-Dxu7ruf7.js";import{t as n}from"./index-Vi2gQ6iw.js";import{L as G}from"./loader-circle-Bn1LF9YH.js";import"./index-D4-hBLjH.js";import"./index-CPRP0wOM.js";import"./index-B1LNil2j.js";import"./index-BuaiRp8b.js";import"./index-R3RWVrRe.js";import"./index-Bx_FiwJ_.js";import"./index-CKZzBWqK.js";import"./check-D_uycNjb.js";function ae(){const i=new Date().getFullYear(),b=new Date().getMonth()+1,{data:r,setData:c,post:v,processing:m,errors:d,reset:y}=w({year:i,month:b}),[N,a]=l.useState(!1),[E,F]=l.useState(!0),I=l.useRef(null);l.useEffect(()=>{F(r.year!==0&&r.month!==0)},[r]);const L=s=>{s.preventDefault(),v(route("consolidated.store"),{onSuccess:o=>{const t=o.props.flash;t.success&&(a(!1),y(),n.success(t.success)),t.error&&(a(!0),n.error(t.error))},onError:o=>{a(!0),n.error("Ocurri칩 un error al intentar crear el consolidado.")}})},V=Array.from({length:i-2023+1},(s,o)=>2023+o);return e.jsx("div",{children:e.jsxs(M,{open:N,onOpenChange:s=>a(s),children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(O,{asChild:!0,children:e.jsx(p,{className:"inline-block px-4 py-2",onClick:()=>a(!0),children:"Crear Consolidado"})})}),e.jsxs(A,{className:"sm:max-w-[425px]",children:[e.jsxs(B,{children:[e.jsx(R,{children:"Crear Consolidado"}),e.jsx(T,{children:"Complete los campos para crear un nuevo consolidado."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-3",method:"post",action:route("consolidated.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"year",children:"A침o"}),e.jsxs(x,{onValueChange:s=>c("year",Number(s)),value:String(r.year),children:[e.jsx(j,{children:e.jsx(f,{placeholder:"Seleccione un a침o"})}),e.jsx(g,{children:e.jsxs(S,{children:[e.jsx(C,{children:"A침os"}),V.map(s=>e.jsx(D,{value:String(s),children:s},s))]})})]}),e.jsx(u,{message:d.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"month",children:"Mes"}),e.jsxs(x,{onValueChange:s=>c("month",Number(s)),value:String(r.month),children:[e.jsx(j,{children:e.jsx(f,{placeholder:"Seleccione un mes"})}),e.jsx(g,{children:e.jsxs(S,{children:[e.jsx(C,{children:"Meses"}),k.map(s=>e.jsx(D,{value:s.value,children:s.label},s.value))]})})]}),e.jsx(u,{message:d.month})]}),e.jsxs(p,{ref:I,type:"submit",className:"mt-2",disabled:m||!E,children:[m&&e.jsx(G,{className:"h-4 w-4 animate-spin"}),"Generar"]})]})]})]})})}export{ae as default};
