import{m as y,r as p,j as e}from"./app-Bi-KCd8J.js";import{I as F}from"./input-error-Dv1Zmq46.js";import{B as f}from"./button-DJyGOwJz.js";import{D as S,b as N,c as q,d as V,e as D,f as w}from"./dialog-B9yl2G-0.js";import{I as E}from"./input-CKWulOR2.js";import{L}from"./label-CANqrCGl.js";import{S as M,a as T,b as k,c as A,d as B,e as G,f as I}from"./select-7HnzpKbP.js";import{t as b}from"./index-YZ4sxt7C.js";import{L as v}from"./loader-circle-IpCHtLEt.js";import"./utils-Dxu7ruf7.js";import"./index-D-CnnpSP.js";import"./index-Ce4O06N7.js";import"./index-Bz9or7fB.js";import"./index-3D32tcjj.js";import"./index-RaM-Xh1G.js";import"./check-DGoh2lHx.js";const P=({id:c,label:i,type:r="text",value:m,onChange:t,error:l,placeholder:d,disabled:n,required:o=!1,options:u})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(L,{htmlFor:c,children:[i," ",o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),u?e.jsxs(M,{onValueChange:t,value:m,disabled:n,children:[e.jsx(T,{className:"w-full",children:e.jsx(k,{placeholder:d})}),e.jsx(A,{children:e.jsxs(B,{children:[e.jsx(G,{children:i}),u.map(s=>e.jsx(I,{value:s.value,children:s.label},s.value))]})})]}):e.jsx(E,{id:c,type:r,value:m,onChange:s=>t(s.target.value),disabled:n,placeholder:d,required:o}),e.jsx(F,{message:l})]});function le({isDialogOpen:c,setIsDialogOpen:i}){const{data:r,setData:m,post:t,processing:l,errors:d,reset:n}=y({code:"",license_plate:"",brand:"",model:"",color:"",year:"",engine_number:"",chasis_number:"",type:"",fuel_type:"",seating_capacity:"",mileage:"",is_active:!1,insurance_expiry_date:""}),[o,u]=p.useState(!1),s=p.useCallback(()=>{if(!r.license_plate.trim()){b.error("Por favor, ingrese la placa del vehículo.");return}u(!0),b.info("El vehículo no existe. Puede llenar los datos manualmente.")},[r.license_plate]),g=p.useMemo(()=>["license_plate","type","code","brand","model","year"].every(h=>{var j;return(j=r[h])==null?void 0:j.trim()}),[r]),C=p.useCallback(a=>{a.preventDefault(),t(route("vehicle.store"),{onSuccess:()=>{i(!1),n(),b.success("Vehículo creado exitosamente.")},onError:()=>{b.error("Ocurrió un error al intentar crear el vehículo.")}})},[t,i,n]),_=[{id:"license_plate",label:"Placa",required:!0},{id:"type",label:"Tipo",required:!0,options:[{value:"camioneta",label:"Camioneta"},{value:"combi",label:"Combi"},{value:"ambulancia",label:"Ambulancia"},{value:"bus",label:"Bus"},{value:"camion",label:"Camión"},{value:"camion_grua",label:"Camión Grúa"},{value:"otros",label:"Otros"}]},{id:"code",label:"Código",required:!0},{id:"brand",label:"Marca",required:!0},{id:"model",label:"Modelo",required:!0},{id:"year",label:"Año",required:!0,type:"number"},{id:"color",label:"Color"},{id:"engine_number",label:"Número de Motor"},{id:"chasis_number",label:"Número de Chasis"},{id:"fuel_type",label:"Tipo de Combustible"},{id:"seating_capacity",label:"Capacidad de Asientos"},{id:"mileage",label:"Kilometraje",type:"number"},{id:"insurance_expiry_date",label:"Fecha de Vencimiento del Seguro",type:"date"}];return e.jsx("div",{children:e.jsx(S,{open:c,onOpenChange:i,children:e.jsxs(N,{className:"pb-3 sm:max-w-[800px]",children:[e.jsxs(q,{children:[e.jsx(V,{children:"Crear Vehículo"}),e.jsx(D,{children:"Complete los campos para crear un nuevo vehículo."})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsx("form",{id:"vehicleForm",onSubmit:C,className:"grid gap-4 sm:grid-cols-2",children:_.map(({id:a,...x})=>!o&&a==="license_plate"||o?e.jsx(P,{id:a,value:r[a],onChange:h=>m(a,h),error:d[a],disabled:l,...x},a):null)})}),e.jsx(w,{children:o?e.jsxs(f,{type:"submit",form:"vehicleForm",disabled:l||!g,children:[l&&e.jsx(v,{className:"h-4 w-4 animate-spin"}),"Guardar"]}):e.jsxs(f,{type:"button",onClick:s,disabled:l,children:[l&&e.jsx(v,{className:"h-4 w-4 animate-spin"}),"Consultar"]})})]})})})}export{le as default};
