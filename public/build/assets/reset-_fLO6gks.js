import{m as h,r as e,j as s}from"./app-Pjxy35jT.js";import{B as b}from"./button-JEyeJLuj.js";import{D as g,b as E,c as w,d as N,e as v}from"./dialog-Bxd5yeim.js";import{t as n}from"./index-ChKC4xw7.js";import{L as S}from"./loader-circle-BMbb1CW7.js";import"./index-DLfEdX_p.js";import"./utils-DU6Hee-i.js";import"./index-_philcsi.js";import"./index-D9phxP_G.js";import"./index-x5ygObbJ.js";function H({isOpen:l=!1,onOpenChange:o,selectedItem:r}){const{data:t,setData:d,post:f,processing:m}=h({id:r.id}),[u,a]=e.useState(l),[x,j]=e.useState(!1);e.useEffect(()=>{j(t.id!=="0")},[t]),e.useEffect(()=>{a(l)},[l]),e.useEffect(()=>{d("id",r.id)},[r,d]);const D=i=>{i.preventDefault(),f(route("contrata.password.reset",{personal:t.id}),{onSuccess:p=>{const c=p.props.flash;c.success&&(n.success(c.success),a(!1),o&&o(!1)),c.error&&(n.error(c.error),a(!0))},onError:p=>{a(!0),n.error("Ocurrió un error al restablecer la contraseña. Por favor, inténtelo de nuevo.")}})};return s.jsx("div",{children:s.jsx(g,{open:u,onOpenChange:i=>{a(i),o&&o(i)},children:s.jsxs(E,{className:"sm:max-w-[425px]",children:[s.jsxs(w,{children:[s.jsx(N,{children:"Restablecer Contraseña"}),s.jsxs(v,{children:["¿Está seguro de que desea restablecer la contraseña de ",r.nombres," ",r.apellidos," al DNI (",r.doi,")?"]})]}),s.jsx("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("contrata.password.reset",{personal:t.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(b,{type:"submit",className:"mt-2",disabled:m||!x,children:[m&&s.jsx(S,{className:"h-4 w-4 animate-spin"}),"Aceptar"]})})})]})})})}export{H as default};
