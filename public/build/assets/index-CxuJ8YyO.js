import{j as e,K as I,r as c,L as O}from"./app-PNb_JBj4.js";import{B as p}from"./button-HZk2Zof5.js";import{S as N}from"./square-pen-BYwzL7VX.js";import{A as w}from"./arrow-up-down-Dig3w5ED.js";import{D as k}from"./data-table-A51dyPRq.js";import{C as v,a as G,b,d as z}from"./card-B7-0SboJ.js";import{A}from"./app-layout-C8L0cdB4.js";import U from"./create-CpvfQiJv.js";import K from"./createCategoryCompany-CRFcbG_K.js";import L from"./createGroupCompany-vjr6VrLW.js";import B from"./updateCategoryCompany-BM1PROc5.js";import"./utils-Co_qxGNv.js";import"./createLucideIcon-D9N2Bwd3.js";import"./index-BI35AJp1.js";import"./table-1vDSwcuK.js";import"./input-D0FRcbIi.js";import"./index-DgNyXlWA.js";import"./index-DONz0f-x.js";import"./index-DyMDJnG2.js";import"./index-CgoFvU8A.js";import"./tooltip-BlbPUbHt.js";import"./index-CNA_1WXc.js";import"./index-Cjk1ELii.js";import"./index-016vsYS7.js";import"./check-BEg9CPPe.js";import"./chevrons-up-down-CFkQFrV5.js";import"./truck-C3lpoN6t.js";import"./file-text-Bj7ma7x8.js";import"./chevron-right-BVfPh3io.js";import"./input-error-WvKf56iJ.js";import"./dialog-D0YsQINH.js";import"./label-3mDSrfFs.js";import"./checkbox-fsbrVdo6.js";import"./loader-circle-DMmFKltu.js";import"./select-CEe6aDA5.js";import"./trash-2-DhJ3Ity9.js";import"./plus-41caz2NB.js";const E=(m,d)=>[{id:"actions",header:"",cell:({row:s})=>{const i=s.original;return e.jsx("div",{className:"flex space-x-2",children:e.jsx(p,{variant:"warning",className:"h-8 w-8 p-0",onClick:()=>m(i,"edit"),children:e.jsx(N,{className:"h-4 w-4"})})})}},{accessorKey:"nombre",header:({column:s})=>e.jsxs(p,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Nombre",e.jsx(w,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{const i=s.original,l=i.status==="0";return e.jsx("span",{className:l?"line-through text-gray-500":"",children:i.nombre})}},{accessorKey:"group",header:"Group",cell:({row:s})=>{const i=s.original,l=d.find(g=>g.id===Number(i.group_id));return e.jsx("span",{children:(l==null?void 0:l.name)||"-"})}}],T=[{title:"Gestion de Seguridad y Salud Ocupacional",href:"/admin/category"}];function De(){const{categories:m}=I().props,[d,s]=c.useState(!1),[i,l]=c.useState(!1),[g,C]=c.useState(!1),[t,u]=c.useState({id:null,name:null,isCategorized:null,groups:[]}),[f,h]=c.useState(null),y=(a,r,o,n)=>{u({id:a,name:r,isCategorized:o,groups:n}),s(!0)},j=(a,r,o,n)=>{u({id:a,name:r,isCategorized:o,groups:n}),l(!0)},S=(a,r)=>{if(r==="edit"){const o=m.find(n=>n.id===parseInt(a.category_id));o&&u({id:o.id,name:o.nombre,isCategorized:o.is_categorized,groups:o.groups}),h(a),C(!0),console.log("Acción:",r,"Item:",a),console.log("Categoría seleccionada:",t),console.log("Categoría:",o)}else r==="delete"&&console.log("Acción:",r,"Item:",a)};return e.jsxs(A,{breadcrumbs:T,children:[e.jsx(O,{title:"Gestion SSO"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(U,{}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-1 lg:grid-cols-2",children:[...m].reverse().map(({id:a,nombre:r,is_categorized:o,category_companies:n,groups:x},D)=>e.jsxs(v,{children:[e.jsxs(G,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsx(b,{className:"flex-1",children:r}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[o==="1"&&e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>j(a,r,o,x),children:"Crear Grupo"}),e.jsxs(p,{size:"sm",className:"md:ml-4",onClick:()=>y(a,r,o,x),children:["Crear ",r]})]})]}),e.jsx(z,{children:e.jsx(k,{columns:E(S,x),data:n})})]},D))})]}),t.id!==null&&e.jsxs(e.Fragment,{children:[e.jsx(K,{categoryId:t.id,title:t.name,isDialogOpen:d,setIsDialogOpen:s,isCategorized:t.isCategorized,groups:t.groups}),e.jsx(L,{categoryId:t.id,title:t.name,isDialogOpen:i,setIsDialogOpen:l})]}),f&&e.jsx(B,{categoryId:t.id,title:t.name,isDialogOpen:g,setIsDialogOpen:C,isCategorized:t.isCategorized,groups:t.groups,item:f})]})}export{De as default};
