import{m as h,r as a,j as s}from"./app-DL-haAjQ.js";import{B as D}from"./button-slxFOLX6.js";import{D as g,b as E,c as b,d as y,e as N}from"./dialog-D5lu6PBX.js";import{f as S,m as v}from"./utils-BXZQgxmQ.js";import{L as C}from"./loader-circle-C6ZCBZuL.js";import"./index-DanSS8Bx.js";import"./index-4hjVkEVw.js";import"./index-DwZDYCBG.js";function R({isOpen:l=!1,onOpenChange:o,selectedItem:e}){const{data:i,setData:c,patch:m,processing:n,reset:f}=h({id:e.id}),[u,r]=a.useState(l),[p,x]=a.useState(!1);a.useEffect(()=>{x(i.id!=="0")},[i]),a.useEffect(()=>{r(l)},[l]),a.useEffect(()=>{c("id",e.id)},[e,c]);const j=t=>{t.preventDefault(),m(route("consolidated.close",{id:i.id}),{onSuccess:d=>{f(),r(!1),o&&o(!1),console.log("Solicitud de cierre exitosa:",d)},onError:d=>{r(!0),console.log("Errores en la solicitud de cierre:",d)}})};return s.jsx("div",{children:s.jsx(g,{open:u,onOpenChange:t=>{r(t),o&&o(t)},children:s.jsxs(E,{className:"sm:max-w-[425px]",children:[s.jsxs(b,{children:[s.jsx(y,{children:"Cerrar Consolidado"}),s.jsxs(N,{children:["¿Está seguro de que desea cerrar el consolidado para el mes de"," ",S(v,"value",e.month,"label")," del año ",e.year,"? Las empresas contratistas ya no podrán subir información."]})]}),s.jsx("form",{onSubmit:j,className:"space-y-3",method:"post",action:route("consolidated.close",{id:i.id}),children:s.jsx("div",{className:"flex justify-end space-x-2",children:s.jsxs(D,{type:"submit",className:"mt-2",disabled:n||!p,children:[n&&s.jsx(C,{className:"h-4 w-4 animate-spin"}),"Aceptar"]})})})]})})})}export{R as default};
