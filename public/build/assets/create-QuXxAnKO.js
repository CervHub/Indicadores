import{m as L,r as t,j as e}from"./app-DL-haAjQ.js";import{I as m}from"./input-error-jrpOyoDk.js";import{B as d}from"./button-slxFOLX6.js";import{D as V,a as w,b as M,c as A,d as B,e as O}from"./dialog-D5lu6PBX.js";import{L as u}from"./label-CjKXDJWW.js";import{S as h,a as p,b as x,c as j,d as g,e as f,f as S}from"./select-CSU9kjYK.js";import{m as R}from"./utils-BXZQgxmQ.js";import{L as T}from"./loader-circle-C6ZCBZuL.js";import"./index-DanSS8Bx.js";import"./index-4hjVkEVw.js";import"./index-DwZDYCBG.js";import"./index-Bvopg-KR.js";import"./index-CRgFl1ff.js";import"./index-Cd5az8kG.js";function Z(){const l=new Date().getFullYear(),C=new Date().getMonth()+1,{data:r,setData:n,post:D,processing:i,errors:c,reset:b}=L({year:l,month:C}),[v,o]=t.useState(!1),[y,N]=t.useState(!0),E=t.useRef(null);t.useEffect(()=>{N(r.year!==0&&r.month!==0)},[r]);const F=s=>{s.preventDefault(),D(route("consolidated.store"),{onSuccess:a=>{b(),o(!1),console.log("Solicitud de creación exitosa:",a)},onError:a=>{o(!0),console.log("Errores en la solicitud de creación:",a)}})},I=Array.from({length:l-2023+1},(s,a)=>2023+a);return e.jsx("div",{children:e.jsxs(V,{open:v,onOpenChange:s=>o(s),children:[e.jsx("div",{className:"flex justify-start",children:e.jsx(w,{asChild:!0,children:e.jsx(d,{className:"inline-block px-4 py-2",onClick:()=>o(!0),children:"Crear Consolidado"})})}),e.jsxs(M,{className:"sm:max-w-[425px]",children:[e.jsxs(A,{children:[e.jsx(B,{children:"Crear Consolidado"}),e.jsx(O,{children:"Complete los campos para crear un nuevo consolidado."})]}),e.jsxs("form",{onSubmit:F,className:"space-y-3",method:"post",action:route("consolidated.store"),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"year",children:"Año"}),e.jsxs(h,{onValueChange:s=>n("year",Number(s)),value:String(r.year),children:[e.jsx(p,{children:e.jsx(x,{placeholder:"Seleccione un año"})}),e.jsx(j,{children:e.jsxs(g,{children:[e.jsx(f,{children:"Años"}),I.map(s=>e.jsx(S,{value:String(s),children:s},s))]})})]}),e.jsx(m,{message:c.year})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"month",children:"Mes"}),e.jsxs(h,{onValueChange:s=>n("month",Number(s)),value:String(r.month),children:[e.jsx(p,{children:e.jsx(x,{placeholder:"Seleccione un mes"})}),e.jsx(j,{children:e.jsxs(g,{children:[e.jsx(f,{children:"Meses"}),R.map(s=>e.jsx(S,{value:s.value,children:s.label},s.value))]})})]}),e.jsx(m,{message:c.month})]}),e.jsxs(d,{ref:E,type:"submit",className:"mt-2",disabled:i||!y,children:[i&&e.jsx(T,{className:"h-4 w-4 animate-spin"}),"Generar"]})]})]})]})})}export{Z as default};
