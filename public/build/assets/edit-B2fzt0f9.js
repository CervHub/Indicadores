import{m as N,r as x,j as e}from"./app-c8WX_Xe3.js";import{I as o}from"./input-error-CMWEA6WH.js";import{B as E}from"./button-DOA1ljBO.js";import{D as C,b as F,c as I,d as L,e as y}from"./dialog-BQWVZ1Rd.js";import{I as r}from"./input-CA_GDjU4.js";import{L as d}from"./label-gcD_BAZo.js";import{t as f}from"./index-BasU7_nK.js";import{L as S}from"./loader-circle-CUwZJLef.js";import"./utils-Dxu7ruf7.js";import"./index-BTQfulPl.js";import"./index-dfKBxEkE.js";import"./index-VLf2upEY.js";function K({isOpen:u=!1,onOpenChange:m,person:a}){const{data:s,setData:l,put:n,processing:j,errors:t,reset:v}=N({id:(a==null?void 0:a.id)||0,doi:(a==null?void 0:a.doi)||"",email:(a==null?void 0:a.email)||"",nombres:(a==null?void 0:a.nombres)||"",apellidos:(a==null?void 0:a.apellidos)||"",telefono:(a==null?void 0:a.telefono)||"",cargo:(a==null?void 0:a.cargo)||""}),[b,c]=x.useState(u);x.useEffect(()=>{c(u)},[u]),x.useEffect(()=>{a&&l({id:a.id,doi:a.doi,email:a.email,nombres:a.nombres,apellidos:a.apellidos,telefono:a.telefono,cargo:a.cargo})},[a,l]);const D=i=>{i.preventDefault(),n(route("contrata.personal.update",a==null?void 0:a.id),{onSuccess:h=>{const g=h.props.flash;g.success&&(f.success(g.success),v(),c(!1),m&&m(!1)),g.error&&f.error(g.error)},onError:h=>{c(!0),f.error("Ocurrió un error al intentar actualizar la persona.")}})};return e.jsx("div",{children:e.jsx(C,{open:b,onOpenChange:i=>{c(i),m&&m(i)},children:e.jsxs(F,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(L,{children:"Editar Persona"}),e.jsx(y,{children:"Complete los campos para editar la persona."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-3",method:"post",action:route("contrata.personal.update",a==null?void 0:a.doi),children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"doi",children:"DOI"}),e.jsx(r,{id:"doi",value:s.doi,onChange:i=>l("doi",i.target.value)}),e.jsx(o,{message:t.doi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(r,{id:"email",type:"email",value:s.email,onChange:i=>l("email",i.target.value)}),e.jsx(o,{message:t.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"nombres",children:"Nombres"}),e.jsx(r,{id:"nombres",value:s.nombres,onChange:i=>l("nombres",i.target.value)}),e.jsx(o,{message:t.nombres})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"apellidos",children:"Apellidos"}),e.jsx(r,{id:"apellidos",value:s.apellidos,onChange:i=>l("apellidos",i.target.value)}),e.jsx(o,{message:t.apellidos})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"telefono",children:"Teléfono"}),e.jsx(r,{id:"telefono",value:s.telefono,onChange:i=>l("telefono",i.target.value)}),e.jsx(o,{message:t.telefono})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"cargo",children:"Cargo"}),e.jsx(r,{id:"cargo",value:s.cargo,onChange:i=>l("cargo",i.target.value)}),e.jsx(o,{message:t.cargo})]}),e.jsxs(E,{type:"submit",className:"mt-2",disabled:j,children:[j&&e.jsx(S,{className:"h-4 w-4 animate-spin"}),"Actualizar"]})]})]})})})}export{K as default};
